var Fortune_onTemplateLoad, Fortune_onTemplateReady, player, modVP, modExp, modCon, previousVideoID = 0, currentVideo, currentExperienceId = 0, readyTemplates = [], nextVideo = 0, adModule, newAdPolicy, adEvents;

Fortune_onTemplateLoad = function (experienceID) {
      omni_myTemplateLoaded(experienceID);
      // Only init the first player
      if ( currentExperienceId === 0 ) {
        player = brightcove.api.getExperience(experienceID);
        modVP = player.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);
        adModule = player.getModule(brightcove.api.modules.APIModules.ADVERTISING);

        modExp = player.getModule(brightcove.api.modules.APIModules.EXPERIENCE);
        modCon = player.getModule(brightcove.api.modules.APIModules.CONTENT);
        adEvents = brightcove.api.events.AdEvent;
        Fortune_setAdPolicy();
        modExp.addEventListener(brightcove.api.events.ExperienceEvent.TEMPLATE_READY, Fortune_onTemplateReady);
      }
}

Fortune_onTemplateReady = function (evt) {
    omni_onTemplateReady(evt);

    // Only init the first player
    if ( currentExperienceId === 0 ) {
      adModule.addEventListener(brightcove.api.events.AdEvent.START, onAdBegin);
      adModule.addEventListener(brightcove.api.events.AdEvent.COMPLETE, onAdComplete);

      modVP.getCurrentVideo(function (dto) {
      });
      modVP.addEventListener(brightcove.api.events.MediaEvent.BEGIN, onMediaEventFired);
      modVP.addEventListener(brightcove.api.events.MediaEvent.CHANGE, onMediaEventFired);
      modVP.addEventListener(brightcove.api.events.MediaEvent.COMPLETE, onMediaEventFired);
      modVP.addEventListener(brightcove.api.events.MediaEvent.PLAY, onMediaEventFired);
      modVP.addEventListener(brightcove.api.events.MediaEvent.STOP, onMediaEventFired);
    }
    readyTemplates.push( evt.target.experience.id );
}

Fortune_onTemplateError = function( error ) { }

function Fortune_setAdPolicy() {
    newAdPolicy = new Object();
    newAdPolicy.prerollAds = true;
    newAdPolicy.adPlayCap = 1;

    adModule.setAdPolicy(newAdPolicy, onAdPolicySetupComplete);
}

// Used as the callback function for setAdPolicy.
function onAdPolicySetupComplete() { }

function onMediaEventFired(evt) {
   if ( evt.type === "mediaComplete" ) {
       changeVideo();
   }
}


function onAdBegin(evt) { }

function onAdComplete(evt) { }


function init_listeners(experienceID) {
  adModule.removeEventListener(brightcove.api.events.AdEvent.START, onAdBegin);
  adModule.removeEventListener(brightcove.api.events.AdEvent.COMPLETE, onAdComplete);

  modVP.removeEventListener(brightcove.api.events.MediaEvent.BEGIN, onMediaEventFired);
  modVP.removeEventListener(brightcove.api.events.MediaEvent.CHANGE, onMediaEventFired);
  modVP.removeEventListener(brightcove.api.events.MediaEvent.COMPLETE, onMediaEventFired);
  modVP.removeEventListener(brightcove.api.events.MediaEvent.PLAY, onMediaEventFired);
  modVP.removeEventListener(brightcove.api.events.MediaEvent.STOP, onMediaEventFired);

  player = brightcove.api.getExperience(experienceID);
  modVP = player.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);
  modExp = player.getModule(brightcove.api.modules.APIModules.EXPERIENCE);
  modCon = player.getModule(brightcove.api.modules.APIModules.CONTENT);
  adModule = player.getModule(brightcove.api.modules.APIModules.ADVERTISING);
  adEvents = brightcove.api.events.AdEvent;
  Fortune_setAdPolicy();

  modVP.getCurrentVideo(function (dto) {
      });

  adModule.addEventListener(brightcove.api.events.AdEvent.START, onAdBegin);
  adModule.addEventListener(brightcove.api.events.AdEvent.COMPLETE, onAdComplete);

  modVP.addEventListener(brightcove.api.events.MediaEvent.BEGIN, onMediaEventFired);
  modVP.addEventListener(brightcove.api.events.MediaEvent.CHANGE, onMediaEventFired);
  modVP.addEventListener(brightcove.api.events.MediaEvent.COMPLETE, onMediaEventFired);
  modVP.addEventListener(brightcove.api.events.MediaEvent.PLAY, onMediaEventFired);
  modVP.addEventListener(brightcove.api.events.MediaEvent.STOP, onMediaEventFired);
}


function onMediaProgressFired(evt) {
}

function changeVideo() {
   modVP.getCurrentVideo(currentVideoCallback);
}

function currentVideoCallback(currentVideo) {
  while ( currentVideo.id == videosToSwap[nextVideo] ) {
    nextVideo++;
  }

  if ( nextVideo > videosToSwap.length ) {
    // Set up a call to load next set of video ids
  } else {
    modVP.loadVideoByID(videosToSwap[nextVideo]);
    nextVideo++;
  }
}

jQuery( document ).ready( function( $ ) {
  $(document).on('mouseenter', '.BrightcoveExperience', function(e) {
    if ( ( currentExperienceId != $(this).attr('id') ) && ( readyTemplates.indexOf( $(this).attr('id') ) >= 0 ) ) {
      currentExperienceId = $(this).attr('id');
      init_listeners(currentExperienceId);
    }
  });
});;
window.Modernizr=function(window,document,undefined){function setCss(str){mStyle.cssText=str}function setCssAll(str1,str2){return setCss(prefixes.join(str1+";")+(str2||""))}function is(obj,type){return typeof obj===type}function contains(str,substr){return!!~(""+str).indexOf(substr)}function testProps(props,prefixed){for(var i in props){var prop=props[i];if(!contains(prop,"-")&&mStyle[prop]!==undefined)return"pfx"==prefixed?prop:!0}return!1}function testDOMProps(props,obj,elem){for(var i in props){var item=obj[props[i]];if(item!==undefined)return elem===!1?props[i]:is(item,"function")?item.bind(elem||obj):item}return!1}function testPropsAll(prop,prefixed,elem){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+" "+cssomPrefixes.join(ucProp+" ")+ucProp).split(" ");return is(prefixed,"string")||is(prefixed,"undefined")?testProps(props,prefixed):(props=(prop+" "+domPrefixes.join(ucProp+" ")+ucProp).split(" "),testDOMProps(props,prefixed,elem))}function webforms(){Modernizr.input=function(props){for(var i=0,len=props.length;len>i;i++)attrs[props[i]]=!!(props[i]in inputElem);return attrs.list&&(attrs.list=!(!document.createElement("datalist")||!window.HTMLDataListElement)),attrs}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),Modernizr.inputtypes=function(props){for(var bool,inputElemType,defaultView,i=0,len=props.length;len>i;i++)inputElem.setAttribute("type",inputElemType=props[i]),bool="text"!==inputElem.type,bool&&(inputElem.value=smile,inputElem.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(inputElemType)&&inputElem.style.WebkitAppearance!==undefined?(docElement.appendChild(inputElem),defaultView=document.defaultView,bool=defaultView.getComputedStyle&&"textfield"!==defaultView.getComputedStyle(inputElem,null).WebkitAppearance&&0!==inputElem.offsetHeight,docElement.removeChild(inputElem)):/^(search|tel)$/.test(inputElemType)||(bool=/^(url|email)$/.test(inputElemType)?inputElem.checkValidity&&inputElem.checkValidity()===!1:inputElem.value!=smile)),inputs[props[i]]=!!bool;return inputs}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var featureName,hasOwnProp,version="2.7.2",Modernizr={},enableClasses=!0,docElement=document.documentElement,mod="modernizr",modElem=document.createElement(mod),mStyle=modElem.style,inputElem=document.createElement("input"),smile=":)",toString={}.toString,prefixes=" -webkit- -moz- -o- -ms- ".split(" "),omPrefixes="Webkit Moz O ms",cssomPrefixes=omPrefixes.split(" "),domPrefixes=omPrefixes.toLowerCase().split(" "),ns={svg:"http://www.w3.org/2000/svg"},tests={},inputs={},attrs={},classes=[],slice=classes.slice,injectElementWithStyles=function(rule,callback,nodes,testnames){var style,ret,node,docOverflow,div=document.createElement("div"),body=document.body,fakeBody=body||document.createElement("body");if(parseInt(nodes,10))for(;nodes--;)node=document.createElement("div"),node.id=testnames?testnames[nodes]:mod+(nodes+1),div.appendChild(node);return style=["&#173;",'<style id="s',mod,'">',rule,"</style>"].join(""),div.id=mod,(body?div:fakeBody).innerHTML+=style,fakeBody.appendChild(div),body||(fakeBody.style.background="",fakeBody.style.overflow="hidden",docOverflow=docElement.style.overflow,docElement.style.overflow="hidden",docElement.appendChild(fakeBody)),ret=callback(div,rule),body?div.parentNode.removeChild(div):(fakeBody.parentNode.removeChild(fakeBody),docElement.style.overflow=docOverflow),!!ret},testMediaQuery=function(mq){var matchMedia=window.matchMedia||window.msMatchMedia;if(matchMedia)return matchMedia(mq).matches;var bool;return injectElementWithStyles("@media "+mq+" { #"+mod+" { position: absolute; } }",function(node){bool="absolute"==(window.getComputedStyle?getComputedStyle(node,null):node.currentStyle).position}),bool},isEventSupported=function(){function isEventSupported(eventName,element){element=element||document.createElement(TAGNAMES[eventName]||"div"),eventName="on"+eventName;var isSupported=eventName in element;return isSupported||(element.setAttribute||(element=document.createElement("div")),element.setAttribute&&element.removeAttribute&&(element.setAttribute(eventName,""),isSupported=is(element[eventName],"function"),is(element[eventName],"undefined")||(element[eventName]=undefined),element.removeAttribute(eventName))),element=null,isSupported}var TAGNAMES={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return isEventSupported}(),_hasOwnProperty={}.hasOwnProperty;hasOwnProp=is(_hasOwnProperty,"undefined")||is(_hasOwnProperty.call,"undefined")?function(object,property){return property in object&&is(object.constructor.prototype[property],"undefined")}:function(object,property){return _hasOwnProperty.call(object,property)},Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError;var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F,result=target.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}return target.apply(that,args.concat(slice.call(arguments)))};return bound}),tests.flexbox=function(){return testPropsAll("flexWrap")},tests.flexboxlegacy=function(){return testPropsAll("boxDirection")},tests.canvas=function(){var elem=document.createElement("canvas");return!(!elem.getContext||!elem.getContext("2d"))},tests.canvastext=function(){return!(!Modernizr.canvas||!is(document.createElement("canvas").getContext("2d").fillText,"function"))},tests.webgl=function(){return!!window.WebGLRenderingContext},tests.touch=function(){var bool;return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?bool=!0:injectElementWithStyles(["@media (",prefixes.join("touch-enabled),("),mod,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(node){bool=9===node.offsetTop}),bool},tests.geolocation=function(){return"geolocation"in navigator},tests.postmessage=function(){return!!window.postMessage},tests.websqldatabase=function(){return!!window.openDatabase},tests.indexedDB=function(){return!!testPropsAll("indexedDB",window)},tests.hashchange=function(){return isEventSupported("hashchange",window)&&(document.documentMode===undefined||document.documentMode>7)},tests.history=function(){return!(!window.history||!history.pushState)},tests.draganddrop=function(){var div=document.createElement("div");return"draggable"in div||"ondragstart"in div&&"ondrop"in div},tests.websockets=function(){return"WebSocket"in window||"MozWebSocket"in window},tests.rgba=function(){return setCss("background-color:rgba(150,255,150,.5)"),contains(mStyle.backgroundColor,"rgba")},tests.hsla=function(){return setCss("background-color:hsla(120,40%,100%,.5)"),contains(mStyle.backgroundColor,"rgba")||contains(mStyle.backgroundColor,"hsla")},tests.multiplebgs=function(){return setCss("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(mStyle.background)},tests.backgroundsize=function(){return testPropsAll("backgroundSize")},tests.borderimage=function(){return testPropsAll("borderImage")},tests.borderradius=function(){return testPropsAll("borderRadius")},tests.boxshadow=function(){return testPropsAll("boxShadow")},tests.textshadow=function(){return""===document.createElement("div").style.textShadow},tests.opacity=function(){return setCssAll("opacity:.55"),/^0.55$/.test(mStyle.opacity)},tests.cssanimations=function(){return testPropsAll("animationName")},tests.csscolumns=function(){return testPropsAll("columnCount")},tests.cssgradients=function(){var str1="background-image:",str2="gradient(linear,left top,right bottom,from(#9f9),to(white));",str3="linear-gradient(left top,#9f9, white);";return setCss((str1+"-webkit- ".split(" ").join(str2+str1)+prefixes.join(str3+str1)).slice(0,-str1.length)),contains(mStyle.backgroundImage,"gradient")},tests.cssreflections=function(){return testPropsAll("boxReflect")},tests.csstransforms=function(){return!!testPropsAll("transform")},tests.csstransforms3d=function(){var ret=!!testPropsAll("perspective");return ret&&"webkitPerspective"in docElement.style&&injectElementWithStyles("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(node,rule){ret=9===node.offsetLeft&&3===node.offsetHeight}),ret},tests.csstransitions=function(){return testPropsAll("transition")},tests.fontface=function(){var bool;return injectElementWithStyles('@font-face {font-family:"font";src:url("https://")}',function(node,rule){var style=document.getElementById("smodernizr"),sheet=style.sheet||style.styleSheet,cssText=sheet?sheet.cssRules&&sheet.cssRules[0]?sheet.cssRules[0].cssText:sheet.cssText||"":"";bool=/src/i.test(cssText)&&0===cssText.indexOf(rule.split(" ")[0])}),bool},tests.generatedcontent=function(){var bool;return injectElementWithStyles(["#",mod,"{font:0/0 a}#",mod,':after{content:"',smile,'";visibility:hidden;font:3px/1 a}'].join(""),function(node){bool=node.offsetHeight>=3}),bool},tests.video=function(){var elem=document.createElement("video"),bool=!1;try{(bool=!!elem.canPlayType)&&(bool=new Boolean(bool),bool.ogg=elem.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),bool.h264=elem.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),bool.webm=elem.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(e){}return bool},tests.audio=function(){var elem=document.createElement("audio"),bool=!1;try{(bool=!!elem.canPlayType)&&(bool=new Boolean(bool),bool.ogg=elem.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),bool.mp3=elem.canPlayType("audio/mpeg;").replace(/^no$/,""),bool.wav=elem.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),bool.m4a=(elem.canPlayType("audio/x-m4a;")||elem.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(e){}return bool},tests.localstorage=function(){try{return localStorage.setItem(mod,mod),localStorage.removeItem(mod),!0}catch(e){return!1}},tests.sessionstorage=function(){try{return sessionStorage.setItem(mod,mod),sessionStorage.removeItem(mod),!0}catch(e){return!1}},tests.webworkers=function(){return!!window.Worker},tests.applicationcache=function(){return!!window.applicationCache},tests.svg=function(){return!!document.createElementNS&&!!document.createElementNS(ns.svg,"svg").createSVGRect},tests.inlinesvg=function(){var div=document.createElement("div");return div.innerHTML="<svg/>",(div.firstChild&&div.firstChild.namespaceURI)==ns.svg},tests.smil=function(){return!!document.createElementNS&&/SVGAnimate/.test(toString.call(document.createElementNS(ns.svg,"animate")))},tests.svgclippaths=function(){return!!document.createElementNS&&/SVGClipPath/.test(toString.call(document.createElementNS(ns.svg,"clipPath")))};for(var feature in tests)hasOwnProp(tests,feature)&&(featureName=feature.toLowerCase(),Modernizr[featureName]=tests[feature](),classes.push((Modernizr[featureName]?"":"no-")+featureName));return Modernizr.input||webforms(),Modernizr.addTest=function(feature,test){if("object"==typeof feature)for(var key in feature)hasOwnProp(feature,key)&&Modernizr.addTest(key,feature[key]);else{if(feature=feature.toLowerCase(),Modernizr[feature]!==undefined)return Modernizr;test="function"==typeof test?test():test,"undefined"!=typeof enableClasses&&enableClasses&&(docElement.className+=" "+(test?"":"no-")+feature),Modernizr[feature]=test}return Modernizr},setCss(""),modElem=inputElem=null,function(window,document){function addStyleSheet(ownerDocument,cssText){var p=ownerDocument.createElement("p"),parent=ownerDocument.getElementsByTagName("head")[0]||ownerDocument.documentElement;return p.innerHTML="x<style>"+cssText+"</style>",parent.insertBefore(p.lastChild,parent.firstChild)}function getElements(){var elements=html5.elements;return"string"==typeof elements?elements.split(" "):elements}function getExpandoData(ownerDocument){var data=expandoData[ownerDocument[expando]];return data||(data={},expanID++,ownerDocument[expando]=expanID,expandoData[expanID]=data),data}function createElement(nodeName,ownerDocument,data){if(ownerDocument||(ownerDocument=document),supportsUnknownElements)return ownerDocument.createElement(nodeName);data||(data=getExpandoData(ownerDocument));var node;return node=data.cache[nodeName]?data.cache[nodeName].cloneNode():saveClones.test(nodeName)?(data.cache[nodeName]=data.createElem(nodeName)).cloneNode():data.createElem(nodeName),!node.canHaveChildren||reSkip.test(nodeName)||node.tagUrn?node:data.frag.appendChild(node)}function createDocumentFragment(ownerDocument,data){if(ownerDocument||(ownerDocument=document),supportsUnknownElements)return ownerDocument.createDocumentFragment();data=data||getExpandoData(ownerDocument);for(var clone=data.frag.cloneNode(),i=0,elems=getElements(),l=elems.length;l>i;i++)clone.createElement(elems[i]);return clone}function shivMethods(ownerDocument,data){data.cache||(data.cache={},data.createElem=ownerDocument.createElement,data.createFrag=ownerDocument.createDocumentFragment,data.frag=data.createFrag()),ownerDocument.createElement=function(nodeName){return html5.shivMethods?createElement(nodeName,ownerDocument,data):data.createElem(nodeName)},ownerDocument.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+getElements().join().replace(/[\w\-]+/g,function(nodeName){return data.createElem(nodeName),data.frag.createElement(nodeName),'c("'+nodeName+'")'})+");return n}")(html5,data.frag)}function shivDocument(ownerDocument){ownerDocument||(ownerDocument=document);var data=getExpandoData(ownerDocument);return!html5.shivCSS||supportsHtml5Styles||data.hasCSS||(data.hasCSS=!!addStyleSheet(ownerDocument,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),supportsUnknownElements||shivMethods(ownerDocument,data),ownerDocument}var supportsHtml5Styles,supportsUnknownElements,version="3.7.0",options=window.html5||{},reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,expando="_html5shiv",expanID=0,expandoData={};!function(){try{var a=document.createElement("a");a.innerHTML="<xyz></xyz>",supportsHtml5Styles="hidden"in a,supportsUnknownElements=1==a.childNodes.length||function(){document.createElement("a");var frag=document.createDocumentFragment();return"undefined"==typeof frag.cloneNode||"undefined"==typeof frag.createDocumentFragment||"undefined"==typeof frag.createElement}()}catch(e){supportsHtml5Styles=!0,supportsUnknownElements=!0}}();var html5={elements:options.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:version,shivCSS:options.shivCSS!==!1,supportsUnknownElements:supportsUnknownElements,shivMethods:options.shivMethods!==!1,type:"default",shivDocument:shivDocument,createElement:createElement,createDocumentFragment:createDocumentFragment};window.html5=html5,shivDocument(document)}(this,document),Modernizr._version=version,Modernizr._prefixes=prefixes,Modernizr._domPrefixes=domPrefixes,Modernizr._cssomPrefixes=cssomPrefixes,Modernizr.mq=testMediaQuery,Modernizr.hasEvent=isEventSupported,Modernizr.testProp=function(prop){return testProps([prop])},Modernizr.testAllProps=testPropsAll,Modernizr.testStyles=injectElementWithStyles,Modernizr.prefixed=function(prop,obj,elem){return obj?testPropsAll(prop,obj,elem):testPropsAll(prop,"pfx")},docElement.className=docElement.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(enableClasses?" js "+classes.join(" "):""),Modernizr}(this,this.document),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory:factory(jQuery)}(function($){function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0;if(event=$.event.fix(orgEvent),event.type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(deltaY=-1*orgEvent.deltaY,delta=deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}return absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||lowestDelta>absDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(orgEvent,absDelta)&&(lowestDelta/=40)),shouldAdjustOldDeltas(orgEvent,absDelta)&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($.event.dispatch||$.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&"mousewheel"===orgEvent.type&&absDelta%120===0}var nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($.event.fixHooks)for(var i=toFix.length;i;)$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;var special=$.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var i=toBind.length;i;)this.addEventListener(toBind[--i],handler,!1);else this.onmousewheel=handler;$.data(this,"mousewheel-line-height",special.getLineHeight(this)),$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=toBind.length;i;)this.removeEventListener(toBind[--i],handler,!1);else this.onmousewheel=null},getLineHeight:function(elem){return parseInt($(elem)["offsetParent"in $.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:!0}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})}),function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):factory("object"==typeof exports?require("jquery"):jQuery)}(function($){"use strict";var defaultSettings={wheelSpeed:10,wheelPropagation:!1,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:!1},getEventClassName=function(){var incrementingId=0;return function(){var id=incrementingId;return incrementingId+=1,".perfect-scrollbar-"+id}}();$.fn.perfectScrollbar=function(suppliedSettings,option){return this.each(function(){var settings=$.extend(!0,{},defaultSettings),$this=$(this);if("object"==typeof suppliedSettings?$.extend(!0,settings,suppliedSettings):option=suppliedSettings,"update"===option)return $this.data("perfect-scrollbar-update")&&$this.data("perfect-scrollbar-update")(),$this;if("destroy"===option)return $this.data("perfect-scrollbar-destroy")&&$this.data("perfect-scrollbar-destroy")(),$this;if($this.data("perfect-scrollbar"))return $this.data("perfect-scrollbar");$this.addClass("ps-container");var scrollbarXActive,scrollbarYActive,containerWidth,containerHeight,contentWidth,contentHeight,scrollbarXWidth,scrollbarXLeft,scrollbarYHeight,scrollbarYTop,$scrollbarXRail=$("<div class='ps-scrollbar-x-rail'></div>").appendTo($this),$scrollbarYRail=$("<div class='ps-scrollbar-y-rail'></div>").appendTo($this),$scrollbarX=$("<div class='ps-scrollbar-x'></div>").appendTo($scrollbarXRail),$scrollbarY=$("<div class='ps-scrollbar-y'></div>").appendTo($scrollbarYRail),scrollbarXBottom=parseInt($scrollbarXRail.css("bottom"),10),isScrollbarXUsingBottom=scrollbarXBottom===scrollbarXBottom,scrollbarXTop=isScrollbarXUsingBottom?null:parseInt($scrollbarXRail.css("top"),10),scrollbarYRight=parseInt($scrollbarYRail.css("right"),10),isScrollbarYUsingRight=scrollbarYRight===scrollbarYRight,scrollbarYLeft=isScrollbarYUsingRight?null:parseInt($scrollbarYRail.css("left"),10),isRtl="rtl"===$this.css("direction"),eventClassName=getEventClassName(),railBorderXWidth=parseInt($scrollbarXRail.css("borderLeftWidth"),10)+parseInt($scrollbarXRail.css("borderRightWidth"),10),railBorderYWidth=parseInt($scrollbarXRail.css("borderTopWidth"),10)+parseInt($scrollbarXRail.css("borderBottomWidth"),10),updateContentScrollTop=function(currentTop,deltaY){var newTop=currentTop+deltaY,maxTop=containerHeight-scrollbarYHeight;scrollbarYTop=0>newTop?0:newTop>maxTop?maxTop:newTop;var scrollTop=parseInt(scrollbarYTop*(contentHeight-containerHeight)/(containerHeight-scrollbarYHeight),10);$this.scrollTop(scrollTop),$scrollbarXRail.css(isScrollbarXUsingBottom?{bottom:scrollbarXBottom-scrollTop}:{top:scrollbarXTop+scrollTop})},updateContentScrollLeft=function(currentLeft,deltaX){var newLeft=currentLeft+deltaX,maxLeft=containerWidth-scrollbarXWidth;scrollbarXLeft=0>newLeft?0:newLeft>maxLeft?maxLeft:newLeft;var scrollLeft=parseInt(scrollbarXLeft*(contentWidth-containerWidth)/(containerWidth-scrollbarXWidth),10);$this.scrollLeft(scrollLeft),$scrollbarYRail.css(isScrollbarYUsingRight?{right:scrollbarYRight-scrollLeft}:{left:scrollbarYLeft+scrollLeft})},getSettingsAdjustedThumbSize=function(thumbSize){return settings.minScrollbarLength&&(thumbSize=Math.max(thumbSize,settings.minScrollbarLength)),settings.maxScrollbarLength&&(thumbSize=Math.min(thumbSize,settings.maxScrollbarLength)),thumbSize},updateScrollbarCss=function(){var scrollbarXStyles={width:containerWidth,display:scrollbarXActive?"inherit":"none"};isRtl?scrollbarXStyles.left=$this.scrollLeft()+containerWidth-contentWidth:scrollbarXStyles.left=$this.scrollLeft(),isScrollbarXUsingBottom?scrollbarXStyles.bottom=scrollbarXBottom-$this.scrollTop():scrollbarXStyles.top=scrollbarXTop+$this.scrollTop(),$scrollbarXRail.css(scrollbarXStyles);var scrollbarYStyles={top:$this.scrollTop(),height:containerHeight,display:scrollbarYActive?"inherit":"none"};isScrollbarYUsingRight?isRtl?scrollbarYStyles.right=contentWidth-$this.scrollLeft()-scrollbarYRight-$scrollbarY.outerWidth():scrollbarYStyles.right=scrollbarYRight-$this.scrollLeft():isRtl?scrollbarYStyles.left=$this.scrollLeft()+2*containerWidth-contentWidth-scrollbarYLeft-$scrollbarY.outerWidth():scrollbarYStyles.left=scrollbarYLeft+$this.scrollLeft(),$scrollbarYRail.css(scrollbarYStyles),$scrollbarX.css({left:scrollbarXLeft,width:scrollbarXWidth-railBorderXWidth}),$scrollbarY.css({top:scrollbarYTop,height:scrollbarYHeight-railBorderYWidth}),scrollbarXActive?$this.addClass("ps-active-x"):$this.removeClass("ps-active-x"),scrollbarYActive?$this.addClass("ps-active-y"):$this.removeClass("ps-active-y")},updateBarSizeAndPosition=function(){containerWidth=settings.includePadding?$this.innerWidth():$this.width(),containerHeight=settings.includePadding?$this.innerHeight():$this.height(),contentWidth=$this.prop("scrollWidth"),contentHeight=$this.prop("scrollHeight"),!settings.suppressScrollX&&containerWidth+settings.scrollXMarginOffset<contentWidth?(scrollbarXActive=!0,scrollbarXWidth=getSettingsAdjustedThumbSize(parseInt(containerWidth*containerWidth/contentWidth,10)),scrollbarXLeft=parseInt($this.scrollLeft()*(containerWidth-scrollbarXWidth)/(contentWidth-containerWidth),10)):(scrollbarXActive=!1,scrollbarXWidth=0,scrollbarXLeft=0,$this.scrollLeft(0)),!settings.suppressScrollY&&containerHeight+settings.scrollYMarginOffset<contentHeight?(scrollbarYActive=!0,scrollbarYHeight=getSettingsAdjustedThumbSize(parseInt(containerHeight*containerHeight/contentHeight,10)),scrollbarYTop=parseInt($this.scrollTop()*(containerHeight-scrollbarYHeight)/(contentHeight-containerHeight),10)):(scrollbarYActive=!1,scrollbarYHeight=0,scrollbarYTop=0,$this.scrollTop(0)),scrollbarYTop>=containerHeight-scrollbarYHeight&&(scrollbarYTop=containerHeight-scrollbarYHeight),scrollbarXLeft>=containerWidth-scrollbarXWidth&&(scrollbarXLeft=containerWidth-scrollbarXWidth),updateScrollbarCss()},bindMouseScrollXHandler=function(){var currentLeft,currentPageX;$scrollbarX.bind("mousedown"+eventClassName,function(e){currentPageX=e.pageX,currentLeft=$scrollbarX.position().left,$scrollbarXRail.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),$(document).bind("mousemove"+eventClassName,function(e){$scrollbarXRail.hasClass("in-scrolling")&&(updateContentScrollLeft(currentLeft,e.pageX-currentPageX),e.stopPropagation(),e.preventDefault())}),$(document).bind("mouseup"+eventClassName,function(e){$scrollbarXRail.hasClass("in-scrolling")&&$scrollbarXRail.removeClass("in-scrolling")}),currentLeft=currentPageX=null},bindMouseScrollYHandler=function(){var currentTop,currentPageY;$scrollbarY.bind("mousedown"+eventClassName,function(e){currentPageY=e.pageY,currentTop=$scrollbarY.position().top,$scrollbarYRail.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),$(document).bind("mousemove"+eventClassName,function(e){$scrollbarYRail.hasClass("in-scrolling")&&(updateContentScrollTop(currentTop,e.pageY-currentPageY),e.stopPropagation(),e.preventDefault())}),$(document).bind("mouseup"+eventClassName,function(e){$scrollbarYRail.hasClass("in-scrolling")&&$scrollbarYRail.removeClass("in-scrolling")}),currentTop=currentPageY=null},shouldPreventDefault=function(deltaX,deltaY){var scrollTop=$this.scrollTop();if(0===deltaX){if(!scrollbarYActive)return!1;if(0===scrollTop&&deltaY>0||scrollTop>=contentHeight-containerHeight&&0>deltaY)return!settings.wheelPropagation}var scrollLeft=$this.scrollLeft();if(0===deltaY){if(!scrollbarXActive)return!1;if(0===scrollLeft&&0>deltaX||scrollLeft>=contentWidth-containerWidth&&deltaX>0)return!settings.wheelPropagation}return!0},bindMouseWheelHandler=function(){settings.wheelSpeed/=10;var shouldPrevent=!1;$this.bind("mousewheel"+eventClassName,function(e,deprecatedDelta,deprecatedDeltaX,deprecatedDeltaY){var deltaX=e.deltaX*e.deltaFactor||deprecatedDeltaX,deltaY=e.deltaY*e.deltaFactor||deprecatedDeltaY;shouldPrevent=!1,settings.useBothWheelAxes?scrollbarYActive&&!scrollbarXActive?($this.scrollTop(deltaY?$this.scrollTop()-deltaY*settings.wheelSpeed:$this.scrollTop()+deltaX*settings.wheelSpeed),shouldPrevent=!0):scrollbarXActive&&!scrollbarYActive&&($this.scrollLeft(deltaX?$this.scrollLeft()+deltaX*settings.wheelSpeed:$this.scrollLeft()-deltaY*settings.wheelSpeed),shouldPrevent=!0):($this.scrollTop($this.scrollTop()-deltaY*settings.wheelSpeed),$this.scrollLeft($this.scrollLeft()+deltaX*settings.wheelSpeed)),updateBarSizeAndPosition(),shouldPrevent=shouldPrevent||shouldPreventDefault(deltaX,deltaY),shouldPrevent&&(e.stopPropagation(),e.preventDefault())}),$this.bind("MozMousePixelScroll"+eventClassName,function(e){shouldPrevent&&e.preventDefault()})},bindKeyboardHandler=function(){var hovered=!1;$this.bind("mouseenter"+eventClassName,function(e){hovered=!0}),$this.bind("mouseleave"+eventClassName,function(e){hovered=!1});var shouldPrevent=!1;$(document).bind("keydown"+eventClassName,function(e){if(!(e.isDefaultPrevented&&e.isDefaultPrevented()||!hovered||$(document.activeElement).is(":input,[contenteditable]"))){var deltaX=0,deltaY=0;switch(e.which){case 37:deltaX=-30;break;case 38:deltaY=30;break;case 39:deltaX=30;break;case 40:deltaY=-30;break;case 33:deltaY=90;break;case 32:case 34:deltaY=-90;break;case 35:deltaY=-containerHeight;break;case 36:deltaY=containerHeight;break;default:return}$this.scrollTop($this.scrollTop()-deltaY),$this.scrollLeft($this.scrollLeft()+deltaX),shouldPrevent=shouldPreventDefault(deltaX,deltaY),shouldPrevent&&e.preventDefault()}})},bindRailClickHandler=function(){var stopPropagation=function(e){e.stopPropagation()};$scrollbarY.bind("click"+eventClassName,stopPropagation),$scrollbarYRail.bind("click"+eventClassName,function(e){var halfOfScrollbarLength=parseInt(scrollbarYHeight/2,10),positionTop=e.pageY-$scrollbarYRail.offset().top-halfOfScrollbarLength,maxPositionTop=containerHeight-scrollbarYHeight,positionRatio=positionTop/maxPositionTop;0>positionRatio?positionRatio=0:positionRatio>1&&(positionRatio=1),$this.scrollTop((contentHeight-containerHeight)*positionRatio)}),$scrollbarX.bind("click"+eventClassName,stopPropagation),$scrollbarXRail.bind("click"+eventClassName,function(e){var halfOfScrollbarLength=parseInt(scrollbarXWidth/2,10),positionLeft=e.pageX-$scrollbarXRail.offset().left-halfOfScrollbarLength,maxPositionLeft=containerWidth-scrollbarXWidth,positionRatio=positionLeft/maxPositionLeft;0>positionRatio?positionRatio=0:positionRatio>1&&(positionRatio=1),$this.scrollLeft((contentWidth-containerWidth)*positionRatio)})},bindMobileTouchHandler=function(){var applyTouchMove=function(differenceX,differenceY){$this.scrollTop($this.scrollTop()-differenceY),$this.scrollLeft($this.scrollLeft()-differenceX),updateBarSizeAndPosition()},startCoords={},startTime=0,speed={},breakingProcess=null,inGlobalTouch=!1;$(window).bind("touchstart"+eventClassName,function(e){inGlobalTouch=!0}),$(window).bind("touchend"+eventClassName,function(e){inGlobalTouch=!1}),$this.bind("touchstart"+eventClassName,function(e){var touch=e.originalEvent.targetTouches[0];startCoords.pageX=touch.pageX,startCoords.pageY=touch.pageY,startTime=(new Date).getTime(),null!==breakingProcess&&clearInterval(breakingProcess),e.stopPropagation()}),$this.bind("touchmove"+eventClassName,function(e){if(!inGlobalTouch&&1===e.originalEvent.targetTouches.length){var touch=e.originalEvent.targetTouches[0],currentCoords={};currentCoords.pageX=touch.pageX,currentCoords.pageY=touch.pageY;var differenceX=currentCoords.pageX-startCoords.pageX,differenceY=currentCoords.pageY-startCoords.pageY;applyTouchMove(differenceX,differenceY),startCoords=currentCoords;var currentTime=(new Date).getTime(),timeGap=currentTime-startTime;timeGap>0&&(speed.x=differenceX/timeGap,speed.y=differenceY/timeGap,startTime=currentTime),e.preventDefault()}}),$this.bind("touchend"+eventClassName,function(e){clearInterval(breakingProcess),breakingProcess=setInterval(function(){return Math.abs(speed.x)<.01&&Math.abs(speed.y)<.01?void clearInterval(breakingProcess):(applyTouchMove(30*speed.x,30*speed.y),speed.x*=.8,void(speed.y*=.8))},10)})},bindScrollHandler=function(){$this.bind("scroll"+eventClassName,function(e){updateBarSizeAndPosition()})},destroy=function(){$this.unbind(eventClassName),$(window).unbind(eventClassName),$(document).unbind(eventClassName),$this.data("perfect-scrollbar",null),$this.data("perfect-scrollbar-update",null),$this.data("perfect-scrollbar-destroy",null),$scrollbarX.remove(),$scrollbarY.remove(),$scrollbarXRail.remove(),$scrollbarYRail.remove(),$scrollbarXRail=$scrollbarYRail=$scrollbarX=$scrollbarY=scrollbarXActive=scrollbarYActive=containerWidth=containerHeight=contentWidth=contentHeight=scrollbarXWidth=scrollbarXLeft=scrollbarXBottom=isScrollbarXUsingBottom=scrollbarXTop=scrollbarYHeight=scrollbarYTop=scrollbarYRight=isScrollbarYUsingRight=scrollbarYLeft=isRtl=eventClassName=null;
},ieSupport=function(version){$this.addClass("ie").addClass("ie"+version);var bindHoverHandlers=function(){var mouseenter=function(){$(this).addClass("hover")},mouseleave=function(){$(this).removeClass("hover")};$this.bind("mouseenter"+eventClassName,mouseenter).bind("mouseleave"+eventClassName,mouseleave),$scrollbarXRail.bind("mouseenter"+eventClassName,mouseenter).bind("mouseleave"+eventClassName,mouseleave),$scrollbarYRail.bind("mouseenter"+eventClassName,mouseenter).bind("mouseleave"+eventClassName,mouseleave),$scrollbarX.bind("mouseenter"+eventClassName,mouseenter).bind("mouseleave"+eventClassName,mouseleave),$scrollbarY.bind("mouseenter"+eventClassName,mouseenter).bind("mouseleave"+eventClassName,mouseleave)},fixIe6ScrollbarPosition=function(){updateScrollbarCss=function(){var scrollbarXStyles={left:scrollbarXLeft+$this.scrollLeft(),width:scrollbarXWidth};isScrollbarXUsingBottom?scrollbarXStyles.bottom=scrollbarXBottom:scrollbarXStyles.top=scrollbarXTop,$scrollbarX.css(scrollbarXStyles);var scrollbarYStyles={top:scrollbarYTop+$this.scrollTop(),height:scrollbarYHeight};isScrollbarYUsingRight?scrollbarYStyles.right=scrollbarYRight:scrollbarYStyles.left=scrollbarYLeft,$scrollbarY.css(scrollbarYStyles),$scrollbarX.hide().show(),$scrollbarY.hide().show()}};6===version&&(bindHoverHandlers(),fixIe6ScrollbarPosition())},supportsTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,initialize=function(){var ieMatch=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/);ieMatch&&"msie"===ieMatch[1]&&ieSupport(parseInt(ieMatch[2],10)),updateBarSizeAndPosition(),bindScrollHandler(),bindMouseScrollXHandler(),bindMouseScrollYHandler(),bindRailClickHandler(),supportsTouch&&bindMobileTouchHandler(),$this.mousewheel&&bindMouseWheelHandler(),settings.useKeyboard&&bindKeyboardHandler(),$this.data("perfect-scrollbar",$this),$this.data("perfect-scrollbar-update",updateBarSizeAndPosition),$this.data("perfect-scrollbar-destroy",destroy)};return initialize(),$this})}});var Twig=function(Twig){return Twig.VERSION="0.6.0",Twig}(Twig||{}),Twig=function(Twig){"use strict";function is(type,obj){var clas=Object.prototype.toString.call(obj).slice(8,-1);return void 0!==obj&&null!==obj&&clas===type}function relativePath(template,file){var base,base_path,val,sep_chr="/",new_path=[];if(template.url)base="undefined"!=typeof template.base?template.base+("/"===template.base.charAt(template.base.length-1)?"":"/"):template.url;else{if(!template.path)throw new Twig.Error("Cannot extend an inline template.");var path=require("path"),sep=path.sep||sep_chr,relative=new RegExp("^\\.{1,2}"+sep.replace("\\","\\\\"));void 0!==template.base&&null==file.match(relative)?(file=file.replace(template.base,""),base=template.base+sep):base=template.path,base=base.replace(sep+sep,sep),sep_chr=sep}for(base_path=base.split(sep_chr),base_path.pop(),base_path=base_path.concat(file.split(sep_chr));base_path.length>0;)val=base_path.shift(),"."==val||(".."==val&&new_path.length>0&&".."!=new_path[new_path.length-1]?new_path.pop():new_path.push(val));return new_path.join(sep_chr)}return Twig.trace=!1,Twig.debug=!1,Twig.cache=!0,Twig.placeholders={parent:"{{|PARENT|}}"},Twig.indexOf=function(arr,searchElement){if(Array.prototype.hasOwnProperty("indexOf"))return arr.indexOf(searchElement);if(void 0===arr||null===arr)throw new TypeError;var t=Object(arr),len=t.length>>>0;if(0===len)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=len)return-1;for(var k=n>=0?n:Math.max(len-Math.abs(n),0);len>k;k++)if(k in t&&t[k]===searchElement)return k;return arr==searchElement?0:-1},Twig.forEach=function(arr,callback,thisArg){if(Array.prototype.forEach)return arr.forEach(callback,thisArg);var T,k;if(null==arr)throw new TypeError(" this is null or not defined");var O=Object(arr),len=O.length>>>0;if("[object Function]"!={}.toString.call(callback))throw new TypeError(callback+" is not a function");for(thisArg&&(T=thisArg),k=0;len>k;){var kValue;k in O&&(kValue=O[k],callback.call(T,kValue,k,O)),k++}},Twig.Error=function(message){this.message=message,this.name="TwigException",this.type="TwigException"},Twig.Error.prototype.toString=function(){var output=this.name+": "+this.message;return output},Twig.log={trace:function(){Twig.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){Twig.debug&&console&&console.log(Array.prototype.slice.call(arguments))}},"undefined"!=typeof console&&"undefined"!=typeof console.log?Twig.log.error=console.log:Twig.log.error=function(){},Twig.token={},Twig.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw"},Twig.token.definitions=[{type:Twig.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:Twig.token.type.output,open:"{{",close:"}}"},{type:Twig.token.type.logic,open:"{%",close:"%}"},{type:Twig.token.type.comment,open:"{#",close:"#}"}],Twig.token.strings=['"',"'"],Twig.token.findStart=function(template){var i,token_template,first_key_position,output={position:null,def:null};for(i=0;i<Twig.token.definitions.length;i++)token_template=Twig.token.definitions[i],first_key_position=template.indexOf(token_template.open),Twig.log.trace("Twig.token.findStart: ","Searching for ",token_template.open," found at ",first_key_position),first_key_position>=0&&(null===output.position||first_key_position<output.position)&&(output.position=first_key_position,output.def=token_template);return output},Twig.token.findEnd=function(template,token_def,start){for(var i,l,end=null,found=!1,offset=0,str_pos=null,str_found=null,pos=null,end_offset=null,this_str_pos=null,end_str_pos=null;!found;){if(str_pos=null,str_found=null,pos=template.indexOf(token_def.close,offset),!(pos>=0))throw new Twig.Error("Unable to find closing bracket '"+token_def.close+"' opened near template position "+start);if(end=pos,found=!0,token_def.type===Twig.token.type.comment)break;for(l=Twig.token.strings.length,i=0;l>i;i+=1)this_str_pos=template.indexOf(Twig.token.strings[i],offset),this_str_pos>0&&pos>this_str_pos&&(null===str_pos||str_pos>this_str_pos)&&(str_pos=this_str_pos,str_found=Twig.token.strings[i]);if(null!==str_pos)for(end_offset=str_pos+1,end=null,found=!1;;){if(end_str_pos=template.indexOf(str_found,end_offset),0>end_str_pos)throw"Unclosed string in template";if("\\"!==template.substr(end_str_pos-1,1)){offset=end_str_pos+1;break}end_offset=end_str_pos+1}}return end},Twig.tokenize=function(template){for(var tokens=[],error_offset=0,found_token=null,end=null;template.length>0;)found_token=Twig.token.findStart(template),Twig.log.trace("Twig.tokenize: ","Found token: ",found_token),null!==found_token.position?(found_token.position>0&&tokens.push({type:Twig.token.type.raw,value:template.substring(0,found_token.position)}),template=template.substr(found_token.position+found_token.def.open.length),error_offset+=found_token.position+found_token.def.open.length,end=Twig.token.findEnd(template,found_token.def,error_offset),Twig.log.trace("Twig.tokenize: ","Token ends at ",end),tokens.push({type:found_token.def.type,value:template.substring(0,end).trim()}),"logic"===found_token.def.type&&"\n"===template.substr(end+found_token.def.close.length,1)&&(end+=1),template=template.substr(end+found_token.def.close.length),error_offset+=end+found_token.def.close.length):(tokens.push({type:Twig.token.type.raw,value:template}),template="");return tokens},Twig.compile=function(tokens){try{for(var output=[],stack=[],intermediate_output=[],token=null,logic_token=null,unclosed_token=null,prev_token=null,prev_template=null,tok_output=null,type=null,open=null,next=null;tokens.length>0;){switch(token=tokens.shift(),Twig.log.trace("Compiling token ",token),token.type){case Twig.token.type.raw:stack.length>0?intermediate_output.push(token):output.push(token);break;case Twig.token.type.logic:if(logic_token=Twig.logic.compile.apply(this,[token]),type=logic_token.type,open=Twig.logic.handler[type].open,next=Twig.logic.handler[type].next,Twig.log.trace("Twig.compile: ","Compiled logic token to ",logic_token," next is: ",next," open is : ",open),void 0!==open&&!open){if(prev_token=stack.pop(),prev_template=Twig.logic.handler[prev_token.type],Twig.indexOf(prev_template.next,type)<0)throw new Error(type+" not expected after a "+prev_token.type);prev_token.output=prev_token.output||[],prev_token.output=prev_token.output.concat(intermediate_output),intermediate_output=[],tok_output={type:Twig.token.type.logic,token:prev_token},stack.length>0?intermediate_output.push(tok_output):output.push(tok_output)}void 0!==next&&next.length>0?(Twig.log.trace("Twig.compile: ","Pushing ",logic_token," to logic stack."),stack.length>0&&(prev_token=stack.pop(),prev_token.output=prev_token.output||[],prev_token.output=prev_token.output.concat(intermediate_output),stack.push(prev_token),intermediate_output=[]),stack.push(logic_token)):void 0!==open&&open&&(tok_output={type:Twig.token.type.logic,token:logic_token},stack.length>0?intermediate_output.push(tok_output):output.push(tok_output));break;case Twig.token.type.comment:break;case Twig.token.type.output:Twig.expression.compile.apply(this,[token]),stack.length>0?intermediate_output.push(token):output.push(token)}Twig.log.trace("Twig.compile: "," Output: ",output," Logic Stack: ",stack," Pending Output: ",intermediate_output)}if(stack.length>0)throw unclosed_token=stack.pop(),new Error("Unable to find an end tag for "+unclosed_token.type+", expecting one of "+unclosed_token.next);return output}catch(ex){if(Twig.log.error("Error compiling twig template "+this.id+": "),Twig.log.error(ex.stack?ex.stack:ex.toString()),this.options.rethrow)throw ex}},Twig.parse=function(tokens,context){try{var output=[],chain=!0,that=this;return context=context||{},Twig.forEach(tokens,function(token){switch(Twig.log.debug("Twig.parse: ","Parsing token: ",token),token.type){case Twig.token.type.raw:output.push(token.value);break;case Twig.token.type.logic:var logic_token=token.token,logic=Twig.logic.parse.apply(that,[logic_token,context,chain]);void 0!==logic.chain&&(chain=logic.chain),void 0!==logic.context&&(context=logic.context),void 0!==logic.output&&output.push(logic.output);break;case Twig.token.type.comment:break;case Twig.token.type.output:Twig.log.debug("Twig.parse: ","Output token: ",token.stack),output.push(Twig.expression.parse.apply(that,[token.stack,context]))}}),output.join("")}catch(ex){if(Twig.log.error("Error parsing twig template "+this.id+": "),Twig.log.error(ex.stack?ex.stack:ex.toString()),this.options.rethrow)throw ex;if(Twig.debug)return ex.toString()}},Twig.prepare=function(data){var tokens,raw_tokens;return Twig.log.debug("Twig.prepare: ","Tokenizing ",data),raw_tokens=Twig.tokenize.apply(this,[data]),Twig.log.debug("Twig.prepare: ","Compiling ",raw_tokens),tokens=Twig.compile.apply(this,[raw_tokens]),Twig.log.debug("Twig.prepare: ","Compiled ",tokens),tokens},Twig.Templates={registry:{}},Twig.validateId=function(id){if("prototype"===id)throw new Twig.Error(id+" is not a valid twig identifier");if(Twig.Templates.registry.hasOwnProperty(id))throw new Twig.Error("There is already a template with the ID "+id);return!0},Twig.Templates.save=function(template){if(void 0===template.id)throw new Twig.Error("Unable to save template with no id");Twig.Templates.registry[template.id]=template},Twig.Templates.load=function(id){return Twig.Templates.registry.hasOwnProperty(id)?Twig.Templates.registry[id]:null},Twig.Templates.loadRemote=function(location,params,callback,error_callback){var id=params.id,method=params.method,async=params.async,precompiled=params.precompiled,template=null;if(void 0===async&&(async=!0),void 0===id&&(id=location),params.id=id,Twig.cache&&Twig.Templates.registry.hasOwnProperty(id))return callback&&callback(Twig.Templates.registry[id]),Twig.Templates.registry[id];if("ajax"==method){if("undefined"==typeof XMLHttpRequest)throw new Twig.Error("Unsupported platform: Unable to do remote requests because there is no XMLHTTPRequest implementation");var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){var data=null;4==xmlhttp.readyState&&(200==xmlhttp.status?(Twig.log.debug("Got template ",xmlhttp.responseText),data=precompiled===!0?JSON.parse(xmlhttp.responseText):xmlhttp.responseText,params.url=location,params.data=data,template=new Twig.Template(params),callback&&callback(template)):error_callback&&error_callback(xmlhttp))},xmlhttp.open("GET",location,async),xmlhttp.send()}else!function(){var fs=require("fs"),data=(require("path"),null),loadTemplateFn=function(err,data){return err?void(error_callback&&error_callback(err)):(precompiled===!0&&(data=JSON.parse(data)),params.data=data,params.path=location,template=new Twig.Template(params),void(callback&&callback(template)))};if(async===!0)fs.stat(location,function(err,stats){if(err||!stats.isFile())throw new Twig.Error("Unable to find template file "+location);fs.readFile(location,"utf8",loadTemplateFn)});else{if(!fs.statSync(location).isFile())throw new Twig.Error("Unable to find template file "+location);data=fs.readFileSync(location,"utf8"),loadTemplateFn(void 0,data)}}();return async===!1?template:!0},Twig.Template=function(params){var data=params.data,id=params.id,blocks=params.blocks,base=params.base,path=params.path,url=params.url,options=params.options;this.id=id,this.base=base,this.path=path,this.url=url,this.options=options,this.reset(blocks),is("String",data)?this.tokens=Twig.prepare.apply(this,[data]):this.tokens=data,void 0!==id&&Twig.Templates.save(this)},Twig.Template.prototype.reset=function(blocks){Twig.log.debug("Twig.Template.reset","Reseting template "+this.id),this.blocks={},this.child={blocks:blocks||{}},this.extend=null},Twig.Template.prototype.render=function(context,params){params=params||{};var output,url;if(this.context=context||{},this.reset(),params.blocks&&(this.blocks=params.blocks),output=Twig.parse.apply(this,[this.tokens,this.context]),this.extend){var ext_template;return this.options.allowInlineIncludes&&(ext_template=Twig.Templates.load(this.extend),ext_template&&(ext_template.options=this.options)),ext_template||(url=relativePath(this,this.extend),ext_template=Twig.Templates.loadRemote(url,{method:this.url?"ajax":"fs",base:this.base,async:!1,id:url,options:this.options})),this.parent=ext_template,this.parent.render(this.context,{blocks:this.blocks})}return"blocks"==params.output?this.blocks:output},Twig.Template.prototype.importFile=function(file){var url,sub_template;if(!this.url&&!this.path&&this.options.allowInlineIncludes){if(sub_template=Twig.Templates.load(file),sub_template.options=this.options,sub_template)return sub_template;throw new Twig.Error("Didn't find the inline template by id")}return url=relativePath(this,file),sub_template=Twig.Templates.loadRemote(url,{method:this.url?"ajax":"fs",base:this.base,async:!1,options:this.options,id:url})},Twig.Template.prototype.importBlocks=function(file,override){var sub_template=this.importFile(file),context=this.context,that=this;override=override||!1,sub_template.render(context),Twig.forEach(Object.keys(sub_template.blocks),function(key){(override||void 0===that.blocks[key])&&(that.blocks[key]=sub_template.blocks[key])})},Twig.Template.prototype.compile=function(options){return Twig.compiler.compile(this,options)},Twig}(Twig||{});!function(){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Object.keys||(Object.keys=function(o){if(o!==Object(o))throw new TypeError("Object.keys called on non-object");var p,ret=[];for(p in o)Object.prototype.hasOwnProperty.call(o,p)&&ret.push(p);return ret})}();var Twig=function(Twig){Twig.lib={};var sprintf=function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}function str_repeat(input,multiplier){for(var output=[];multiplier>0;output[--multiplier]=input);return output.join("")}var str_format=function(){return str_format.cache.hasOwnProperty(arguments[0])||(str_format.cache[arguments[0]]=str_format.parse(arguments[0])),str_format.format.call(null,str_format.cache[arguments[0]],arguments)};return str_format.format=function(parse_tree,argv){var arg,i,k,match,pad,pad_character,pad_length,cursor=1,tree_length=parse_tree.length,node_type="",output=[];for(i=0;tree_length>i;i++)if(node_type=get_type(parse_tree[i]),"string"===node_type)output.push(parse_tree[i]);else if("array"===node_type){if(match=parse_tree[i],match[2])for(arg=argv[cursor],k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k]))throw sprintf('[sprintf] property "%s" does not exist',match[2][k]);arg=arg[match[2][k]]}else arg=match[1]?argv[match[1]]:argv[cursor++];if(/[^s]/.test(match[8])&&"number"!=get_type(arg))throw sprintf("[sprintf] expecting number but found %s",get_type(arg));switch(match[8]){case"b":arg=arg.toString(2);break;case"c":arg=String.fromCharCode(arg);break;case"d":arg=parseInt(arg,10);break;case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case"o":arg=arg.toString(8);break;case"s":arg=(arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg;break;case"u":arg=Math.abs(arg);break;case"x":arg=arg.toString(16);break;case"X":arg=arg.toString(16).toUpperCase()}arg=/[def]/.test(match[8])&&match[3]&&arg>=0?"+"+arg:arg,pad_character=match[4]?"0"==match[4]?"0":match[4].charAt(1):" ",pad_length=match[6]-String(arg).length,pad=match[6]?str_repeat(pad_character,pad_length):"",output.push(match[5]?arg+pad:pad+arg)}return output.join("")},str_format.cache={},str_format.parse=function(fmt){for(var _fmt=fmt,match=[],parse_tree=[],arg_names=0;_fmt;){if(null!==(match=/^[^\x25]+/.exec(_fmt)))parse_tree.push(match[0]);else if(null!==(match=/^\x25{2}/.exec(_fmt)))parse_tree.push("%");else{if(null===(match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt)))throw"[sprintf] huh?";if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if(null===(field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field)))throw"[sprintf] huh?";for(field_list.push(field_match[1]);""!==(replacement_field=replacement_field.substring(field_match[0].length));)if(null!==(field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field)))field_list.push(field_match[1]);else{if(null===(field_match=/^\[(\d+)\]/.exec(replacement_field)))throw"[sprintf] huh?";field_list.push(field_match[1])}match[2]=field_list}else arg_names|=2;if(3===arg_names)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";parse_tree.push(match)}_fmt=_fmt.substring(match[0].length)}return parse_tree},str_format}(),vsprintf=function(fmt,argv){return argv.unshift(fmt),sprintf.apply(null,argv)};return Twig.lib.sprintf=sprintf,Twig.lib.vsprintf=vsprintf,function(){function getOrdinalFor(intNum){return(intNum=Math.abs(intNum)%100)%10==1&&11!=intNum?"st":intNum%10==2&&12!=intNum?"nd":intNum%10==3&&13!=intNum?"rd":"th"}function getISO8601Year(aDate){var d=new Date(aDate.getFullYear()+1,0,4);return 7>(d-aDate)/864e5&&(aDate.getDay()+6)%7<(d.getDay()+6)%7?d.getFullYear():aDate.getMonth()>0||aDate.getDate()>=4?aDate.getFullYear():aDate.getFullYear()-((aDate.getDay()+6)%7-aDate.getDate()>2?1:0)}function getISO8601Week(aDate){var d=new Date(getISO8601Year(aDate),0,4);return d.setDate(d.getDate()-(d.getDay()+6)%7),parseInt((aDate-d)/6048e5)+1}var shortDays="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),fullDays="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),shortMonths="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),fullMonths="January,February,March,April,May,June,July,August,September,October,November,December".split(",");Twig.lib.formatDate=function(date,format){if("string"!=typeof format||/^\s*$/.test(format))return date+"";var jan1st=new Date(date.getFullYear(),0,1),me=date;return format.replace(/[dDjlNSwzWFmMntLoYyaABgGhHisuU]/g,function(option){switch(option){case"d":return("0"+me.getDate()).replace(/^.+(..)$/,"$1");case"D":return shortDays[me.getDay()];case"j":return me.getDate();case"l":return fullDays[me.getDay()];case"N":return(me.getDay()+6)%7+1;case"S":return getOrdinalFor(me.getDate());case"w":return me.getDay();case"z":return Math.ceil((jan1st-me)/864e5);case"W":return("0"+getISO8601Week(me)).replace(/^.(..)$/,"$1");case"F":return fullMonths[me.getMonth()];case"m":return("0"+(me.getMonth()+1)).replace(/^.+(..)$/,"$1");case"M":return shortMonths[me.getMonth()];case"n":return me.getMonth()+1;case"t":return new Date(me.getFullYear(),me.getMonth()+1,-1).getDate();case"L":return 29==new Date(me.getFullYear(),1,29).getDate()?1:0;case"o":return getISO8601Year(me);case"Y":return me.getFullYear();case"y":return(me.getFullYear()+"").replace(/^.+(..)$/,"$1");case"a":return me.getHours()<12?"am":"pm";case"A":return me.getHours()<12?"AM":"PM";case"B":return Math.floor(1e3*((me.getUTCHours()+1)%24+me.getUTCMinutes()/60+me.getUTCSeconds()/3600)/24);case"g":return me.getHours()%12!=0?me.getHours()%12:12;case"G":return me.getHours();case"h":return("0"+(me.getHours()%12!=0?me.getHours()%12:12)).replace(/^.+(..)$/,"$1");case"H":return("0"+me.getHours()).replace(/^.+(..)$/,"$1");case"i":return("0"+me.getMinutes()).replace(/^.+(..)$/,"$1");case"s":return("0"+me.getSeconds()).replace(/^.+(..)$/,"$1");case"u":return me.getMilliseconds();case"U":return me.getTime()/1e3}})}}(),Twig.lib.strip_tags=function(input,allowed){allowed=(((allowed||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var tags=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,commentsAndPhpTags=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return input.replace(commentsAndPhpTags,"").replace(tags,function($0,$1){return allowed.indexOf("<"+$1.toLowerCase()+">")>-1?$0:""})},Twig.lib.parseISO8601Date=function(s){var re=/(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(\.\d+)?(Z|([+-])(\d\d):(\d\d))/,d=[];if(d=s.match(re),!d)throw"Couldn't parse ISO 8601 date string '"+s+"'";var a=[1,2,3,4,5,6,10,11];for(var i in a)d[a[i]]=parseInt(d[a[i]],10);d[7]=parseFloat(d[7]);var ms=Date.UTC(d[1],d[2]-1,d[3],d[4],d[5],d[6]);if(d[7]>0&&(ms+=Math.round(1e3*d[7])),"Z"!=d[8]&&d[10]){var offset=60*d[10]*60*1e3;d[11]&&(offset+=60*d[11]*1e3),"-"==d[9]?ms-=offset:ms+=offset}return new Date(ms)},Twig.lib.strtotime=function(str,now){var i,l,match,s,parse="";if(str=str.replace(/\s{2,}|^\s|\s$/g," "),str=str.replace(/[\t\r\n]/g,""),"now"===str)return null===now||isNaN(now)?(new Date).getTime()/1e3|0:0|now;if(!isNaN(parse=Date.parse(str)))return parse/1e3|0;now=now?new Date(1e3*now):new Date;var upperCaseStr=str;str=str.toLowerCase();var __is={day:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},mon:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},process=function(m){var ago=m[2]&&"ago"===m[2],num=(num="last"===m[0]?-1:1)*(ago?-1:1);switch(m[0]){case"last":case"next":switch(m[1].substring(0,3)){case"yea":now.setFullYear(now.getFullYear()+num);break;case"wee":now.setDate(now.getDate()+7*num);break;case"day":now.setDate(now.getDate()+num);break;case"hou":now.setHours(now.getHours()+num);break;case"min":now.setMinutes(now.getMinutes()+num);break;case"sec":now.setSeconds(now.getSeconds()+num);break;case"mon":if("month"===m[1]){now.setMonth(now.getMonth()+num);break}default:var day=__is.day[m[1].substring(0,3)];if("undefined"!=typeof day){var diff=day-now.getDay();0===diff?diff=7*num:diff>0?"last"===m[0]&&(diff-=7):"next"===m[0]&&(diff+=7),now.setDate(now.getDate()+diff),now.setHours(0,0,0,0)}}break;default:if(!/\d+/.test(m[0]))return!1;switch(num*=parseInt(m[0],10),m[1].substring(0,3)){case"yea":now.setFullYear(now.getFullYear()+num);break;case"mon":now.setMonth(now.getMonth()+num);break;case"wee":now.setDate(now.getDate()+7*num);break;case"day":now.setDate(now.getDate()+num);break;case"hou":now.setHours(now.getHours()+num);break;case"min":now.setMinutes(now.getMinutes()+num);break;case"sec":now.setSeconds(now.getSeconds()+num)}}return!0};if(match=str.match(/^(\d{2,4}-\d{2}-\d{2})(?:\s(\d{1,2}:\d{2}(:\d{2})?)?(?:\.(\d+))?)?$/),null!==match)return match[2]?match[3]||(match[2]+=":00"):match[2]="00:00:00",s=match[1].split(/-/g),s[1]=__is.mon[s[1]-1]||s[1],s[0]=+s[0],s[0]=s[0]>=0&&s[0]<=69?"20"+(s[0]<10?"0"+s[0]:s[0]+""):s[0]>=70&&s[0]<=99?"19"+s[0]:s[0]+"",parseInt(this.strtotime(s[2]+" "+s[1]+" "+s[0]+" "+match[2])+(match[4]?match[4]/1e3:""),10);var regex="([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday)|(last|next)\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday))(\\sago)?";if(match=str.match(new RegExp(regex,"gi")),null===match){try{if(num=Twig.lib.parseISO8601Date(upperCaseStr),num)return num/1e3|0}catch(err){return!1}return!1}for(i=0,l=match.length;l>i;i++)if(!process(match[i].split(" ")))return!1;return now.getTime()/1e3|0},Twig.lib.is=function(type,obj){var clas=Object.prototype.toString.call(obj).slice(8,-1);return void 0!==obj&&null!==obj&&clas===type},Twig.lib.copy=function(src){var key,target={};for(key in src)target[key]=src[key];return target},Twig.lib.replaceAll=function(string,search,replace){return string.split(search).join(replace)},Twig}(Twig||{}),Twig=function(Twig){"use strict";for(Twig.logic={},Twig.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless"},Twig.logic.definitions=[{type:Twig.logic.type.if_,regex:/^if\s+([^\s].+)$/,next:[Twig.logic.type.else_,Twig.logic.type.elseif,Twig.logic.type.endif],open:!0,compile:function(token){var expression=token.match[1];return token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,delete token.match,token},parse:function(token,context,chain){var output="",result=Twig.expression.parse.apply(this,[token.stack,context]);return chain=!0,result&&(chain=!1,output=Twig.parse.apply(this,[token.output,context])),{chain:chain,output:output}}},{type:Twig.logic.type.elseif,regex:/^elseif\s+([^\s].*)$/,next:[Twig.logic.type.else_,Twig.logic.type.elseif,Twig.logic.type.endif],open:!1,compile:function(token){var expression=token.match[1];return token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,delete token.match,token},parse:function(token,context,chain){var output="";return chain&&Twig.expression.parse.apply(this,[token.stack,context])===!0&&(chain=!1,output=Twig.parse.apply(this,[token.output,context])),{chain:chain,output:output}}},{type:Twig.logic.type.else_,regex:/^else$/,next:[Twig.logic.type.endif,Twig.logic.type.endfor],open:!1,parse:function(token,context,chain){var output="";return chain&&(output=Twig.parse.apply(this,[token.output,context])),{chain:chain,output:output}}},{type:Twig.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:Twig.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([^\s].*?)(?:\s+if\s+([^\s].*))?$/,next:[Twig.logic.type.else_,Twig.logic.type.endfor],open:!0,compile:function(token){var key_value=token.match[1],expression=token.match[2],conditional=token.match[3],kv_split=null;if(token.key_var=null,token.value_var=null,key_value.indexOf(",")>=0){if(kv_split=key_value.split(","),2!==kv_split.length)throw new Twig.Error("Invalid expression in for loop: "+key_value);token.key_var=kv_split[0].trim(),token.value_var=kv_split[1].trim()}else token.value_var=key_value;return token.expression=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,conditional&&(token.conditional=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:conditional}]).stack),delete token.match,token},parse:function(token,context,continue_chain){var len,keyset,result=Twig.expression.parse.apply(this,[token.expression,context]),output=[],index=0,that=this,conditional=token.conditional,buildLoop=function(index,len){var isConditional=void 0!==conditional;return{index:index+1,index0:index,revindex:isConditional?void 0:len-index,revindex0:isConditional?void 0:len-index-1,first:0===index,last:isConditional?void 0:index===len-1,length:isConditional?void 0:len,parent:context}},loop=function(key,value){var inner_context=Twig.lib.copy(context);inner_context[token.value_var]=value,token.key_var&&(inner_context[token.key_var]=key),inner_context.loop=buildLoop(index,len),(void 0===conditional||Twig.expression.parse.apply(that,[conditional,inner_context]))&&(output.push(Twig.parse.apply(that,[token.output,inner_context])),index+=1)};return result instanceof Array?(len=result.length,Twig.forEach(result,function(value){var key=index;loop(key,value)})):result instanceof Object&&(keyset=void 0!==result._keys?result._keys:Object.keys(result),len=keyset.length,Twig.forEach(keyset,function(key){"_keys"!==key&&loop(key,result[key])})),continue_chain=0===output.length,{chain:continue_chain,output:output.join("")}}},{type:Twig.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:Twig.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*(.+)$/,next:[],open:!0,compile:function(token){var key=token.match[1].trim(),expression=token.match[2],expression_stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack;return token.key=key,token.expression=expression_stack,delete token.match,token},parse:function(token,context,continue_chain){var value=Twig.expression.parse.apply(this,[token.expression,context]),key=token.key;return this.context[key]=value,context[key]=value,{chain:continue_chain,context:context}}},{type:Twig.logic.type.filter,regex:/^filter\s+(.+)$/,next:[Twig.logic.type.endfilter],open:!0,compile:function(token){var expression="|"+token.match[1].trim();return token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,delete token.match,token},parse:function(token,context,chain){var unfiltered=Twig.parse.apply(this,[token.output,context]),stack=[{type:Twig.expression.type.string,value:unfiltered}].concat(token.stack),output=Twig.expression.parse.apply(this,[stack,context]);return{chain:chain,output:output}}},{type:Twig.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:Twig.logic.type.block,regex:/^block\s+([a-zA-Z0-9_]+)$/,next:[Twig.logic.type.endblock],open:!0,compile:function(token){return token.block=token.match[1].trim(),delete token.match,token},parse:function(token,context,chain){var block_output="",output="",hasParent=this.blocks[token.block]&&this.blocks[token.block].indexOf(Twig.placeholders.parent)>-1;return(void 0===this.blocks[token.block]||hasParent)&&(block_output=Twig.expression.parse.apply(this,[{type:Twig.expression.type.string,value:Twig.parse.apply(this,[token.output,context])},context]),hasParent?this.blocks[token.block]=this.blocks[token.block].replace(Twig.placeholders.parent,block_output):this.blocks[token.block]=block_output),output=this.child.blocks[token.block]?this.child.blocks[token.block]:this.blocks[token.block],{chain:chain,output:output}}},{type:Twig.logic.type.endblock,regex:/^endblock(?:\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:Twig.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(token){var expression=token.match[1].trim();return delete token.match,token.stack=Twig.expression.compile.apply(this,[{
type:Twig.expression.type.expression,value:expression}]).stack,token},parse:function(token,context,chain){var file=Twig.expression.parse.apply(this,[token.stack,context]);return this.extend=file,{chain:chain,output:""}}},{type:Twig.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(token){var expression=token.match[1].trim();return delete token.match,token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,token},parse:function(token,context,chain){var file=Twig.expression.parse.apply(this,[token.stack,context]);return this.importBlocks(file),{chain:chain,output:""}}},{type:Twig.logic.type.include,regex:/^include\s+(ignore missing\s+)?(.+?)\s*(?:with\s+(.+?))?\s*(only)?$/,next:[],open:!0,compile:function(token){var match=token.match,includeMissing=void 0!==match[1],expression=match[2].trim(),withContext=match[3],only=void 0!==match[4]&&match[4].length;return delete token.match,token.only=only,token.includeMissing=includeMissing,token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,void 0!==withContext&&(token.withStack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:withContext.trim()}]).stack),token},parse:function(token,context,chain){var withContext,i,template,innerContext={};if(!token.only)for(i in context)context.hasOwnProperty(i)&&(innerContext[i]=context[i]);if(void 0!==token.withStack){withContext=Twig.expression.parse.apply(this,[token.withStack,context]);for(i in withContext)withContext.hasOwnProperty(i)&&(innerContext[i]=withContext[i])}var file=Twig.expression.parse.apply(this,[token.stack,innerContext]);return template=this.importFile(file),{chain:chain,output:template.render(innerContext)}}},{type:Twig.logic.type.spaceless,regex:/^spaceless$/,next:[Twig.logic.type.endspaceless],open:!0,parse:function(token,context,chain){var unfiltered=Twig.parse.apply(this,[token.output,context]),rBetweenTagSpaces=/>\s+</g,output=unfiltered.replace(rBetweenTagSpaces,"><").trim();return{chain:chain,output:output}}},{type:Twig.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1}],Twig.logic.handler={},Twig.logic.extendType=function(type,value){value=value||"Twig.logic.type"+type,Twig.logic.type[type]=value},Twig.logic.extend=function(definition){if(!definition.type)throw new Twig.Error("Unable to extend logic definition. No type provided for "+definition);if(Twig.logic.type[definition.type])throw new Twig.Error("Unable to extend logic definitions. Type "+definition.type+" is already defined.");Twig.logic.extendType(definition.type),Twig.logic.handler[definition.type]=definition};Twig.logic.definitions.length>0;)Twig.logic.extend(Twig.logic.definitions.shift());return Twig.logic.compile=function(raw_token){var expression=raw_token.value.trim(),token=Twig.logic.tokenize.apply(this,[expression]),token_template=Twig.logic.handler[token.type];return token_template.compile&&(token=token_template.compile.apply(this,[token]),Twig.log.trace("Twig.logic.compile: ","Compiled logic token to ",token)),token},Twig.logic.tokenize=function(expression){var token={},token_template_type=null,token_type=null,token_regex=null,regex_array=null,regex=null,match=null;expression=expression.trim();for(token_template_type in Twig.logic.handler)if(Twig.logic.handler.hasOwnProperty(token_template_type))for(token_type=Twig.logic.handler[token_template_type].type,token_regex=Twig.logic.handler[token_template_type].regex,regex_array=[],token_regex instanceof Array?regex_array=token_regex:regex_array.push(token_regex);regex_array.length>0;)if(regex=regex_array.shift(),match=regex.exec(expression.trim()),null!==match)return token.type=token_type,token.match=match,Twig.log.trace("Twig.logic.tokenize: ","Matched a ",token_type," regular expression of ",match),token;throw new Twig.Error("Unable to parse '"+expression.trim()+"'")},Twig.logic.parse=function(token,context,chain){var token_template,output="";return context=context||{},Twig.log.debug("Twig.logic.parse: ","Parsing logic token ",token),token_template=Twig.logic.handler[token.type],token_template.parse&&(output=token_template.parse.apply(this,[token,context,chain])),output},Twig}(Twig||{}),Twig=function(Twig){"use strict";Twig.expression={},Twig.expression.reservedWords=["true","false","null"],Twig.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",test:"Twig.expression.type.test"},Twig.expression.set={operations:[Twig.expression.type.filter,Twig.expression.type.operator.unary,Twig.expression.type.operator.binary,Twig.expression.type.array.end,Twig.expression.type.object.end,Twig.expression.type.parameter.end,Twig.expression.type.comma,Twig.expression.type.test],expressions:[Twig.expression.type._function,Twig.expression.type.bool,Twig.expression.type.string,Twig.expression.type.variable,Twig.expression.type.number,Twig.expression.type._null,Twig.expression.type.parameter.start,Twig.expression.type.array.start,Twig.expression.type.object.start]},Twig.expression.set.operations_extended=Twig.expression.set.operations.concat([Twig.expression.type.key.period,Twig.expression.type.key.brackets]),Twig.expression.fn={compile:{push:function(token,stack,output){output.push(token)},push_both:function(token,stack,output){output.push(token),stack.push(token)}},parse:{push:function(token,stack,context){stack.push(token)},push_value:function(token,stack,context){stack.push(token.value)}}},Twig.expression.definitions=[{type:Twig.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*)/,next:Twig.expression.set.operations.concat([Twig.expression.type.parameter.start]),compile:function(token,stack,output){token.filter=token.match[2],token.modifier=token.match[1],delete token.match,delete token.value,output.push(token)},parse:function(token,stack,context){var value=stack.pop(),params=token.params&&Twig.expression.parse.apply(this,[token.params,context]),result=Twig.test(token.filter,value,params);stack.push("not"==token.modifier?!result:result)}},{type:Twig.expression.type.comma,regex:/^,/,next:Twig.expression.set.expressions.concat([Twig.expression.type.array.end,Twig.expression.type.object.end]),compile:function(token,stack,output){var stack_token,i=stack.length-1;for(delete token.match,delete token.value;i>=0;i--){if(stack_token=stack.pop(),stack_token.type===Twig.expression.type.object.start||stack_token.type===Twig.expression.type.parameter.start||stack_token.type===Twig.expression.type.array.start){stack.push(stack_token);break}output.push(stack_token)}output.push(token)}},{type:Twig.expression.type.operator.binary,regex:/(^[\+\-~%\?\:]|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^and\s+|^or\s+|^in\s+|^not in\s+|^\.\.)/,next:Twig.expression.set.expressions.concat([Twig.expression.type.operator.unary]),compile:function(token,stack,output){delete token.match,token.value=token.value.trim();var value=token.value,operator=Twig.expression.operator.lookup(value,token);for(Twig.log.trace("Twig.expression.compile: ","Operator: ",operator," from ",value);stack.length>0&&(stack[stack.length-1].type==Twig.expression.type.operator.unary||stack[stack.length-1].type==Twig.expression.type.operator.binary)&&(operator.associativity===Twig.expression.operator.leftToRight&&operator.precidence>=stack[stack.length-1].precidence||operator.associativity===Twig.expression.operator.rightToLeft&&operator.precidence>stack[stack.length-1].precidence);){var temp=stack.pop();output.push(temp)}if(":"===value){if(!stack[stack.length-1]||"?"!==stack[stack.length-1].value){var key_token=output.pop();if(key_token.type!==Twig.expression.type.string&&key_token.type!==Twig.expression.type.variable&&key_token.type!==Twig.expression.type.number)throw new Twig.Error("Unexpected value before ':' of "+key_token.type+" = "+key_token.value);return token.key=key_token.value,void output.push(token)}}else stack.push(operator)},parse:function(token,stack,context){token.key?stack.push(token):Twig.expression.operator.parse(token.value,stack)}},{type:Twig.expression.type.operator.unary,regex:/(^not\s+)/,next:Twig.expression.set.expressions,compile:function(token,stack,output){delete token.match,token.value=token.value.trim();var value=token.value,operator=Twig.expression.operator.lookup(value,token);for(Twig.log.trace("Twig.expression.compile: ","Operator: ",operator," from ",value);stack.length>0&&(stack[stack.length-1].type==Twig.expression.type.operator.unary||stack[stack.length-1].type==Twig.expression.type.operator.binary)&&(operator.associativity===Twig.expression.operator.leftToRight&&operator.precidence>=stack[stack.length-1].precidence||operator.associativity===Twig.expression.operator.rightToLeft&&operator.precidence>stack[stack.length-1].precidence);){var temp=stack.pop();output.push(temp)}stack.push(operator)},parse:function(token,stack,context){Twig.expression.operator.parse(token.value,stack)}},{type:Twig.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2.)*?\1/,next:Twig.expression.set.operations,compile:function(token,stack,output){var value=token.value;delete token.match,value='"'===value.substring(0,1)?value.replace('\\"','"'):value.replace("\\'","'"),token.value=value.substring(1,value.length-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),Twig.log.trace("Twig.expression.compile: ","String value: ",token.value),output.push(token)},parse:Twig.expression.fn.parse.push_value},{type:Twig.expression.type.parameter.start,regex:/^\(/,next:Twig.expression.set.expressions.concat([Twig.expression.type.parameter.end]),compile:Twig.expression.fn.compile.push_both,parse:Twig.expression.fn.parse.push},{type:Twig.expression.type.parameter.end,regex:/^\)/,next:Twig.expression.set.operations_extended,compile:function(token,stack,output){var stack_token,end_token=token;for(stack_token=stack.pop();stack.length>0&&stack_token.type!=Twig.expression.type.parameter.start;)output.push(stack_token),stack_token=stack.pop();for(var param_stack=[];token.type!==Twig.expression.type.parameter.start;)param_stack.unshift(token),token=output.pop();param_stack.unshift(token);token=output[output.length-1],void 0===token||token.type!==Twig.expression.type._function&&token.type!==Twig.expression.type.filter&&token.type!==Twig.expression.type.test&&token.type!==Twig.expression.type.key.brackets&&token.type!==Twig.expression.type.key.period?(end_token.expression=!0,param_stack.pop(),param_stack.shift(),end_token.params=param_stack,output.push(end_token)):(end_token.expression=!1,token.params=param_stack)},parse:function(token,stack,context){var new_array=[],array_ended=!1,value=null;if(token.expression)value=Twig.expression.parse.apply(this,[token.params,context]),stack.push(value);else{for(;stack.length>0;){if(value=stack.pop(),value&&value.type&&value.type==Twig.expression.type.parameter.start){array_ended=!0;break}new_array.unshift(value)}if(!array_ended)throw new Twig.Error("Expected end of parameter set.");stack.push(new_array)}}},{type:Twig.expression.type.array.start,regex:/^\[/,next:Twig.expression.set.expressions.concat([Twig.expression.type.array.end]),compile:Twig.expression.fn.compile.push_both,parse:Twig.expression.fn.parse.push},{type:Twig.expression.type.array.end,regex:/^\]/,next:Twig.expression.set.operations_extended,compile:function(token,stack,output){for(var stack_token,i=stack.length-1;i>=0&&(stack_token=stack.pop(),stack_token.type!==Twig.expression.type.array.start);i--)output.push(stack_token);output.push(token)},parse:function(token,stack,context){for(var new_array=[],array_ended=!1,value=null;stack.length>0;){if(value=stack.pop(),value.type&&value.type==Twig.expression.type.array.start){array_ended=!0;break}new_array.unshift(value)}if(!array_ended)throw new Twig.Error("Expected end of array.");stack.push(new_array)}},{type:Twig.expression.type.object.start,regex:/^\{/,next:Twig.expression.set.expressions.concat([Twig.expression.type.object.end]),compile:Twig.expression.fn.compile.push_both,parse:Twig.expression.fn.parse.push},{type:Twig.expression.type.object.end,regex:/^\}/,next:Twig.expression.set.operations_extended,compile:function(token,stack,output){for(var stack_token,i=stack.length-1;i>=0&&(stack_token=stack.pop(),!stack_token||stack_token.type!==Twig.expression.type.object.start);i--)output.push(stack_token);output.push(token)},parse:function(end_token,stack,context){for(var new_object={},object_ended=!1,token=null,has_value=!1,value=null;stack.length>0;){if(token=stack.pop(),token&&token.type&&token.type===Twig.expression.type.object.start){object_ended=!0;break}if(token&&token.type&&(token.type===Twig.expression.type.operator.binary||token.type===Twig.expression.type.operator.unary)&&token.key){if(!has_value)throw new Twig.Error("Missing value for key '"+token.key+"' in object definition.");new_object[token.key]=value,void 0===new_object._keys&&(new_object._keys=[]),new_object._keys.unshift(token.key),value=null,has_value=!1}else has_value=!0,value=token}if(!object_ended)throw new Twig.Error("Unexpected end of object.");stack.push(new_object)}},{type:Twig.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_\-]*)/,next:Twig.expression.set.operations_extended.concat([Twig.expression.type.parameter.start]),compile:function(token,stack,output){token.value=token.match[1],output.push(token)},parse:function(token,stack,context){var input=stack.pop(),params=token.params&&Twig.expression.parse.apply(this,[token.params,context]);stack.push(Twig.filter.apply(this,[token.value,input,params]))}},{type:Twig.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/,next:Twig.expression.type.parameter.start,transform:function(match,tokens){return"("},compile:function(token,stack,output){var fn=token.match[1];token.fn=fn,delete token.match,delete token.value,output.push(token)},parse:function(token,stack,context){var value,params=token.params&&Twig.expression.parse.apply(this,[token.params,context]),fn=token.fn;if(Twig.functions[fn])value=Twig.functions[fn].apply(this,params);else{if("function"!=typeof context[fn])throw new Twig.Error(fn+" function does not exist and is not defined in the context");value=context[fn].apply(context,params)}stack.push(value)}},{type:Twig.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:Twig.expression.set.operations_extended.concat([Twig.expression.type.parameter.start]),compile:Twig.expression.fn.compile.push,validate:function(match,tokens){return Twig.indexOf(Twig.expression.reservedWords,match[0])<0},parse:function(token,stack,context){var value=Twig.expression.resolve(context[token.value],context);stack.push(value)}},{type:Twig.expression.type.key.period,regex:/^\.([a-zA-Z0-9_]+)/,next:Twig.expression.set.operations_extended.concat([Twig.expression.type.parameter.start]),compile:function(token,stack,output){token.key=token.match[1],delete token.match,delete token.value,output.push(token)},parse:function(token,stack,context){var value,params=token.params&&Twig.expression.parse.apply(this,[token.params,context]),key=token.key,object=stack.pop();if(null===object||void 0===object){if(this.options.strict_variables)throw new Twig.Error("Can't access a key "+key+" on an null or undefined object.");return null}var capitalize=function(value){return value.substr(0,1).toUpperCase()+value.substr(1)};value="object"==typeof object&&key in object?object[key]:void 0!==object["get"+capitalize(key)]?object["get"+capitalize(key)]:void 0!==object["is"+capitalize(key)]?object["is"+capitalize(key)]:null,stack.push(Twig.expression.resolve(value,object,params))}},{type:Twig.expression.type.key.brackets,regex:/^\[([^\]]*)\]/,next:Twig.expression.set.operations_extended.concat([Twig.expression.type.parameter.start]),compile:function(token,stack,output){var match=token.match[1];delete token.value,delete token.match,token.stack=Twig.expression.compile({value:match}).stack,output.push(token)},parse:function(token,stack,context){var value,params=token.params&&Twig.expression.parse.apply(this,[token.params,context]),key=Twig.expression.parse.apply(this,[token.stack,context]),object=stack.pop();if(null===object||void 0===object){if(this.options.strict_variables)throw new Twig.Error("Can't access a key "+key+" on an null or undefined object.");return null}value="object"==typeof object&&key in object?object[key]:null,stack.push(Twig.expression.resolve(value,object,params))}},{type:Twig.expression.type._null,regex:/^null/,next:Twig.expression.set.operations,compile:function(token,stack,output){delete token.match,token.value=null,output.push(token)},parse:Twig.expression.fn.parse.push_value},{type:Twig.expression.type.number,regex:/^\-?\d+(\.\d+)?/,next:Twig.expression.set.operations,compile:function(token,stack,output){token.value=Number(token.value),output.push(token)},parse:Twig.expression.fn.parse.push_value},{type:Twig.expression.type.bool,regex:/^(true|false)/,next:Twig.expression.set.operations,compile:function(token,stack,output){token.value="true"==token.match[0],delete token.match,output.push(token)},parse:Twig.expression.fn.parse.push_value}],Twig.expression.resolve=function(value,context,params){return"function"==typeof value?value.apply(context,params||[]):value},Twig.expression.handler={},Twig.expression.extendType=function(type){Twig.expression.type[type]="Twig.expression.type."+type},Twig.expression.extend=function(definition){if(!definition.type)throw new Twig.Error("Unable to extend logic definition. No type provided for "+definition);Twig.expression.handler[definition.type]=definition};for(;Twig.expression.definitions.length>0;)Twig.expression.extend(Twig.expression.definitions.shift());return Twig.expression.tokenize=function(expression){var type,regex,regex_array,token_next,match_found,match_function,tokens=[],exp_offset=0,next=null,invalid_matches=[];for(match_function=function(){var match=Array.prototype.slice.apply(arguments);match.pop(),match.pop();return Twig.log.trace("Twig.expression.tokenize","Matched a ",type," regular expression of ",match),next&&Twig.indexOf(next,type)<0?(invalid_matches.push(type+" cannot follow a "+tokens[tokens.length-1].type+" at template:"+exp_offset+" near '"+match[0].substring(0,20)+"...'"),match[0]):Twig.expression.handler[type].validate&&!Twig.expression.handler[type].validate(match,tokens)?match[0]:(invalid_matches=[],tokens.push({type:type,value:match[0],match:match}),match_found=!0,next=token_next,exp_offset+=match[0].length,Twig.expression.handler[type].transform?Twig.expression.handler[type].transform(match,tokens):"")},Twig.log.debug("Twig.expression.tokenize","Tokenizing expression ",expression);expression.length>0;){expression=expression.trim();for(type in Twig.expression.handler)if(Twig.expression.handler.hasOwnProperty(type)){for(token_next=Twig.expression.handler[type].next,regex=Twig.expression.handler[type].regex,regex_array=regex instanceof Array?regex:[regex],match_found=!1;regex_array.length>0;)regex=regex_array.pop(),expression=expression.replace(regex,match_function);if(match_found)break}if(!match_found)throw new Twig.Error(invalid_matches.length>0?invalid_matches.join(" OR "):"Unable to parse '"+expression+"' at template position"+exp_offset)}return Twig.log.trace("Twig.expression.tokenize","Tokenized to ",tokens),tokens},Twig.expression.compile=function(raw_token){var expression=raw_token.value,tokens=Twig.expression.tokenize(expression),token=null,output=[],stack=[],token_template=null;for(Twig.log.trace("Twig.expression.compile: ","Compiling ",expression);tokens.length>0;)token=tokens.shift(),token_template=Twig.expression.handler[token.type],Twig.log.trace("Twig.expression.compile: ","Compiling ",token),token_template.compile&&token_template.compile(token,stack,output),Twig.log.trace("Twig.expression.compile: ","Stack is",stack),Twig.log.trace("Twig.expression.compile: ","Output is",output);for(;stack.length>0;)output.push(stack.pop());return Twig.log.trace("Twig.expression.compile: ","Final output is",output),raw_token.stack=output,delete raw_token.value,raw_token},Twig.expression.parse=function(tokens,context){var that=this;tokens instanceof Array||(tokens=[tokens]);var stack=[],token_template=null;return Twig.forEach(tokens,function(token){token_template=Twig.expression.handler[token.type],token_template.parse&&token_template.parse.apply(that,[token,stack,context])}),stack.pop()},Twig}(Twig||{}),Twig=function(Twig){"use strict";Twig.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var containment=function(a,b){if(void 0!==b.indexOf)return a===b||""!==a&&b.indexOf(a)>-1;var el;for(el in b)if(b.hasOwnProperty(el)&&b[el]===a)return!0;return!1};return Twig.expression.operator.lookup=function(operator,token){switch(operator){case"..":case"not in":case"in":token.precidence=20,token.associativity=Twig.expression.operator.leftToRight;break;case",":token.precidence=18,token.associativity=Twig.expression.operator.leftToRight;break;case"?":case":":token.precidence=16,token.associativity=Twig.expression.operator.rightToLeft;break;case"or":token.precidence=14,token.associativity=Twig.expression.operator.leftToRight;break;case"and":token.precidence=13,token.associativity=Twig.expression.operator.leftToRight;break;case"==":case"!=":token.precidence=9,token.associativity=Twig.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":token.precidence=8,token.associativity=Twig.expression.operator.leftToRight;break;case"~":case"+":case"-":token.precidence=6,token.associativity=Twig.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":token.precidence=5,token.associativity=Twig.expression.operator.leftToRight;break;case"not":token.precidence=3,token.associativity=Twig.expression.operator.rightToLeft;break;default:throw new Twig.Error(operator+" is an unknown operator.")}return token.operator=operator,token},Twig.expression.operator.parse=function(operator,stack){Twig.log.trace("Twig.expression.operator.parse: ","Handling ",operator);var a,b,c;switch(operator){case":":break;case"?":c=stack.pop(),b=stack.pop(),a=stack.pop(),stack.push(a?b:c);break;case"+":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a+b);break;case"-":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a-b);break;case"*":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a*b);break;case"/":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a/b);break;case"//":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(parseInt(a/b));break;case"%":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a%b);break;case"~":b=stack.pop(),a=stack.pop(),stack.push((void 0!==a?a.toString():"")+(void 0!==b?b.toString():""));break;case"not":case"!":stack.push(!stack.pop());break;case"<":b=stack.pop(),a=stack.pop(),stack.push(b>a);break;case"<=":b=stack.pop(),a=stack.pop(),stack.push(b>=a);break;case">":b=stack.pop(),a=stack.pop(),stack.push(a>b);break;case">=":b=stack.pop(),a=stack.pop(),stack.push(a>=b);break;case"===":b=stack.pop(),a=stack.pop(),stack.push(a===b);break;case"==":b=stack.pop(),a=stack.pop(),stack.push(a==b);break;case"!==":b=stack.pop(),a=stack.pop(),stack.push(a!==b);break;case"!=":b=stack.pop(),a=stack.pop(),stack.push(a!=b);break;case"or":b=stack.pop(),a=stack.pop(),stack.push(a||b);break;case"and":b=stack.pop(),a=stack.pop(),stack.push(a&&b);break;case"**":b=stack.pop(),a=stack.pop(),stack.push(Math.pow(a,b));break;case"not in":b=stack.pop(),a=stack.pop(),stack.push(!containment(a,b));break;case"in":b=stack.pop(),a=stack.pop(),stack.push(containment(a,b));break;case"..":b=stack.pop(),a=stack.pop(),stack.push(Twig.functions.range(a,b));break;default:throw new Twig.Error(operator+" is an unknown operator.")}},Twig}(Twig||{}),Twig=function(Twig){function is(type,obj){var clas=Object.prototype.toString.call(obj).slice(8,-1);return void 0!==obj&&null!==obj&&clas===type}return Twig.filters={upper:function(value){return"string"!=typeof value?value:value.toUpperCase()},lower:function(value){return"string"!=typeof value?value:value.toLowerCase()},capitalize:function(value){return"string"!=typeof value?value:value.substr(0,1).toUpperCase()+value.substr(1)},title:function(value){return"string"!=typeof value?value:value.replace(/(^|\s)([a-z])/g,function(m,p1,p2){return p1+p2.toUpperCase()})},length:function(value){return value instanceof Array||"string"==typeof value?value.length:value instanceof Object?void 0===value._keys?Object.keys(value).length:value._keys.length:0},reverse:function(value){if(is("Array",value))return value.reverse();if(is("String",value))return value.split("").reverse().join("");if(value instanceof Object){var keys=value._keys||Object.keys(value).reverse();return value._keys=keys,value}},sort:function(value){if(is("Array",value))return value.sort();if(value instanceof Object){delete value._keys;var keys=Object.keys(value),sorted_keys=keys.sort(function(a,b){return value[a]>value[b]});return value._keys=sorted_keys,value}},keys:function(value){if(void 0!==value&&null!==value){var keyset=value._keys||Object.keys(value),output=[];return Twig.forEach(keyset,function(key){"_keys"!==key&&value.hasOwnProperty(key)&&output.push(key)}),output}},url_encode:function(value){return void 0!==value&&null!==value?encodeURIComponent(value):void 0},join:function(value,params){if(void 0!==value&&null!==value){var join_str="",output=[],keyset=null;return params&&params[0]&&(join_str=params[0]),value instanceof Array?output=value:(keyset=value._keys||Object.keys(value),Twig.forEach(keyset,function(key){"_keys"!==key&&value.hasOwnProperty(key)&&output.push(value[key])})),output.join(join_str)}},"default":function(value,params){if(void 0===params||1!==params.length)throw new Twig.Error("default filter expects one argument");return void 0===value||null===value||""===value?params[0]:value},json_encode:function(value){return value&&value.hasOwnProperty("_keys")&&delete value._keys,void 0===value||null===value?"null":JSON.stringify(value)},merge:function(value,params){var obj=[],arr_index=0,keyset=[];if(value instanceof Array?Twig.forEach(params,function(param){param instanceof Array||(obj={})}):obj={},obj instanceof Array||(obj._keys=[]),value instanceof Array?Twig.forEach(value,function(val){obj._keys&&obj._keys.push(arr_index),obj[arr_index]=val,arr_index++}):(keyset=value._keys||Object.keys(value),Twig.forEach(keyset,function(key){obj[key]=value[key],obj._keys.push(key);var int_key=parseInt(key,10);!isNaN(int_key)&&int_key>=arr_index&&(arr_index=int_key+1)})),Twig.forEach(params,function(param){param instanceof Array?Twig.forEach(param,function(val){obj._keys&&obj._keys.push(arr_index),obj[arr_index]=val,arr_index++}):(keyset=param._keys||Object.keys(param),Twig.forEach(keyset,function(key){obj[key]||obj._keys.push(key),obj[key]=param[key];var int_key=parseInt(key,10);!isNaN(int_key)&&int_key>=arr_index&&(arr_index=int_key+1)}))}),0===params.length)throw new Twig.Error("Filter merge expects at least one parameter");return obj},date:function(value,params){if(void 0!==value&&null!==value){var date=Twig.functions.date(value);return Twig.lib.formatDate(date,params[0])}},date_modify:function(value,params){if(void 0!==value&&null!==value){if(void 0===params||1!==params.length)throw new Twig.Error("date_modify filter expects 1 argument");var time,modifyText=params[0];return Twig.lib.is("Date",value)&&(time=Twig.lib.strtotime(modifyText,value.getTime()/1e3)),Twig.lib.is("String",value)&&(time=Twig.lib.strtotime(modifyText,Twig.lib.strtotime(value))),Twig.lib.is("Number",value)&&(time=Twig.lib.strtotime(modifyText,value)),new Date(1e3*time)}},replace:function(value,params){if(void 0!==value&&null!==value){var tag,pairs=params[0];for(tag in pairs)pairs.hasOwnProperty(tag)&&"_keys"!==tag&&(value=Twig.lib.replaceAll(value,tag,pairs[tag]));return value}},format:function(value,params){return void 0!==value&&null!==value?Twig.lib.vsprintf(value,params):void 0},striptags:function(value){return void 0!==value&&null!==value?Twig.lib.strip_tags(value):void 0},escape:function(value){return void 0!==value&&null!==value?value.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):void 0},e:function(value){return Twig.filters.escape(value)},nl2br:function(value){if(void 0!==value&&null!==value){var linebreak_tag="BACKSLASH_n_replace",br="<br />"+linebreak_tag;return value=Twig.filters.escape(value).replace(/\r\n/g,br).replace(/\r/g,br).replace(/\n/g,br),Twig.lib.replaceAll(value,linebreak_tag,"\n")}},number_format:function(value,params){var number=value,decimals=params&&params[0]?params[0]:void 0,dec=params&&void 0!==params[1]?params[1]:".",sep=params&&void 0!==params[2]?params[2]:",";number=(number+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+number)?+number:0,prec=isFinite(+decimals)?Math.abs(decimals):0,s="",toFixedFix=function(n,prec){var k=Math.pow(10,prec);return""+Math.round(n*k)/k};return s=(prec?toFixedFix(n,prec):""+Math.round(n)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep)),(s[1]||"").length<prec&&(s[1]=s[1]||"",s[1]+=new Array(prec-s[1].length+1).join("0")),s.join(dec)},trim:function(value,params){if(void 0!==value&&null!==value){var whitespace,str=Twig.filters.escape(""+value);whitespace=params&&params[0]?""+params[0]:" \n\r	\f\u2028\u2029";for(var i=0;i<str.length;i++)if(-1===whitespace.indexOf(str.charAt(i))){str=str.substring(i);break}for(i=str.length-1;i>=0;i--)if(-1===whitespace.indexOf(str.charAt(i))){str=str.substring(0,i+1);break}return-1===whitespace.indexOf(str.charAt(0))?str:""}},slice:function(value,params){if(void 0!==value&&null!==value){if(void 0===params||params.length<1)throw new Twig.Error("slice filter expects at least 1 argument");var start=params[0]||0,length=params.length>1?params[1]:value.length,startIndex=start>=0?start:Math.max(value.length+start,0);if(Twig.lib.is("Array",value)){for(var output=[],i=startIndex;startIndex+length>i&&i<value.length;i++)output.push(value[i]);return output}if(Twig.lib.is("String",value))return value.substr(startIndex,length);throw new Twig.Error("slice filter expects value to be an array or string")}},abs:function(value){return void 0!==value&&null!==value?Math.abs(value):void 0},first:function(value){if(value instanceof Array)return value[0];if(value instanceof Object){if("_keys"in value)return value[value._keys[0]]}else if("string"==typeof value)return value.substr(0,1)},split:function(value,params){if(void 0!==value&&null!==value){if(void 0===params||params.length<1||params.length>2)throw new Twig.Error("split filter expects 1 or 2 argument");if(Twig.lib.is("String",value)){var delimiter=params[0],limit=params[1],split=value.split(delimiter);if(void 0===limit)return split;if(0>limit)return value.split(delimiter,split.length+limit);var limitedSplit=[];if(""==delimiter)for(;split.length>0;){for(var temp="",i=0;limit>i&&split.length>0;i++)temp+=split.shift();limitedSplit.push(temp)}else{for(var i=0;limit-1>i&&split.length>0;i++)limitedSplit.push(split.shift());split.length>0&&limitedSplit.push(split.join(delimiter))}return limitedSplit}throw new Twig.Error("split filter expects value to be a string")}},last:function(value){if(Twig.lib.is("Object",value)){var keys;return keys=void 0===value._keys?Object.keys(value):value._keys,
value[keys[keys.length-1]]}return value[value.length-1]}},Twig.filter=function(filter,value,params){if(!Twig.filters[filter])throw"Unable to find filter "+filter;return Twig.filters[filter].apply(this,[value,params])},Twig.filter.extend=function(filter,definition){Twig.filters[filter]=definition},Twig}(Twig||{}),Twig=function(Twig){return Twig.functions={range:function(low,high,step){var inival,endval,plus,matrix=[],walker=step||1,chars=!1;if(isNaN(low)||isNaN(high)?isNaN(low)&&isNaN(high)?(chars=!0,inival=low.charCodeAt(0),endval=high.charCodeAt(0)):(inival=isNaN(low)?0:low,endval=isNaN(high)?0:high):(inival=parseInt(low,10),endval=parseInt(high,10)),plus=inival>endval?!1:!0)for(;endval>=inival;)matrix.push(chars?String.fromCharCode(inival):inival),inival+=walker;else for(;inival>=endval;)matrix.push(chars?String.fromCharCode(inival):inival),inival-=walker;return matrix},cycle:function(arr,i){var pos=i%arr.length;return arr[pos]},dump:function(){var EOL="\n",indentChar="  ",indentTimes=0,out="",args=Array.prototype.slice.call(arguments),indent=function(times){for(var ind="";times>0;)times--,ind+=indentChar;return ind},displayVar=function(variable){out+=indent(indentTimes),"object"==typeof variable?dumpVar(variable):"function"==typeof variable?out+="function()"+EOL:"string"==typeof variable?out+="string("+variable.length+') "'+variable+'"'+EOL:"number"==typeof variable?out+="number("+variable+")"+EOL:"boolean"==typeof variable&&(out+="bool("+variable+")"+EOL)},dumpVar=function(variable){var i;if(null===variable)out+="NULL"+EOL;else if(void 0===variable)out+="undefined"+EOL;else if("object"==typeof variable){out+=indent(indentTimes)+typeof variable,indentTimes++,out+="("+function(obj){var key,size=0;for(key in obj)obj.hasOwnProperty(key)&&size++;return size}(variable)+") {"+EOL;for(i in variable)out+=indent(indentTimes)+"["+i+"]=> "+EOL,displayVar(variable[i]);indentTimes--,out+=indent(indentTimes)+"}"+EOL}else displayVar(variable)};return 0==args.length&&args.push(this.context),Twig.forEach(args,function(variable){dumpVar(variable)}),out},date:function(date,time){var dateObj;if(void 0===date)dateObj=new Date;else if(Twig.lib.is("Date",date))dateObj=date;else if(Twig.lib.is("String",date))dateObj=new Date(1e3*Twig.lib.strtotime(date));else{if(!Twig.lib.is("Number",date))throw new Twig.Error("Unable to parse date "+date);dateObj=new Date(1e3*date)}return dateObj},block:function(block){return this.blocks[block]},parent:function(){return Twig.placeholders.parent}},Twig._function=function(_function,value,params){if(!Twig.functions[_function])throw"Unable to find function "+_function;return Twig.functions[_function](value,params)},Twig._function.extend=function(_function,definition){Twig.functions[_function]=definition},Twig}(Twig||{}),Twig=function(Twig){"use strict";return Twig.tests={empty:function(value){if(null===value||void 0===value)return!0;if("number"==typeof value)return!1;if(value.length&&value.length>0)return!1;for(var key in value)if(value.hasOwnProperty(key))return!1;return!0},odd:function(value){return value%2===1},even:function(value){return value%2===0},divisibleby:function(value,params){return value%params[0]===0},defined:function(value){return void 0!==value},none:function(value){return null===value},"null":function(value){return this.none(value)},sameas:function(value,params){return value===params[0]}},Twig.test=function(test,value,params){if(!Twig.tests[test])throw"Test "+test+" is not defined.";return Twig.tests[test](value,params)},Twig.test.extend=function(test,definition){Twig.tests[test]=definition},Twig}(Twig||{}),Twig=function(Twig){"use strict";return Twig.exports={VERSION:Twig.VERSION},Twig.exports.twig=function(params){var id=params.id,options={strict_variables:params.strict_variables||!1,allowInlineIncludes:params.allowInlineIncludes||!1,rethrow:params.rethrow||!1};if(id&&Twig.validateId(id),void 0!==params.debug&&(Twig.debug=params.debug),void 0!==params.trace&&(Twig.trace=params.trace),void 0!==params.data)return new Twig.Template({data:params.data,module:params.module,id:id,options:options});if(void 0!==params.ref){if(void 0!==params.id)throw new Twig.Error("Both ref and id cannot be set on a twig.js template.");return Twig.Templates.load(params.ref)}return void 0!==params.href?Twig.Templates.loadRemote(params.href,{id:id,method:"ajax",base:params.base,module:params.module,precompiled:params.precompiled,async:params.async,options:options},params.load,params.error):void 0!==params.path?Twig.Templates.loadRemote(params.path,{id:id,method:"fs",base:params.base,module:params.module,precompiled:params.precompiled,async:params.async,options:options},params.load,params.error):void 0},Twig.exports.extendFilter=function(filter,definition){Twig.filter.extend(filter,definition)},Twig.exports.extendFunction=function(fn,definition){Twig._function.extend(fn,definition)},Twig.exports.extendTest=function(test,definition){Twig.test.extend(test,definition)},Twig.exports.extendTag=function(definition){Twig.logic.extend(definition)},Twig.exports.extend=function(fn){fn(Twig)},Twig.exports.compile=function(markup,options){var template,id=options.filename,path=options.filename;return template=new Twig.Template({data:markup,path:path,id:id,options:options.settings["twig options"]}),function(context){return template.render(context)}},Twig.exports.renderFile=function(path,options,fn){"function"==typeof options&&(fn=options,options={}),options=options||{};var params={path:path,base:options.settings.views,load:function(template){fn(null,template.render(options))}},view_options=options.settings["twig options"];if(view_options)for(var option in view_options)view_options.hasOwnProperty(option)&&(params[option]=view_options[option]);Twig.exports.twig(params)},Twig.exports.__express=Twig.exports.renderFile,Twig.exports.cache=function(cache){Twig.cache=cache},Twig}(Twig||{}),Twig=function(Twig){return Twig.compiler={module:{}},Twig.compiler.compile=function(template,options){var output,tokens=JSON.stringify(template.tokens),id=template.id;if(options.module){if(void 0===Twig.compiler.module[options.module])throw new Twig.Error("Unable to find module type "+options.module);output=Twig.compiler.module[options.module](id,tokens,options.twig)}else output=Twig.compiler.wrap(id,tokens);return output},Twig.compiler.module={amd:function(id,tokens,pathToTwig){return'define(["'+pathToTwig+'"], function (Twig) {\n	var twig, templates;\ntwig = Twig.twig;\ntemplates = '+Twig.compiler.wrap(id,tokens)+"\n	return templates;\n});"},node:function(id,tokens){return'var twig = require("twig").twig;\nexports.template = '+Twig.compiler.wrap(id,tokens)},cjs2:function(id,tokens,pathToTwig){return'module.declare([{ twig: "'+pathToTwig+'" }], function (require, exports, module) {\n	var twig = require("twig").twig;\n	exports.template = '+Twig.compiler.wrap(id,tokens)+"\n});"}},Twig.compiler.wrap=function(id,tokens){return'twig({id:"'+id.replace('"','\\"')+'", data:'+tokens+", precompiled: true});\n"},Twig}(Twig||{});"undefined"!=typeof module&&module.declare?module.declare([],function(require,exports,module){for(key in Twig.exports)Twig.exports.hasOwnProperty(key)&&(exports[key]=Twig.exports[key])}):"function"==typeof define&&define.amd?define(function(){return Twig.exports}):"undefined"!=typeof module&&module.exports?module.exports=Twig.exports:(window.twig=Twig.exports.twig,window.Twig=Twig.exports),function(){var root=this,previousUnderscore=root._,breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){return obj instanceof _?obj:this instanceof _?void(this._wrapped=obj):new _(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.5.2";var each=_.each=_.forEach=function(obj,iterator,context){if(null!=obj)if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,length=obj.length;length>i;i++)if(iterator.call(context,obj[i],i,obj)===breaker)return}else for(var keys=_.keys(obj),i=0,length=keys.length;length>i;i++)if(iterator.call(context,obj[keys[i]],keys[i],obj)===breaker)return};_.map=_.collect=function(obj,iterator,context){var results=[];return null==obj?results:nativeMap&&obj.map===nativeMap?obj.map(iterator,context):(each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results)};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduce&&obj.reduce===nativeReduce)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduce(iterator,memo):obj.reduce(iterator);if(each(obj,function(value,index,list){initial?memo=iterator.call(context,memo,value,index,list):(memo=value,initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduceRight&&obj.reduceRight===nativeReduceRight)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}if(each(obj,function(value,index,list){index=keys?keys[--length]:--length,initial?memo=iterator.call(context,memo,obj[index],index,list):(memo=obj[index],initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.find=_.detect=function(obj,iterator,context){var result;return any(obj,function(value,index,list){return iterator.call(context,value,index,list)?(result=value,!0):void 0}),result},_.filter=_.select=function(obj,iterator,context){var results=[];return null==obj?results:nativeFilter&&obj.filter===nativeFilter?obj.filter(iterator,context):(each(obj,function(value,index,list){iterator.call(context,value,index,list)&&results.push(value)}),results)},_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list)},context)},_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!0;return null==obj?result:nativeEvery&&obj.every===nativeEvery?obj.every(iterator,context):(each(obj,function(value,index,list){return(result=result&&iterator.call(context,value,index,list))?void 0:breaker}),!!result)};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!1;return null==obj?result:nativeSome&&obj.some===nativeSome?obj.some(iterator,context):(each(obj,function(value,index,list){return result||(result=iterator.call(context,value,index,list))?breaker:void 0}),!!result)};_.contains=_.include=function(obj,target){return null==obj?!1:nativeIndexOf&&obj.indexOf===nativeIndexOf?-1!=obj.indexOf(target):any(obj,function(value){return value===target})},_.invoke=function(obj,method){var args=slice.call(arguments,2),isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})},_.where=function(obj,attrs,first){return _.isEmpty(attrs)?first?void 0:[]:_[first?"find":"filter"](obj,function(value){for(var key in attrs)if(attrs[key]!==value[key])return!1;return!0})},_.findWhere=function(obj,attrs){return _.where(obj,attrs,!0)},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-(1/0);var result={computed:-(1/0),value:-(1/0)};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>result.computed&&(result={value:value,computed:computed})}),result.value},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return 1/0;var result={computed:1/0,value:1/0};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})}),result.value},_.shuffle=function(obj){var rand,index=0,shuffled=[];return each(obj,function(value){rand=_.random(index++),shuffled[index-1]=shuffled[rand],shuffled[rand]=value}),shuffled},_.sample=function(obj,n,guard){return arguments.length<2||guard?obj[_.random(obj.length-1)]:_.shuffle(obj).slice(0,Math.max(0,n))};var lookupIterator=function(value){return _.isFunction(value)?value:function(obj){return obj[value]}};_.sortBy=function(obj,value,context){var iterator=lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(b>a||void 0===b)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,value,context){var result={},iterator=null==value?_.identity:lookupIterator(value);return each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)}),result}};_.groupBy=group(function(result,key,value){(_.has(result,key)?result[key]:result[key]=[]).push(value)}),_.indexBy=group(function(result,key,value){result[key]=value}),_.countBy=group(function(result,key){_.has(result,key)?result[key]++:result[key]=1}),_.sortedIndex=function(array,obj,iterator,context){iterator=null==iterator?_.identity:lookupIterator(iterator);for(var value=iterator.call(context,obj),low=0,high=array.length;high>low;){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low},_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):obj.length===+obj.length?_.map(obj,_.identity):_.values(obj):[]},_.size=function(obj){return null==obj?0:obj.length===+obj.length?obj.length:_.keys(obj).length},_.first=_.head=_.take=function(array,n,guard){return null==array?void 0:null==n||guard?array[0]:slice.call(array,0,n)},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(null==n||guard?1:n))},_.last=function(array,n,guard){return null==array?void 0:null==n||guard?array[array.length-1]:slice.call(array,Math.max(array.length-n,0))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){return shallow&&_.every(input,_.isArray)?concat.apply(output,input):(each(input,function(value){_.isArray(value)||_.isArguments(value)?shallow?push.apply(output,value):flatten(value,shallow,output):output.push(value)}),output)};_.flatten=function(array,shallow){return flatten(array,shallow,[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iterator,context){_.isFunction(isSorted)&&(context=iterator,iterator=isSorted,isSorted=!1);var initial=iterator?_.map(array,iterator,context):array,results=[],seen=[];return each(initial,function(value,index){(isSorted?index&&seen[seen.length-1]===value:_.contains(seen,value))||(seen.push(value),results.push(array[index]))}),results},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})},_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(){for(var length=_.max(_.pluck(arguments,"length").concat(0)),results=new Array(length),i=0;length>i;i++)results[i]=_.pluck(arguments,""+i);return results},_.object=function(list,values){if(null==list)return{};for(var result={},i=0,length=list.length;length>i;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result},_.indexOf=function(array,item,isSorted){if(null==array)return-1;var i=0,length=array.length;if(isSorted){if("number"!=typeof isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;i=0>isSorted?Math.max(0,length+isSorted):isSorted}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;length>i;i++)if(array[i]===item)return i;return-1},_.lastIndexOf=function(array,item,from){if(null==array)return-1;var hasIndex=null!=from;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item);for(var i=hasIndex?from:array.length;i--;)if(array[i]===item)return i;return-1},_.range=function(start,stop,step){arguments.length<=1&&(stop=start||0,start=0),step=arguments[2]||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=new Array(length);length>idx;)range[idx++]=start,start+=step;return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}},_.partial=function(func){var args=slice.call(arguments,1);return function(){return func.apply(this,args.concat(slice.call(arguments)))}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(0===funcs.length)throw new Error("bindAll must be passed function names");return each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=options.leading===!1?0:new Date,timeout=null,result=func.apply(context,args)};return function(){var now=new Date;previous||options.leading!==!1||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||options.trailing===!1||(timeout=setTimeout(later,remaining)),result}},_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;return function(){context=this,args=arguments,timestamp=new Date;var later=function(){var last=new Date-timestamp;wait>last?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args)))},callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args)),result}},_.once=function(func){var memo,ran=!1;return function(){return ran?memo:(ran=!0,memo=func.apply(this,arguments),func=null,memo)}},_.wrap=function(func,wrapper){return function(){var args=[func];return push.apply(args,arguments),wrapper.apply(this,args)}},_.compose=function(){var funcs=arguments;return function(){for(var args=arguments,i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){return function(){return--times<1?func.apply(this,arguments):void 0}},_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)_.has(obj,key)&&keys.push(key);return keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=new Array(length),i=0;length>i;i++)values[i]=obj[keys[i]];return values},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=new Array(length),i=0;length>i;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;length>i;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)obj[prop]=source[prop]}),obj},_.pick=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));return each(keys,function(key){key in obj&&(copy[key]=obj[key])}),copy},_.omit=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj)_.contains(keys,key)||(copy[key]=obj[key]);return copy},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)void 0===obj[prop]&&(obj[prop]=source[prop])}),obj},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=aStack.length;length--;)if(aStack[length]==a)return bStack[length]==b;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor))return!1;aStack.push(a),bStack.push(b);var size=0,result=!0;if("[object Array]"==className){if(size=a.length,result=size==b.length)for(;size--&&(result=eq(a[size],b[size],aStack,bStack)););}else{for(var key in a)if(_.has(a,key)&&(size++,!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack))))break;if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}return aStack.pop(),bStack.pop(),result};_.isEqual=function(a,b){return eq(a,b,[],[])},_.isEmpty=function(obj){if(null==obj)return!0;if(_.isArray(obj)||_.isString(obj))return 0===obj.length;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"==toString.call(obj)},_.isObject=function(obj){return obj===Object(obj)},each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}}),_.isArguments(arguments)||(_.isArguments=function(obj){return!(!obj||!_.has(obj,"callee"))}),"function"!=typeof/./&&(_.isFunction=function(obj){return"function"==typeof obj}),_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj},_.isBoolean=function(obj){return obj===!0||obj===!1||"[object Boolean]"==toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.times=function(n,iterator,context){for(var accum=Array(Math.max(0,n)),i=0;n>i;i++)accum[i]=iterator.call(context,i);return accum},_.random=function(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){return null==string?"":(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}}),_.result=function(object,property){if(null==object)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value},_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]}),escape&&(source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"),interpolate&&(source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"),evaluate&&(source+="';\n"+evaluate+"\n__p+='"),index=offset+match.length,match}),source+="';\n",settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};return template.source="function("+(settings.variable||"obj")+"){\n"+source+"}",template},_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return method.apply(obj,arguments),"shift"!=name&&"splice"!=name||0!==obj.length||delete obj[0],result.call(this,obj)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(root,factory){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(_,$,exports){root.Backbone=factory(root,exports,_,$)});else if("undefined"!=typeof exports){var _=require("underscore");factory(root,exports,_)}else root.Backbone=factory(root,{},root._,root.jQuery||root.Zepto||root.ender||root.$)}(this,function(root,Backbone,_,$){var previousBackbone=root.Backbone,array=[],slice=(array.push,array.slice);array.splice;Backbone.VERSION="1.1.2",Backbone.$=$,Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var Events=Backbone.Events={on:function(name,callback,context){if(!eventsApi(this,"on",name,[callback,context])||!callback)return this;this._events||(this._events={});var events=this._events[name]||(this._events[name]=[]);return events.push({callback:callback,context:context,ctx:context||this}),this},once:function(name,callback,context){if(!eventsApi(this,"once",name,[callback,context])||!callback)return this;var self=this,once=_.once(function(){self.off(name,once),callback.apply(this,arguments)});return once._callback=callback,this.on(name,once,context)},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;if(!name&&!callback&&!context)return this._events=void 0,this;for(names=name?[name]:_.keys(this._events),i=0,l=names.length;l>i;i++)if(name=names[i],events=this._events[name]){if(this._events[name]=retain=[],callback||context)for(j=0,k=events.length;k>j;j++)ev=events[j],(callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context)&&retain.push(ev);retain.length||delete this._events[name]}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,"trigger",name,args))return this;var events=this._events[name],allEvents=this._events.all;return events&&triggerEvents(events,args),allEvents&&triggerEvents(allEvents,arguments),this},stopListening:function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var remove=!name&&!callback;callback||"object"!=typeof name||(callback=this),obj&&((listeningTo={})[obj._listenId]=obj);for(var id in listeningTo)obj=listeningTo[id],obj.off(name,callback,this),(remove||_.isEmpty(obj._events))&&delete this._listeningTo[id];return this}},eventSplitter=/\s+/,eventsApi=function(obj,action,name,rest){if(!name)return!0;if("object"==typeof name){for(var key in name)obj[action].apply(obj,[key,name[key]].concat(rest));return!1}if(eventSplitter.test(name)){for(var names=name.split(eventSplitter),i=0,l=names.length;l>i;i++)obj[action].apply(obj,[names[i]].concat(rest));return!1}return!0},triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx);return;case 1:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:for(;++i<l;)(ev=events[i]).callback.apply(ev.ctx,args);return}},listenMethods={listenTo:"on",listenToOnce:"once"};_.each(listenMethods,function(implementation,method){Events[method]=function(obj,name,callback){var listeningTo=this._listeningTo||(this._listeningTo={}),id=obj._listenId||(obj._listenId=_.uniqueId("l"));return listeningTo[id]=obj,callback||"object"!=typeof name||(callback=this),obj[implementation](name,callback,this),this}}),Events.bind=Events.on,Events.unbind=Events.off,_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};options||(options={}),this.cid=_.uniqueId("c"),this.attributes={},options.collection&&(this.collection=options.collection),options.parse&&(attrs=this.parse(attrs,options)||{}),attrs=_.defaults({},attrs,_.result(this,"defaults")),this.set(attrs,options),this.changed={},this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return null!=this.get(attr)},set:function(key,val,options){
var attr,attrs,unset,changes,silent,changing,prev,current;if(null==key)return this;if("object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options||(options={}),!this._validate(attrs,options))return!1;unset=options.unset,silent=options.silent,changes=[],changing=this._changing,this._changing=!0,changing||(this._previousAttributes=_.clone(this.attributes),this.changed={}),current=this.attributes,prev=this._previousAttributes,this.idAttribute in attrs&&(this.id=attrs[this.idAttribute]);for(attr in attrs)val=attrs[attr],_.isEqual(current[attr],val)||changes.push(attr),_.isEqual(prev[attr],val)?delete this.changed[attr]:this.changed[attr]=val,unset?delete current[attr]:current[attr]=val;if(!silent){changes.length&&(this._pending=options);for(var i=0,l=changes.length;l>i;i++)this.trigger("change:"+changes[i],this,current[changes[i]],options)}if(changing)return this;if(!silent)for(;this._pending;)options=this._pending,this._pending=!1,this.trigger("change",this,options);return this._pending=!1,this._changing=!1,this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:!0}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:!0}))},hasChanged:function(attr){return null==attr?!_.isEmpty(this.changed):_.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):!1;var val,changed=!1,old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff)_.isEqual(old[attr],val=diff[attr])||((changed||(changed={}))[attr]=val);return changed},previous:function(attr){return null!=attr&&this._previousAttributes?this._previousAttributes[attr]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){options=options?_.clone(options):{},void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){return model.set(model.parse(resp,options),options)?(success&&success(model,resp,options),void model.trigger("sync",model,resp,options)):!1},wrapError(this,options),this.sync("read",this,options)},save:function(key,val,options){var attrs,method,xhr,attributes=this.attributes;if(null==key||"object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options=_.extend({validate:!0},options),attrs&&!options.wait){if(!this.set(attrs,options))return!1}else if(!this._validate(attrs,options))return!1;attrs&&options.wait&&(this.attributes=_.extend({},attributes,attrs)),void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){model.attributes=attributes;var serverAttrs=model.parse(resp,options);return options.wait&&(serverAttrs=_.extend(attrs||{},serverAttrs)),_.isObject(serverAttrs)&&!model.set(serverAttrs,options)?!1:(success&&success(model,resp,options),void model.trigger("sync",model,resp,options))},wrapError(this,options),method=this.isNew()?"create":options.patch?"patch":"update","patch"===method&&(options.attrs=attrs),xhr=this.sync(method,this,options),attrs&&options.wait&&(this.attributes=attributes),xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,destroy=function(){model.trigger("destroy",model,model.collection,options)};if(options.success=function(resp){(options.wait||model.isNew())&&destroy(),success&&success(model,resp,options),model.isNew()||model.trigger("sync",model,resp,options)},this.isNew())return options.success(),!1;wrapError(this,options);var xhr=this.sync("delete",this,options);return options.wait||destroy(),xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();return this.isNew()?base:base.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(options){return this._validate({},_.extend(options||{},{validate:!0}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;return error?(this.trigger("invalid",this,error,_.extend(options,{validationError:error})),!1):!0}});var modelMethods=["keys","values","pairs","invert","pick","omit"];_.each(modelMethods,function(method){Model.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.attributes),_[method].apply(_,args)}});var Collection=Backbone.Collection=function(models,options){options||(options={}),options.model&&(this.model=options.model),void 0!==options.comparator&&(this.comparator=options.comparator),this._reset(),this.initialize.apply(this,arguments),models&&this.reset(models,_.extend({silent:!0},options))},setOptions={add:!0,remove:!0,merge:!0},addOptions={add:!0,remove:!1};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.extend({merge:!1},options,addOptions))},remove:function(models,options){var singular=!_.isArray(models);models=singular?[models]:_.clone(models),options||(options={});var i,l,index,model;for(i=0,l=models.length;l>i;i++)model=models[i]=this.get(models[i]),model&&(delete this._byId[model.id],delete this._byId[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,options.silent||(options.index=index,model.trigger("remove",model,this,options)),this._removeReference(model,options));return singular?models[0]:models},set:function(models,options){options=_.defaults({},options,setOptions),options.parse&&(models=this.parse(models,options));var singular=!_.isArray(models);models=singular?models?[models]:[]:_.clone(models);var i,l,id,model,attrs,existing,sort,at=options.at,targetModel=this.model,sortable=this.comparator&&null==at&&options.sort!==!1,sortAttr=_.isString(this.comparator)?this.comparator:null,toAdd=[],toRemove=[],modelMap={},add=options.add,merge=options.merge,remove=options.remove,order=!sortable&&add&&remove?[]:!1;for(i=0,l=models.length;l>i;i++){if(attrs=models[i]||{},id=attrs instanceof Model?model=attrs:attrs[targetModel.prototype.idAttribute||"id"],existing=this.get(id))remove&&(modelMap[existing.cid]=!0),merge&&(attrs=attrs===model?model.attributes:attrs,options.parse&&(attrs=existing.parse(attrs,options)),existing.set(attrs,options),sortable&&!sort&&existing.hasChanged(sortAttr)&&(sort=!0)),models[i]=existing;else if(add){if(model=models[i]=this._prepareModel(attrs,options),!model)continue;toAdd.push(model),this._addReference(model,options)}model=existing||model,!order||!model.isNew()&&modelMap[model.id]||order.push(model),modelMap[model.id]=!0}if(remove){for(i=0,l=this.length;l>i;++i)modelMap[(model=this.models[i]).cid]||toRemove.push(model);toRemove.length&&this.remove(toRemove,options)}if(toAdd.length||order&&order.length)if(sortable&&(sort=!0),this.length+=toAdd.length,null!=at)for(i=0,l=toAdd.length;l>i;i++)this.models.splice(at+i,0,toAdd[i]);else{order&&(this.models.length=0);var orderedModels=order||toAdd;for(i=0,l=orderedModels.length;l>i;i++)this.models.push(orderedModels[i])}if(sort&&this.sort({silent:!0}),!options.silent){for(i=0,l=toAdd.length;l>i;i++)(model=toAdd[i]).trigger("add",model,this,options);(sort||order&&order.length)&&this.trigger("sort",this,options)}return singular?models[0]:models},reset:function(models,options){options||(options={});for(var i=0,l=this.models.length;l>i;i++)this._removeReference(this.models[i],options);return options.previousModels=this.models,this._reset(),models=this.add(models,_.extend({silent:!0},options)),options.silent||this.trigger("reset",this,options),models},push:function(model,options){return this.add(model,_.extend({at:this.length},options))},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return this.add(model,_.extend({at:0},options))},shift:function(options){var model=this.at(0);return this.remove(model,options),model},slice:function(){return slice.apply(this.models,arguments)},get:function(obj){return null==obj?void 0:this._byId[obj]||this._byId[obj.id]||this._byId[obj.cid]},at:function(index){return this.models[index]},where:function(attrs,first){return _.isEmpty(attrs)?first?void 0:[]:this[first?"find":"filter"](function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},findWhere:function(attrs){return this.where(attrs,!0)},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return options||(options={}),_.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(_.bind(this.comparator,this)),options.silent||this.trigger("sort",this,options),this},pluck:function(attr){return _.invoke(this.models,"get",attr)},fetch:function(options){options=options?_.clone(options):{},void 0===options.parse&&(options.parse=!0);var success=options.success,collection=this;return options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options),success&&success(collection,resp,options),collection.trigger("sync",collection,resp,options)},wrapError(this,options),this.sync("read",this,options)},create:function(model,options){if(options=options?_.clone(options):{},!(model=this._prepareModel(model,options)))return!1;options.wait||this.add(model,options);var collection=this,success=options.success;return options.success=function(model,resp){options.wait&&collection.add(model,options),success&&success(model,resp,options)},model.save(null,options),model},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(attrs,options){if(attrs instanceof Model)return attrs;options=options?_.clone(options):{},options.collection=this;var model=new this.model(attrs,options);return model.validationError?(this.trigger("invalid",this,model.validationError,options),!1):model},_addReference:function(model,options){this._byId[model.cid]=model,null!=model.id&&(this._byId[model.id]=model),model.collection||(model.collection=this),model.on("all",this._onModelEvent,this)},_removeReference:function(model,options){this===model.collection&&delete model.collection,model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){("add"!==event&&"remove"!==event||collection===this)&&("destroy"===event&&this.remove(model,options),model&&event==="change:"+model.idAttribute&&(delete this._byId[model.previous(model.idAttribute)],null!=model.id&&(this._byId[model.id]=model)),this.trigger.apply(this,arguments))}});var methods=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];_.each(methods,function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.models),_[method].apply(_,args)}});var attributeMethods=["groupBy","countBy","sortBy","indexBy"];_.each(attributeMethods,function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),options||(options={}),_.extend(this,_.pick(options,viewOptions)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(element,delegate){return this.$el&&this.undelegateEvents(),this.$el=element instanceof Backbone.$?element:Backbone.$(element),this.el=this.$el[0],delegate!==!1&&this.delegateEvents(),this},delegateEvents:function(events){if(!events&&!(events=_.result(this,"events")))return this;this.undelegateEvents();for(var key in events){var method=events[key];if(_.isFunction(method)||(method=this[events[key]]),method){var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,""===selector?this.$el.on(eventName,method):this.$el.on(eventName,selector,method)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(_.result(this,"el"),!1);else{var attrs=_.extend({},_.result(this,"attributes"));this.id&&(attrs.id=_.result(this,"id")),this.className&&(attrs["class"]=_.result(this,"className"));var $el=Backbone.$("<"+_.result(this,"tagName")+">").attr(attrs);this.setElement($el,!1)}}}),Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(options.url||(params.url=_.result(model,"url")||urlError()),null!=options.data||!model||"create"!==method&&"update"!==method&&"patch"!==method||(params.contentType="application/json",params.data=JSON.stringify(options.attrs||model.toJSON(options))),options.emulateJSON&&(params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{}),options.emulateHTTP&&("PUT"===type||"DELETE"===type||"PATCH"===type)){params.type="POST",options.emulateJSON&&(params.data._method=type);var beforeSend=options.beforeSend;options.beforeSend=function(xhr){return xhr.setRequestHeader("X-HTTP-Method-Override",type),beforeSend?beforeSend.apply(this,arguments):void 0}}"GET"===params.type||options.emulateJSON||(params.processData=!1),"PATCH"===params.type&&noXhrPatch&&(params.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var xhr=options.xhr=Backbone.ajax(_.extend(params,options));return model.trigger("request",model,xhr,options),xhr};var noXhrPatch=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),methodMap={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={}),options.routes&&(this.routes=options.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},optionalParam=/\((.*?)\)/g,namedParam=/(\(\?)?:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){_.isRegExp(route)||(route=this._routeToRegExp(route)),_.isFunction(name)&&(callback=name,name=""),callback||(callback=this[name]);var router=this;return Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);router.execute(callback,args),router.trigger.apply(router,["route:"+name].concat(args)),router.trigger("route",name,args),Backbone.history.trigger("route",router,name,args)}),this},execute:function(callback,args){callback&&callback.apply(this,args)},navigate:function(fragment,options){return Backbone.history.navigate(fragment,options),this},_bindRoutes:function(){if(this.routes){this.routes=_.result(this,"routes");for(var route,routes=_.keys(this.routes);null!=(route=routes.pop());)this.route(route,this.routes[route])}},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/?]+)"}).replace(splatParam,"([^?]*?)"),new RegExp("^"+route+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param,i){return i===params.length-1?param||null:param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[],_.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},routeStripper=/^[#\/]|\s+$/g,rootStripper=/^\/+|\/+$/g,isExplorer=/msie [\w.]+/,trailingSlash=/\/$/,pathStripper=/#.*$/;History.started=!1,_.extend(History.prototype,Events,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(null==fragment)if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=decodeURI(this.location.pathname+this.location.search);var root=this.root.replace(trailingSlash,"");fragment.indexOf(root)||(fragment=fragment.slice(root.length))}else fragment=this.getHash();return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({root:"/"},this.options,options),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||7>=docMode);if(this.root=("/"+this.root+"/").replace(rootStripper,"/"),oldIE&&this._wantsHashChange){var frame=Backbone.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=frame.hide().appendTo("body")[0].contentWindow,this.navigate(fragment)}this._hasPushState?Backbone.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!oldIE?Backbone.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=fragment;var loc=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&loc.hash&&(this.fragment=this.getHash().replace(routeStripper,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();return current===this.fragment&&this.iframe&&(current=this.getFragment(this.getHash(this.iframe))),current===this.fragment?!1:(this.iframe&&this.navigate(current),void this.loadUrl())},loadUrl:function(fragment){return fragment=this.fragment=this.getFragment(fragment),_.any(this.handlers,function(handler){return handler.route.test(fragment)?(handler.callback(fragment),!0):void 0})},navigate:function(fragment,options){if(!History.started)return!1;options&&options!==!0||(options={trigger:!!options});var url=this.root+(fragment=this.getFragment(fragment||""));if(fragment=fragment.replace(pathStripper,""),this.fragment!==fragment){if(this.fragment=fragment,""===fragment&&"/"!==url&&(url=url.slice(0,-1)),this._hasPushState)this.history[options.replace?"replaceState":"pushState"]({},document.title,url);else{if(!this._wantsHashChange)return this.location.assign(url);this._updateHash(this.location,fragment,options.replace),this.iframe&&fragment!==this.getFragment(this.getHash(this.iframe))&&(options.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,fragment,options.replace))}return options.trigger?this.loadUrl(fragment):void 0}},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else location.hash="#"+fragment}}),Backbone.history=new History;var extend=function(protoProps,staticProps){var child,parent=this;child=protoProps&&_.has(protoProps,"constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)},_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps&&_.extend(child.prototype,protoProps),child.__super__=parent.prototype,child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(model,options){var error=options.error;options.error=function(resp){error&&error(model,resp,options),model.trigger("error",model,resp,options)}};return Backbone}),Backbone.ChildViewContainer=function(Backbone,_){var Container=function(views){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),_.each(views,this.add,this)};_.extend(Container.prototype,{add:function(view,customIndex){var viewCid=view.cid;this._views[viewCid]=view,view.model&&(this._indexByModel[view.model.cid]=viewCid),customIndex&&(this._indexByCustom[customIndex]=viewCid),this._updateLength()},findByModel:function(model){return this.findByModelCid(model.cid)},findByModelCid:function(modelCid){var viewCid=this._indexByModel[modelCid];return this.findByCid(viewCid)},findByCustom:function(index){var viewCid=this._indexByCustom[index];return this.findByCid(viewCid)},findByIndex:function(index){return _.values(this._views)[index]},findByCid:function(cid){return this._views[cid]},remove:function(view){var viewCid=view.cid;view.model&&delete this._indexByModel[view.model.cid],_.any(this._indexByCustom,function(cid,key){return cid===viewCid?(delete this._indexByCustom[key],!0):void 0},this),delete this._views[viewCid],this._updateLength()},call:function(method){this.apply(method,_.tail(arguments))},apply:function(method,args){_.each(this._views,function(view){_.isFunction(view[method])&&view[method].apply(view,args||[])})},_updateLength:function(){this.length=_.size(this._views)}});var methods=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return _.each(methods,function(method){Container.prototype[method]=function(){var views=_.values(this._views),args=[views].concat(_.toArray(arguments));return _[method].apply(_,args)}}),Container}(Backbone,_),Backbone.Wreqr=function(Backbone,Marionette,_){"use strict";var Wreqr={};return Wreqr.Handlers=function(Backbone,_){var Handlers=function(options){this.options=options,this._wreqrHandlers={},_.isFunction(this.initialize)&&this.initialize(options)};return Handlers.extend=Backbone.Model.extend,_.extend(Handlers.prototype,Backbone.Events,{setHandlers:function(handlers){_.each(handlers,function(handler,name){var context=null;_.isObject(handler)&&!_.isFunction(handler)&&(context=handler.context,handler=handler.callback),this.setHandler(name,handler,context)},this)},setHandler:function(name,handler,context){var config={callback:handler,context:context};this._wreqrHandlers[name]=config,this.trigger("handler:add",name,handler,context)},hasHandler:function(name){return!!this._wreqrHandlers[name]},getHandler:function(name){var config=this._wreqrHandlers[name];if(!config)throw new Error("Handler not found for '"+name+"'");return function(){var args=Array.prototype.slice.apply(arguments);return config.callback.apply(config.context,args)}},removeHandler:function(name){delete this._wreqrHandlers[name]},removeAllHandlers:function(){this._wreqrHandlers={}}}),Handlers}(Backbone,_),Wreqr.CommandStorage=function(){var CommandStorage=function(options){this.options=options,this._commands={},_.isFunction(this.initialize)&&this.initialize(options)};return _.extend(CommandStorage.prototype,Backbone.Events,{getCommands:function(commandName){var commands=this._commands[commandName];return commands||(commands={command:commandName,instances:[]},this._commands[commandName]=commands),commands},addCommand:function(commandName,args){var command=this.getCommands(commandName);command.instances.push(args)},clearCommands:function(commandName){var command=this.getCommands(commandName);command.instances=[]}}),CommandStorage}(),Wreqr.Commands=function(Wreqr){return Wreqr.Handlers.extend({storageType:Wreqr.CommandStorage,constructor:function(options){this.options=options||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var args=Array.prototype.slice.call(arguments);Wreqr.Handlers.prototype.constructor.apply(this,args)},execute:function(name,args){name=arguments[0],args=Array.prototype.slice.call(arguments,1),this.hasHandler(name)?this.getHandler(name).apply(this,args):this.storage.addCommand(name,args)},_executeCommands:function(name,handler,context){var command=this.storage.getCommands(name);_.each(command.instances,function(args){handler.apply(context,args)}),this.storage.clearCommands(name)},_initializeStorage:function(options){var storage,StorageType=options.storageType||this.storageType;storage=_.isFunction(StorageType)?new StorageType:StorageType,this.storage=storage}})}(Wreqr),Wreqr.RequestResponse=function(Wreqr){return Wreqr.Handlers.extend({request:function(){var name=arguments[0],args=Array.prototype.slice.call(arguments,1);return this.getHandler(name).apply(this,args)}})}(Wreqr),Wreqr.EventAggregator=function(Backbone,_){var EA=function(){};return EA.extend=Backbone.Model.extend,_.extend(EA.prototype,Backbone.Events),EA}(Backbone,_),Wreqr}(Backbone,Backbone.Marionette,_);var Marionette=function(global,Backbone,_){"use strict";function slice(args){return protoSlice.call(args)}function throwError(message,name){var error=new Error(message);throw error.name=name||"Error",error}var Marionette={};Backbone.Marionette=Marionette,Marionette.$=Backbone.$;var protoSlice=Array.prototype.slice;return Marionette.extend=Backbone.Model.extend,Marionette.getOption=function(target,optionName){if(target&&optionName){var value;return value=target.options&&optionName in target.options&&void 0!==target.options[optionName]?target.options[optionName]:target[optionName]}},Marionette.triggerMethod=function(){function getEventName(match,prefix,eventName){return eventName.toUpperCase()}var splitter=/(^|:)(\w)/gi,triggerMethod=function(event){var methodName="on"+event.replace(splitter,getEventName),method=this[methodName];return _.isFunction(this.trigger)&&this.trigger.apply(this,arguments),_.isFunction(method)?method.apply(this,_.tail(arguments)):void 0};return triggerMethod}(),Marionette.MonitorDOMRefresh=function(){function handleShow(view){view._isShown=!0,triggerDOMRefresh(view)}function handleRender(view){view._isRendered=!0,triggerDOMRefresh(view)}function triggerDOMRefresh(view){view._isShown&&view._isRendered&&_.isFunction(view.triggerMethod)&&view.triggerMethod("dom:refresh")}return function(view){view.listenTo(view,"show",function(){handleShow(view)}),view.listenTo(view,"render",function(){handleRender(view)})}}(),function(Marionette){function bindFromStrings(target,entity,evt,methods){var methodNames=methods.split(/\s+/);_.each(methodNames,function(methodName){var method=target[methodName];method||throwError("Method '"+methodName+"' was configured as an event handler, but does not exist."),target.listenTo(entity,evt,method,target)})}function bindToFunction(target,entity,evt,method){target.listenTo(entity,evt,method,target)}function unbindFromStrings(target,entity,evt,methods){var methodNames=methods.split(/\s+/);_.each(methodNames,function(methodName){var method=target[methodName];target.stopListening(entity,evt,method,target)})}function unbindToFunction(target,entity,evt,method){target.stopListening(entity,evt,method,target)}function iterateEvents(target,entity,bindings,functionCallback,stringCallback){entity&&bindings&&(_.isFunction(bindings)&&(bindings=bindings.call(target)),_.each(bindings,function(methods,evt){_.isFunction(methods)?functionCallback(target,entity,evt,methods):stringCallback(target,entity,evt,methods)}))}Marionette.bindEntityEvents=function(target,entity,bindings){iterateEvents(target,entity,bindings,bindToFunction,bindFromStrings)},Marionette.unbindEntityEvents=function(target,entity,bindings){iterateEvents(target,entity,bindings,unbindToFunction,unbindFromStrings)}}(Marionette),Marionette.Callbacks=function(){this._deferred=Marionette.$.Deferred(),this._callbacks=[]},_.extend(Marionette.Callbacks.prototype,{add:function(callback,contextOverride){this._callbacks.push({cb:callback,ctx:contextOverride}),this._deferred.done(function(context,options){contextOverride&&(context=contextOverride),callback.call(context,options)})},run:function(options,context){this._deferred.resolve(context,options)},reset:function(){var callbacks=this._callbacks;this._deferred=Marionette.$.Deferred(),this._callbacks=[],_.each(callbacks,function(cb){this.add(cb.cb,cb.ctx)},this)}}),Marionette.Controller=function(options){this.triggerMethod=Marionette.triggerMethod,this.options=options||{},_.isFunction(this.initialize)&&this.initialize(this.options)},Marionette.Controller.extend=Marionette.extend,_.extend(Marionette.Controller.prototype,Backbone.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),Marionette.Region=function(options){if(this.options=options||{},this.el=Marionette.getOption(this,"el"),!this.el){var err=new Error("An 'el' must be specified for a region.");throw err.name="NoElError",err}if(this.initialize){var args=Array.prototype.slice.apply(arguments);this.initialize.apply(this,args)}},_.extend(Marionette.Region,{buildRegion:function(regionConfig,defaultRegionType){var regionIsString="string"==typeof regionConfig,regionSelectorIsString="string"==typeof regionConfig.selector,regionTypeIsUndefined="undefined"==typeof regionConfig.regionType,regionIsType="function"==typeof regionConfig;if(!regionIsType&&!regionIsString&&!regionSelectorIsString)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var selector,RegionType;regionIsString&&(selector=regionConfig),regionConfig.selector&&(selector=regionConfig.selector),regionIsType&&(RegionType=regionConfig),!regionIsType&&regionTypeIsUndefined&&(RegionType=defaultRegionType),regionConfig.regionType&&(RegionType=regionConfig.regionType);var region=new RegionType({el:selector});return regionConfig.parentEl&&(region.getEl=function(selector){var parentEl=regionConfig.parentEl;return _.isFunction(parentEl)&&(parentEl=parentEl()),parentEl.find(selector)}),region}}),_.extend(Marionette.Region.prototype,Backbone.Events,{show:function(view){this.ensureEl();var isViewClosed=view.isClosed||_.isUndefined(view.$el),isDifferentView=view!==this.currentView;isDifferentView&&this.close(),view.render(),(isDifferentView||isViewClosed)&&this.open(view),this.currentView=view,Marionette.triggerMethod.call(this,"show",view),Marionette.triggerMethod.call(view,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(selector){return Marionette.$(selector)},open:function(view){this.$el.empty().append(view.el)},close:function(){
var view=this.currentView;view&&!view.isClosed&&(view.close?view.close():view.remove&&view.remove(),Marionette.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(view){this.currentView=view},reset:function(){this.close(),delete this.$el}}),Marionette.Region.extend=Marionette.extend,Marionette.RegionManager=function(Marionette){var RegionManager=Marionette.Controller.extend({constructor:function(options){this._regions={},Marionette.Controller.prototype.constructor.call(this,options)},addRegions:function(regionDefinitions,defaults){var regions={};return _.each(regionDefinitions,function(definition,name){"string"==typeof definition&&(definition={selector:definition}),definition.selector&&(definition=_.defaults({},definition,defaults));var region=this.addRegion(name,definition);regions[name]=region},this),regions},addRegion:function(name,definition){var region,isObject=_.isObject(definition),isString=_.isString(definition),hasSelector=!!definition.selector;return region=isString||isObject&&hasSelector?Marionette.Region.buildRegion(definition,Marionette.Region):_.isFunction(definition)?Marionette.Region.buildRegion(definition,Marionette.Region):definition,this._store(name,region),this.triggerMethod("region:add",name,region),region},get:function(name){return this._regions[name]},removeRegion:function(name){var region=this._regions[name];this._remove(name,region)},removeRegions:function(){_.each(this._regions,function(region,name){this._remove(name,region)},this)},closeRegions:function(){_.each(this._regions,function(region,name){region.close()},this)},close:function(){this.removeRegions();var args=Array.prototype.slice.call(arguments);Marionette.Controller.prototype.close.apply(this,args)},_store:function(name,region){this._regions[name]=region,this._setLength()},_remove:function(name,region){region.close(),delete this._regions[name],this._setLength(),this.triggerMethod("region:remove",name,region)},_setLength:function(){this.length=_.size(this._regions)}}),methods=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return _.each(methods,function(method){RegionManager.prototype[method]=function(){var regions=_.values(this._regions),args=[regions].concat(_.toArray(arguments));return _[method].apply(_,args)}}),RegionManager}(Marionette),Marionette.TemplateCache=function(templateId){this.templateId=templateId},_.extend(Marionette.TemplateCache,{templateCaches:{},get:function(templateId){var cachedTemplate=this.templateCaches[templateId];return cachedTemplate||(cachedTemplate=new Marionette.TemplateCache(templateId),this.templateCaches[templateId]=cachedTemplate),cachedTemplate.load()},clear:function(){var i,args=slice(arguments),length=args.length;if(length>0)for(i=0;length>i;i++)delete this.templateCaches[args[i]];else this.templateCaches={}}}),_.extend(Marionette.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var template=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(template),this.compiledTemplate},loadTemplate:function(templateId){var template=Marionette.$(templateId).html();return template&&0!==template.length||throwError("Could not find template: '"+templateId+"'","NoTemplateError"),template},compileTemplate:function(rawTemplate){return _.template(rawTemplate)}}),Marionette.Renderer={render:function(template,data){if(!template){var error=new Error("Cannot render the template since it's false, null or undefined.");throw error.name="TemplateNotFoundError",error}var templateFunc;return(templateFunc="function"==typeof template?template:Marionette.TemplateCache.get(template))(data)}},Marionette.View=Backbone.View.extend({constructor:function(options){_.bindAll(this,"render");var args=Array.prototype.slice.apply(arguments);this.options=_.extend({},this.options,options),this.events=this.normalizeUIKeys(_.result(this,"events")),Backbone.View.prototype.constructor.apply(this,args),Marionette.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:Marionette.triggerMethod,getTemplate:function(){return Marionette.getOption(this,"template")},mixinTemplateHelpers:function(target){target=target||{};var templateHelpers=Marionette.getOption(this,"templateHelpers");return _.isFunction(templateHelpers)&&(templateHelpers=templateHelpers.call(this)),_.extend(target,templateHelpers)},normalizeUIKeys:function(hash){return"undefined"!=typeof hash?(_.each(_.keys(hash),function(v){var split=v.split("@ui.");2===split.length&&(hash[split[0]+this.ui[split[1]]]=hash[v],delete hash[v])},this),hash):void 0},configureTriggers:function(){if(this.triggers){var triggerEvents={},triggers=this.normalizeUIKeys(_.result(this,"triggers"));return _.each(triggers,function(value,key){var hasOptions=_.isObject(value),eventName=hasOptions?value.event:value;triggerEvents[key]=function(e){if(e){var prevent=e.preventDefault,stop=e.stopPropagation,shouldPrevent=hasOptions?value.preventDefault:prevent,shouldStop=hasOptions?value.stopPropagation:stop;shouldPrevent&&prevent&&prevent.apply(e),shouldStop&&stop&&stop.apply(e)}var args={view:this,model:this.model,collection:this.collection};this.triggerMethod(eventName,args)}},this),triggerEvents}},delegateEvents:function(events){this._delegateDOMEvents(events),Marionette.bindEntityEvents(this,this.model,Marionette.getOption(this,"modelEvents")),Marionette.bindEntityEvents(this,this.collection,Marionette.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(events){events=events||this.events,_.isFunction(events)&&(events=events.call(this));var combinedEvents={},triggers=this.configureTriggers();_.extend(combinedEvents,events,triggers),Backbone.View.prototype.delegateEvents.call(this,combinedEvents)},undelegateEvents:function(){var args=Array.prototype.slice.call(arguments);Backbone.View.prototype.undelegateEvents.apply(this,args),Marionette.unbindEntityEvents(this,this.model,Marionette.getOption(this,"modelEvents")),Marionette.unbindEntityEvents(this,this.collection,Marionette.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var shouldClose=this.triggerMethod("before:close");shouldClose!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var bindings=_.result(this,"_uiBindings");this.ui={},_.each(_.keys(bindings),function(key){var selector=bindings[key];this.ui[key]=this.$(selector)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(_.each(this.ui,function($el,name){delete this.ui[name]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),Marionette.ItemView=Marionette.View.extend({constructor:function(){Marionette.View.prototype.constructor.apply(this,slice(arguments))},serializeData:function(){var data={};return this.model?data=this.model.toJSON():this.collection&&(data={items:this.collection.toJSON()}),data},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var data=this.serializeData();data=this.mixinTemplateHelpers(data);var template=this.getTemplate(),html=Marionette.Renderer.render(template,data);return this.$el.html(html),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),Marionette.View.prototype.close.apply(this,slice(arguments)),this.triggerMethod("item:closed"))}}),Marionette.CollectionView=Marionette.View.extend({itemViewEventPrefix:"itemview",constructor:function(options){this._initChildViewStorage(),Marionette.View.prototype.constructor.apply(this,slice(arguments)),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment()},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.appendBuffer(this,this.elBuffer),this.initRenderBuffer(),this.isBuffering=!1},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(item,collection,options){this.closeEmptyView();var ItemView=this.getItemView(item),index=this.collection.indexOf(item);this.addItemView(item,ItemView,index)},onShowCalled:function(){this.children.each(function(child){Marionette.triggerMethod.call(child,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView(),this.endBuffering()},showCollection:function(){var ItemView;this.collection.each(function(item,index){ItemView=this.getItemView(item),this.addItemView(item,ItemView,index)},this)},showEmptyView:function(){var EmptyView=this.getEmptyView();if(EmptyView&&!this._showingEmptyView){this._showingEmptyView=!0;var model=new Backbone.Model;this.addItemView(model,EmptyView,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return Marionette.getOption(this,"emptyView")},getItemView:function(item){var itemView=Marionette.getOption(this,"itemView");return itemView||throwError("An `itemView` must be specified","NoItemViewError"),itemView},addItemView:function(item,ItemView,index){var itemViewOptions=Marionette.getOption(this,"itemViewOptions");_.isFunction(itemViewOptions)&&(itemViewOptions=itemViewOptions.call(this,item,index));var view=this.buildItemView(item,ItemView,itemViewOptions);this.addChildViewEventForwarding(view),this.triggerMethod("before:item:added",view),this.children.add(view),this.renderItemView(view,index),this._isShown&&Marionette.triggerMethod.call(view,"show"),this.triggerMethod("after:item:added",view)},addChildViewEventForwarding:function(view){var prefix=Marionette.getOption(this,"itemViewEventPrefix");this.listenTo(view,"all",function(){var args=slice(arguments);args[0]=prefix+":"+args[0],args.splice(1,0,view),Marionette.triggerMethod.apply(this,args)},this)},renderItemView:function(view,index){view.render(),this.appendHtml(this,view,index)},buildItemView:function(item,ItemViewType,itemViewOptions){var options=_.extend({model:item},itemViewOptions);return new ItemViewType(options)},removeItemView:function(item){var view=this.children.findByModel(item);this.removeChildView(view),this.checkEmpty()},removeChildView:function(view){view&&(this.stopListening(view),view.close?view.close():view.remove&&view.remove(),this.children.remove(view)),this.triggerMethod("item:removed",view)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendBuffer:function(collectionView,buffer){collectionView.$el.append(buffer)},appendHtml:function(collectionView,itemView,index){collectionView.isBuffering?collectionView.elBuffer.appendChild(itemView.el):collectionView.$el.append(itemView.el)},_initChildViewStorage:function(){this.children=new Backbone.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),Marionette.View.prototype.close.apply(this,slice(arguments)))},closeChildren:function(){this.children.each(function(child){this.removeChildView(child)},this),this.checkEmpty()}}),Marionette.CompositeView=Marionette.CollectionView.extend({constructor:function(){Marionette.CollectionView.prototype.constructor.apply(this,slice(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(item){var itemView=Marionette.getOption(this,"itemView")||this.constructor;return itemView||throwError("An `itemView` must be specified","NoItemViewError"),itemView},serializeData:function(){var data={};return this.model&&(data=this.model.toJSON()),data},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var html=this.renderModel();return this.$el.html(html),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(Marionette.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var data={};data=this.serializeData(),data=this.mixinTemplateHelpers(data);var template=this.getTemplate();return Marionette.Renderer.render(template,data)},appendBuffer:function(compositeView,buffer){var $container=this.getItemViewContainer(compositeView);$container.append(buffer)},appendHtml:function(compositeView,itemView,index){if(compositeView.isBuffering)compositeView.elBuffer.appendChild(itemView.el);else{var $container=this.getItemViewContainer(compositeView);$container.append(itemView.el)}},getItemViewContainer:function(containerView){if("$itemViewContainer"in containerView)return containerView.$itemViewContainer;var container,itemViewContainer=Marionette.getOption(containerView,"itemViewContainer");if(itemViewContainer){var selector=_.isFunction(itemViewContainer)?itemViewContainer():itemViewContainer;container=containerView.$(selector),container.length<=0&&throwError("The specified `itemViewContainer` was not found: "+containerView.itemViewContainer,"ItemViewContainerMissingError")}else container=containerView.$el;return containerView.$itemViewContainer=container,container},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),Marionette.Layout=Marionette.ItemView.extend({regionType:Marionette.Region,constructor:function(options){options=options||{},this._firstRender=!0,this._initializeRegions(options),Marionette.ItemView.prototype.constructor.call(this,options)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var args=Array.prototype.slice.apply(arguments),result=Marionette.ItemView.prototype.render.apply(this,args);return result},close:function(){if(!this.isClosed){this.regionManager.close();var args=Array.prototype.slice.apply(arguments);Marionette.ItemView.prototype.close.apply(this,args)}},addRegion:function(name,definition){var regions={};return regions[name]=definition,this._buildRegions(regions)[name]},addRegions:function(regions){return this.regions=_.extend({},this.regions,regions),this._buildRegions(regions)},removeRegion:function(name){return delete this.regions[name],this.regionManager.removeRegion(name)},_buildRegions:function(regions){var that=this,defaults={regionType:Marionette.getOption(this,"regionType"),parentEl:function(){return that.$el}};return this.regionManager.addRegions(regions,defaults)},_initializeRegions:function(options){var regions;this._initRegionManager(),regions=_.isFunction(this.regions)?this.regions(options):this.regions||{},this.addRegions(regions)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(region){region.reset()})},_initRegionManager:function(){this.regionManager=new Marionette.RegionManager,this.listenTo(this.regionManager,"region:add",function(name,region){this[name]=region,this.trigger("region:add",name,region)}),this.listenTo(this.regionManager,"region:remove",function(name,region){delete this[name],this.trigger("region:remove",name,region)})}}),Marionette.AppRouter=Backbone.Router.extend({constructor:function(options){Backbone.Router.prototype.constructor.apply(this,slice(arguments)),this.options=options||{};var appRoutes=Marionette.getOption(this,"appRoutes"),controller=this._getController();this.processAppRoutes(controller,appRoutes)},appRoute:function(route,methodName){var controller=this._getController();this._addAppRoute(controller,route,methodName)},processAppRoutes:function(controller,appRoutes){if(appRoutes){var routeNames=_.keys(appRoutes).reverse();_.each(routeNames,function(route){this._addAppRoute(controller,route,appRoutes[route])},this)}},_getController:function(){return Marionette.getOption(this,"controller")},_addAppRoute:function(controller,route,methodName){var method=controller[methodName];if(!method)throw new Error("Method '"+methodName+"' was not found on the controller");this.route(route,methodName,_.bind(method,controller))}}),Marionette.Application=function(options){this._initRegionManager(),this._initCallbacks=new Marionette.Callbacks,this.vent=new Backbone.Wreqr.EventAggregator,this.commands=new Backbone.Wreqr.Commands,this.reqres=new Backbone.Wreqr.RequestResponse,this.submodules={},_.extend(this,options),this.triggerMethod=Marionette.triggerMethod},_.extend(Marionette.Application.prototype,Backbone.Events,{execute:function(){var args=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,args)},request:function(){var args=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,args)},addInitializer:function(initializer){this._initCallbacks.add(initializer)},start:function(options){this.triggerMethod("initialize:before",options),this._initCallbacks.run(options,this),this.triggerMethod("initialize:after",options),this.triggerMethod("start",options)},addRegions:function(regions){return this._regionManager.addRegions(regions)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(region){this._regionManager.removeRegion(region)},getRegion:function(region){return this._regionManager.get(region)},module:function(moduleNames,moduleDefinition){var args=slice(arguments);return args.unshift(this),Marionette.Module.create.apply(Marionette.Module,args)},_initRegionManager:function(){this._regionManager=new Marionette.RegionManager,this.listenTo(this._regionManager,"region:add",function(name,region){this[name]=region}),this.listenTo(this._regionManager,"region:remove",function(name,region){delete this[name]})}}),Marionette.Application.extend=Marionette.extend,Marionette.Module=function(moduleName,app){this.moduleName=moduleName,this.submodules={},this._setupInitializersAndFinalizers(),this.app=app,this.startWithParent=!0,this.triggerMethod=Marionette.triggerMethod},_.extend(Marionette.Module.prototype,Backbone.Events,{addInitializer:function(callback){this._initializerCallbacks.add(callback)},addFinalizer:function(callback){this._finalizerCallbacks.add(callback)},start:function(options){this._isInitialized||(_.each(this.submodules,function(mod){mod.startWithParent&&mod.start(options)}),this.triggerMethod("before:start",options),this._initializerCallbacks.run(options,this),this._isInitialized=!0,this.triggerMethod("start",options))},stop:function(){this._isInitialized&&(this._isInitialized=!1,Marionette.triggerMethod.call(this,"before:stop"),_.each(this.submodules,function(mod){mod.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),Marionette.triggerMethod.call(this,"stop"))},addDefinition:function(moduleDefinition,customArgs){this._runModuleDefinition(moduleDefinition,customArgs)},_runModuleDefinition:function(definition,customArgs){if(definition){var args=_.flatten([this,this.app,Backbone,Marionette,Marionette.$,_,customArgs]);definition.apply(this,args)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new Marionette.Callbacks,this._finalizerCallbacks=new Marionette.Callbacks}}),_.extend(Marionette.Module,{create:function(app,moduleNames,moduleDefinition){var module=app,customArgs=slice(arguments);customArgs.splice(0,3),moduleNames=moduleNames.split(".");var length=moduleNames.length,moduleDefinitions=[];return moduleDefinitions[length-1]=moduleDefinition,_.each(moduleNames,function(moduleName,i){var parentModule=module;module=this._getModule(parentModule,moduleName,app),this._addModuleDefinition(parentModule,module,moduleDefinitions[i],customArgs)},this),module},_getModule:function(parentModule,moduleName,app,def,args){var module=parentModule[moduleName];return module||(module=new Marionette.Module(moduleName,app),parentModule[moduleName]=module,parentModule.submodules[moduleName]=module),module},_addModuleDefinition:function(parentModule,module,def,args){var fn,startWithParent;_.isFunction(def)?(fn=def,startWithParent=!0):_.isObject(def)?(fn=def.define,startWithParent=def.startWithParent):startWithParent=!0,fn&&module.addDefinition(fn,args),module.startWithParent=module.startWithParent&&startWithParent,module.startWithParent&&!module.startWithParentIsConfigured&&(module.startWithParentIsConfigured=!0,parentModule.addInitializer(function(options){module.startWithParent&&module.start(options)}))}}),Marionette}(this,Backbone,_);!function(window,doc,undef){function isFileReady(readyState){return!readyState||"loaded"==readyState||"complete"==readyState||"uninitialized"==readyState}function injectJs(src,cb,attrs,timeout,err,internal){var done,i,script=doc.createElement("script");timeout=timeout||yepnope.errorTimeout,script.src=src;for(i in attrs)script.setAttribute(i,attrs[i]);cb=internal?executeStack:cb||noop,script.onreadystatechange=script.onload=function(){!done&&isFileReady(script.readyState)&&(done=1,cb(),script.onload=script.onreadystatechange=null)},sTimeout(function(){done||(done=1,cb(1))},timeout),err?script.onload():firstScript.parentNode.insertBefore(script,firstScript)}function injectCss(href,cb,attrs,timeout,err,internal){var i,link=doc.createElement("link");timeout=timeout||yepnope.errorTimeout,cb=internal?executeStack:cb||noop,link.href=href,link.rel="stylesheet",link.type="text/css";for(i in attrs)link.setAttribute(i,attrs[i]);err||(firstScript.parentNode.insertBefore(link,firstScript),sTimeout(cb,0))}function executeStack(){var i=execStack.shift();started=1,i?i.t?sTimeout(function(){("c"==i.t?yepnope.injectCss:yepnope.injectJs)(i.s,0,i.a,i.x,i.e,1)},0):(i(),executeStack()):started=0}function preloadFile(elem,url,type,splicePoint,dontExec,attrObj,timeout){function onload(first){if(!done&&isFileReady(preloadElem.readyState)&&(stackObject.r=done=1,!started&&executeStack(),preloadElem.onload=preloadElem.onreadystatechange=null,first)){"img"!=elem&&sTimeout(function(){insBeforeObj.removeChild(preloadElem)},50);for(var i in scriptCache[url])scriptCache[url].hasOwnProperty(i)&&scriptCache[url][i].onload()}}timeout=timeout||yepnope.errorTimeout;var preloadElem=doc.createElement(elem),done=0,firstFlag=0,stackObject={t:type,s:url,e:dontExec,a:attrObj,x:timeout};1===scriptCache[url]&&(firstFlag=1,scriptCache[url]=[]),"object"==elem?preloadElem.data=url:(preloadElem.src=url,preloadElem.type=elem),preloadElem.width=preloadElem.height="0",preloadElem.onerror=preloadElem.onload=preloadElem.onreadystatechange=function(){onload.call(this,firstFlag)},execStack.splice(splicePoint,0,stackObject),"img"!=elem&&(firstFlag||2===scriptCache[url]?(insBeforeObj.insertBefore(preloadElem,isGeckoLTE18?null:firstScript),sTimeout(onload,timeout)):scriptCache[url].push(preloadElem))}function load(resource,type,dontExec,attrObj,timeout){return started=0,type=type||"j",isString(resource)?preloadFile("c"==type?strCssElem:strJsElem,resource,type,this.i++,dontExec,attrObj,timeout):(execStack.splice(this.i++,0,resource),1==execStack.length&&executeStack()),this}function getYepnope(){var y=yepnope;return y.loader={load:load,i:0},y}var handler,yepnope,docElement=doc.documentElement,sTimeout=window.setTimeout,firstScript=doc.getElementsByTagName("script")[0],toString={}.toString,execStack=[],started=0,noop=function(){},isGecko="MozAppearance"in docElement.style,isGeckoLTE18=isGecko&&!!doc.createRange().compareNode,insBeforeObj=isGeckoLTE18?docElement:firstScript.parentNode,isOpera=window.opera&&"[object Opera]"==toString.call(window.opera),isIE=!!doc.attachEvent&&!isOpera,strJsElem=isGecko?"object":isIE?"script":"img",strCssElem=isIE?"script":strJsElem,isArray=Array.isArray||function(obj){return"[object Array]"==toString.call(obj)},isObject=function(obj){return Object(obj)===obj},isString=function(s){return"string"==typeof s},isFunction=function(fn){return"[object Function]"==toString.call(fn)},globalFilters=[],scriptCache={},prefixes={timeout:function(resourceObj,prefix_parts){return prefix_parts.length&&(resourceObj.timeout=prefix_parts[0]),resourceObj}};yepnope=function(needs){function satisfyPrefixes(url){var mFunc,j,prefix_parts,parts=url.split("!"),gLen=globalFilters.length,origUrl=parts.pop(),pLen=parts.length,res={url:origUrl,origUrl:origUrl,prefixes:parts};for(j=0;pLen>j;j++)prefix_parts=parts[j].split("="),mFunc=prefixes[prefix_parts.shift()],mFunc&&(res=mFunc(res,prefix_parts));for(j=0;gLen>j;j++)res=globalFilters[j](res);return res}function getExtension(url){return url.split(".").pop().split("?").shift()}function loadScriptOrStyle(input,callback,chain,index,testResult){var resource=satisfyPrefixes(input),autoCallback=resource.autoCallback;getExtension(resource.url);if(!resource.bypass)return callback&&(callback=isFunction(callback)?callback:callback[input]||callback[index]||callback[input.split("/").pop().split("?")[0]]),resource.instead?resource.instead(input,callback,chain,index,testResult):(scriptCache[resource.url]?resource.noexec=!0:scriptCache[resource.url]=1,chain.load(resource.url,resource.forceCSS||!resource.forceJS&&"css"==getExtension(resource.url)?"c":undef,resource.noexec,resource.attrs,resource.timeout),(isFunction(callback)||isFunction(autoCallback))&&chain.load(function(){getYepnope(),callback&&callback(resource.origUrl,testResult,index),autoCallback&&autoCallback(resource.origUrl,testResult,index),scriptCache[resource.url]=2}),void 0)}function loadFromTestObject(testObject,chain){function handleGroup(needGroup,moreToCome){if(needGroup){if(isString(needGroup))moreToCome||(callback=function(){var args=[].slice.call(arguments);cbRef.apply(this,args),complete()}),loadScriptOrStyle(needGroup,callback,chain,0,testResult);else if(isObject(needGroup)){needGroupSize=function(){var i,count=0;for(i in needGroup)needGroup.hasOwnProperty(i)&&count++;return count}();for(callbackKey in needGroup)needGroup.hasOwnProperty(callbackKey)&&(moreToCome||--needGroupSize||(isFunction(callback)?callback=function(){var args=[].slice.call(arguments);cbRef.apply(this,args),complete()}:callback[callbackKey]=function(innerCb){return function(){var args=[].slice.call(arguments);innerCb&&innerCb.apply(this,args),complete()}}(cbRef[callbackKey])),loadScriptOrStyle(needGroup[callbackKey],callback,chain,callbackKey,testResult))}}else!moreToCome&&complete()}var needGroupSize,callbackKey,testResult=!!testObject.test,group=testResult?testObject.yep:testObject.nope,always=testObject.load||testObject.both,callback=testObject.callback||noop,cbRef=callback,complete=testObject.complete||noop;handleGroup(group,!!always),always&&handleGroup(always)}var i,need,chain=this.yepnope.loader;if(isString(needs))loadScriptOrStyle(needs,0,chain,0);else if(isArray(needs))for(i=0;i<needs.length;i++)need=needs[i],isString(need)?loadScriptOrStyle(need,0,chain,0):isArray(need)?yepnope(need):isObject(need)&&loadFromTestObject(need,chain);else isObject(needs)&&loadFromTestObject(needs,chain)},yepnope.addPrefix=function(prefix,callback){prefixes[prefix]=callback},yepnope.addFilter=function(filter){globalFilters.push(filter)},yepnope.errorTimeout=1e4,null==doc.readyState&&doc.addEventListener&&(doc.readyState="loading",doc.addEventListener("DOMContentLoaded",handler=function(){doc.removeEventListener("DOMContentLoaded",handler,0),doc.readyState="complete"},0)),window.yepnope=getYepnope(),window.yepnope.executeStack=executeStack,window.yepnope.injectJs=injectJs,window.yepnope.injectCss=injectCss}(this,document),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory("object"==typeof exports?require("jquery"):jQuery)}(function($){function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){0===s.indexOf('"')&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s=decodeURIComponent(s.replace(pluses," ")),config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var pluses=/\+/g,config=$.cookie=function(key,value,options){if(void 0!==value&&!$.isFunction(value)){if(options=$.extend({},config.defaults,options),"number"==typeof options.expires){var days=options.expires,t=options.expires=new Date;t.setTime(+t+864e5*days)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}for(var result=key?void 0:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;l>i;i++){var parts=cookies[i].split("="),name=decode(parts.shift()),cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}key||void 0===(cookie=read(cookie))||(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return void 0===$.cookie(key)?!1:($.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key))}}),function(a){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):a(jQuery)}(function(f){function w(E){return!E||void 0!==E.allowPageScroll||void 0===E.swipe&&void 0===E.swipeStatus||(E.allowPageScroll=m),void 0!==E.click&&void 0===E.tap&&(E.tap=E.click),E||(E={}),E=f.extend({},f.fn.swipe.defaults,E),this.each(function(){var G=f(this),F=G.data(B);F||(F=new C(this,E),G.data(B,F))})}function C(a4,av){function aN(bd){if(!(aB()||f(bd.target).closest(av.excludedElements,aR).length>0)){var bc,be=bd.originalEvent?bd.originalEvent:bd,bb=a?be.touches[0]:be;return Z=g,a?W=be.touches.length:bd.preventDefault(),ag=0,aP=null,aJ=null,ab=0,a1=0,aZ=0,G=1,aq=0,aQ=aj(),M=aa(),R(),!a||W===av.fingers||av.fingers===i||aX()?(ai(0,bb),T=at(),2==W&&(ai(1,be.touches[1]),a1=aZ=au(aQ[0].start,aQ[1].start)),(av.swipeStatus||av.pinchStatus)&&(bc=O(be,Z))):bc=!1,bc===!1?(Z=q,O(be,Z),bc):(av.hold&&(af=setTimeout(f.proxy(function(){aR.trigger("hold",[be.target]),av.hold&&(bc=av.hold.call(aR,be,be.target))},this),av.longTapThreshold)),ao(!0),null)}}function a3(be){var bh=be.originalEvent?be.originalEvent:be;if(Z!==h&&Z!==q&&!am()){var bd,bc=a?bh.touches[0]:bh,bf=aH(bc);if(a2=at(),a&&(W=bh.touches.length),av.hold&&clearTimeout(af),Z=k,2==W&&(0==a1?(ai(1,bh.touches[1]),a1=aZ=au(aQ[0].start,aQ[1].start)):(aH(bh.touches[1]),aZ=au(aQ[0].end,aQ[1].end),aJ=ar(aQ[0].end,aQ[1].end)),G=a7(a1,aZ),aq=Math.abs(a1-aZ)),W===av.fingers||av.fingers===i||!a||aX()){if(aP=aL(bf.start,bf.end),al(be,aP),ag=aS(bf.start,bf.end),ab=aM(),aI(aP,ag),(av.swipeStatus||av.pinchStatus)&&(bd=O(bh,Z)),!av.triggerOnTouchEnd||av.triggerOnTouchLeave){var bb=!0;if(av.triggerOnTouchLeave){var bg=aY(this);bb=E(bf.end,bg)}!av.triggerOnTouchEnd&&bb?Z=aC(k):av.triggerOnTouchLeave&&!bb&&(Z=aC(h)),(Z==q||Z==h)&&O(bh,Z)}}else Z=q,O(bh,Z);bd===!1&&(Z=q,
O(bh,Z))}}function L(bb){var bc=bb.originalEvent;return a&&bc.touches.length>0?(F(),!0):(am()&&(W=ad),a2=at(),ab=aM(),ba()||!an()?(Z=q,O(bc,Z)):av.triggerOnTouchEnd||0==av.triggerOnTouchEnd&&Z===k?(bb.preventDefault(),Z=h,O(bc,Z)):!av.triggerOnTouchEnd&&a6()?(Z=h,aF(bc,Z,A)):Z===k&&(Z=q,O(bc,Z)),ao(!1),null)}function a9(){W=0,a2=0,T=0,a1=0,aZ=0,G=1,R(),ao(!1)}function K(bb){var bc=bb.originalEvent;av.triggerOnTouchLeave&&(Z=aC(h),O(bc,Z))}function aK(){aR.unbind(J,aN),aR.unbind(aD,a9),aR.unbind(ay,a3),aR.unbind(U,L),S&&aR.unbind(S,K),ao(!1)}function aC(bf){var be=bf,bd=aA(),bc=an(),bb=ba();return!bd||bb?be=q:!bc||bf!=k||av.triggerOnTouchEnd&&!av.triggerOnTouchLeave?!bc&&bf==h&&av.triggerOnTouchLeave&&(be=q):be=h,be}function O(bd,bb){var bc=void 0;return I()||V()||P()||aX()?((I()||V())&&(bc=aF(bd,bb,l)),(P()||aX())&&bc!==!1&&(bc=aF(bd,bb,t))):aG()&&bc!==!1?bc=aF(bd,bb,j):ap()&&bc!==!1?bc=aF(bd,bb,b):ah()&&bc!==!1&&(bc=aF(bd,bb,A)),bb===q&&a9(bd),bb===h&&(a?0==bd.touches.length&&a9(bd):a9(bd)),bc}function aF(be,bb,bd){var bc=void 0;if(bd==l){if(aR.trigger("swipeStatus",[bb,aP||null,ag||0,ab||0,W,aQ]),av.swipeStatus&&(bc=av.swipeStatus.call(aR,be,bb,aP||null,ag||0,ab||0,W,aQ),bc===!1))return!1;if(bb==h&&aV()){if(aR.trigger("swipe",[aP,ag,ab,W,aQ]),av.swipe&&(bc=av.swipe.call(aR,be,aP,ag,ab,W,aQ),bc===!1))return!1;switch(aP){case p:aR.trigger("swipeLeft",[aP,ag,ab,W,aQ]),av.swipeLeft&&(bc=av.swipeLeft.call(aR,be,aP,ag,ab,W,aQ));break;case o:aR.trigger("swipeRight",[aP,ag,ab,W,aQ]),av.swipeRight&&(bc=av.swipeRight.call(aR,be,aP,ag,ab,W,aQ));break;case e:aR.trigger("swipeUp",[aP,ag,ab,W,aQ]),av.swipeUp&&(bc=av.swipeUp.call(aR,be,aP,ag,ab,W,aQ));break;case x:aR.trigger("swipeDown",[aP,ag,ab,W,aQ]),av.swipeDown&&(bc=av.swipeDown.call(aR,be,aP,ag,ab,W,aQ))}}}if(bd==t){if(aR.trigger("pinchStatus",[bb,aJ||null,aq||0,ab||0,W,G,aQ]),av.pinchStatus&&(bc=av.pinchStatus.call(aR,be,bb,aJ||null,aq||0,ab||0,W,G,aQ),bc===!1))return!1;if(bb==h&&a8())switch(aJ){case c:aR.trigger("pinchIn",[aJ||null,aq||0,ab||0,W,G,aQ]),av.pinchIn&&(bc=av.pinchIn.call(aR,be,aJ||null,aq||0,ab||0,W,G,aQ));break;case z:aR.trigger("pinchOut",[aJ||null,aq||0,ab||0,W,G,aQ]),av.pinchOut&&(bc=av.pinchOut.call(aR,be,aJ||null,aq||0,ab||0,W,G,aQ))}}return bd==A?(bb===q||bb===h)&&(clearTimeout(aW),clearTimeout(af),Y()&&!H()?(N=at(),aW=setTimeout(f.proxy(function(){N=null,aR.trigger("tap",[be.target]),av.tap&&(bc=av.tap.call(aR,be,be.target))},this),av.doubleTapThreshold)):(N=null,aR.trigger("tap",[be.target]),av.tap&&(bc=av.tap.call(aR,be,be.target)))):bd==j?(bb===q||bb===h)&&(clearTimeout(aW),N=null,aR.trigger("doubletap",[be.target]),av.doubleTap&&(bc=av.doubleTap.call(aR,be,be.target))):bd==b&&(bb===q||bb===h)&&(clearTimeout(aW),N=null,aR.trigger("longtap",[be.target]),av.longTap&&(bc=av.longTap.call(aR,be,be.target))),bc}function an(){var bb=!0;return null!==av.threshold&&(bb=ag>=av.threshold),bb}function ba(){var bb=!1;return null!==av.cancelThreshold&&null!==aP&&(bb=aT(aP)-ag>=av.cancelThreshold),bb}function ae(){return null!==av.pinchThreshold?aq>=av.pinchThreshold:!0}function aA(){var bb;return bb=av.maxTimeThreshold&&ab>=av.maxTimeThreshold?!1:!0}function al(bb,bc){if(av.preventDefaultEvents!==!1)if(av.allowPageScroll===m)bb.preventDefault();else{var bd=av.allowPageScroll===s;switch(bc){case p:(av.swipeLeft&&bd||!bd&&av.allowPageScroll!=D)&&bb.preventDefault();break;case o:(av.swipeRight&&bd||!bd&&av.allowPageScroll!=D)&&bb.preventDefault();break;case e:(av.swipeUp&&bd||!bd&&av.allowPageScroll!=u)&&bb.preventDefault();break;case x:(av.swipeDown&&bd||!bd&&av.allowPageScroll!=u)&&bb.preventDefault()}}}function a8(){var bc=aO(),bb=X(),bd=ae();return bc&&bb&&bd}function aX(){return!!(av.pinchStatus||av.pinchIn||av.pinchOut)}function P(){return!(!a8()||!aX())}function aV(){var be=aA(),bg=an(),bd=aO(),bb=X(),bc=ba(),bf=!bc&&bb&&bd&&bg&&be;return bf}function V(){return!!(av.swipe||av.swipeStatus||av.swipeLeft||av.swipeRight||av.swipeUp||av.swipeDown)}function I(){return!(!aV()||!V())}function aO(){return W===av.fingers||av.fingers===i||!a}function X(){return 0!==aQ[0].end.x}function a6(){return!!av.tap}function Y(){return!!av.doubleTap}function aU(){return!!av.longTap}function Q(){if(null==N)return!1;var bb=at();return Y()&&bb-N<=av.doubleTapThreshold}function H(){return Q()}function ax(){return(1===W||!a)&&(isNaN(ag)||ag<av.threshold)}function a0(){return ab>av.longTapThreshold&&r>ag}function ah(){return!(!ax()||!a6())}function aG(){return!(!Q()||!Y())}function ap(){return!(!a0()||!aU())}function F(){a5=at(),ad=event.touches.length+1}function R(){a5=0,ad=0}function am(){var bb=!1;if(a5){var bc=at()-a5;bc<=av.fingerReleaseThreshold&&(bb=!0)}return bb}function aB(){return!(aR.data(B+"_intouch")!==!0)}function ao(bb){bb===!0?(aR.bind(ay,a3),aR.bind(U,L),S&&aR.bind(S,K)):(aR.unbind(ay,a3,!1),aR.unbind(U,L,!1),S&&aR.unbind(S,K,!1)),aR.data(B+"_intouch",bb===!0)}function ai(bc,bb){var bd=void 0!==bb.identifier?bb.identifier:0;return aQ[bc].identifier=bd,aQ[bc].start.x=aQ[bc].end.x=bb.pageX||bb.clientX,aQ[bc].start.y=aQ[bc].end.y=bb.pageY||bb.clientY,aQ[bc]}function aH(bb){var bd=void 0!==bb.identifier?bb.identifier:0,bc=ac(bd);return bc.end.x=bb.pageX||bb.clientX,bc.end.y=bb.pageY||bb.clientY,bc}function ac(bc){for(var bb=0;bb<aQ.length;bb++)if(aQ[bb].identifier==bc)return aQ[bb]}function aj(){for(var bb=[],bc=0;5>=bc;bc++)bb.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return bb}function aI(bb,bc){bc=Math.max(bc,aT(bb)),M[bb].distance=bc}function aT(bb){return M[bb]?M[bb].distance:void 0}function aa(){var bb={};return bb[p]=aw(p),bb[o]=aw(o),bb[e]=aw(e),bb[x]=aw(x),bb}function aw(bb){return{direction:bb,distance:0}}function aM(){return a2-T}function au(be,bd){var bc=Math.abs(be.x-bd.x),bb=Math.abs(be.y-bd.y);return Math.round(Math.sqrt(bc*bc+bb*bb))}function a7(bb,bc){var bd=bc/bb*1;return bd.toFixed(2)}function ar(){return 1>G?z:c}function aS(bc,bb){return Math.round(Math.sqrt(Math.pow(bb.x-bc.x,2)+Math.pow(bb.y-bc.y,2)))}function aE(be,bc){var bb=be.x-bc.x,bg=bc.y-be.y,bd=Math.atan2(bg,bb),bf=Math.round(180*bd/Math.PI);return 0>bf&&(bf=360-Math.abs(bf)),bf}function aL(bc,bb){var bd=aE(bc,bb);return 45>=bd&&bd>=0?p:360>=bd&&bd>=315?p:bd>=135&&225>=bd?o:bd>45&&135>bd?x:e}function at(){var bb=new Date;return bb.getTime()}function aY(bb){bb=f(bb);var bd=bb.offset(),bc={left:bd.left,right:bd.left+bb.outerWidth(),top:bd.top,bottom:bd.top+bb.outerHeight()};return bc}function E(bb,bc){return bb.x>bc.left&&bb.x<bc.right&&bb.y>bc.top&&bb.y<bc.bottom}var az=a||d||!av.fallbackToMouseEvents,J=az?d?v?"MSPointerDown":"pointerdown":"touchstart":"mousedown",ay=az?d?v?"MSPointerMove":"pointermove":"touchmove":"mousemove",U=az?d?v?"MSPointerUp":"pointerup":"touchend":"mouseup",S=az?null:"mouseleave",aD=d?v?"MSPointerCancel":"pointercancel":"touchcancel",ag=0,aP=null,ab=0,a1=0,aZ=0,G=1,aq=0,aJ=0,M=null,aR=f(a4),Z="start",W=0,aQ=null,T=0,a2=0,a5=0,ad=0,N=0,aW=null,af=null;try{aR.bind(J,aN),aR.bind(aD,a9)}catch(ak){f.error("events not supported "+J+","+aD+" on jQuery.swipe")}this.enable=function(){return aR.bind(J,aN),aR.bind(aD,a9),aR},this.disable=function(){return aK(),aR},this.destroy=function(){aK(),aR.data(B,null),aR=null},this.option=function(bc,bb){if(void 0!==av[bc]){if(void 0===bb)return av[bc];av[bc]=bb}else f.error("Option "+bc+" does not exist on jQuery.swipe.options");return null}}var p="left",o="right",e="up",x="down",c="in",z="out",m="none",s="auto",l="swipe",t="pinch",A="tap",j="doubletap",b="longtap",D="horizontal",u="vertical",i="all",r=10,g="start",k="move",h="end",q="cancel",a="ontouchstart"in window,v=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,d=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,B="TouchSwipe",n={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};f.fn.swipe=function(G){var F=f(this),E=F.data(B);if(E&&"string"==typeof G){if(E[G])return E[G].apply(this,Array.prototype.slice.call(arguments,1));f.error("Method "+G+" does not exist on jQuery.swipe")}else if(!(E||"object"!=typeof G&&G))return w.apply(this,arguments);return F},f.fn.swipe.defaults=n,f.fn.swipe.phases={PHASE_START:g,PHASE_MOVE:k,PHASE_END:h,PHASE_CANCEL:q},f.fn.swipe.directions={LEFT:p,RIGHT:o,UP:e,DOWN:x,IN:c,OUT:z},f.fn.swipe.pageScroll={NONE:m,HORIZONTAL:D,VERTICAL:u,AUTO:s},f.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:i}});;
function getParameterByName(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))}var Fortune=new Marionette.Application({articlesPerFetch:10});Fortune.navigate=function(route,options){options||(options={}),Backbone.history.navigate(route,options)},Fortune.on("initialize:before",function(){Fortune.UI=new AppLayout}),Fortune.on("initialize:after",function(){Backbone.history.start({pushState:!0,hashChange:!1})}),Fortune.reqres.setHandler("contextObjectID:get",function(){return fortune_wp_vars.object_id}),Fortune.reqres.setHandler("homepageObject:get",function(){return fortune_wp_vars.homepage}),Fortune.reqres.setHandler("URLParameter:get",function(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return null===results?"":decodeURIComponent(results[1])}),Fortune.commands.setHandler("resize:interactive:iframe",function(iframeId,height,width){var $iframe=jQuery("#"+iframeId);$iframe.length&&(isNaN(height)||$iframe.attr("height",height),isNaN(width)||$iframe.attr("height",width))}),Fortune.globalElementValues={superHeaderHeight:0,mainHeaderHeight:jQuery(".main-header").outerHeight(),leftRailHeaderHeight:jQuery(".left-rail-header").outerHeight(),topContentHeight:function(){var h=jQuery(".static-content").outerHeight()+jQuery(".ranking-intro-wrapper").outerHeight()+jQuery(".pushdown_multi_wrapper").outerHeight()-jQuery(".main-header").outerHeight();return h}},Fortune.reqres.setHandler("breakpoint:get",function(){var wi=jQuery(window).width();return 800>=wi?"mobile":wi>800&&1024>=wi?"tablet":wi>1024?"desktop":void 0}),function($){var $win=$(window),_isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),_isIOS=/iPhone|iPad|iPod/i.test(navigator.userAgent);repaintBrightcove=function($bcExps){$bcExps.each(function(){var $this=$(this),experienceID=$this.attr("id"),player=brightcove.api.getExperience(experienceID),experienceModule=player.getModule(brightcove.api.modules.APIModules.EXPERIENCE),$featuredVideo=$this.parent().parent(),resizeWidth=$featuredVideo.width(),resizeHeight=.5625*resizeWidth;"html"===experienceModule.experience.type&&experienceModule.setSize(resizeWidth,resizeHeight)})},_isMobile&&(_isIOS&&$win.load(function(){var $brightcoveVideos=$(".BrightcoveExperience");_.defer(repaintBrightcove,$brightcoveVideos)}),$win.on("orientationchange",function(){var $brightcoveVideos=$(".BrightcoveExperience");repaintBrightcove($brightcoveVideos)}),$win.on("resize",function(){var $brightcoveVideos=$(".BrightcoveExperience");repaintBrightcove($brightcoveVideos)}))}(jQuery),function($){AppLayout=Backbone.Marionette.Layout.extend({el:"body",events:{"click .site-nav-toggle":"toggleSiteNav","click .left-nav-toggle":"toggleLeftRail","click .search-filters li a":"toggleLeftRail"},regions:{tickerContainer:".ticker-headlines",siteNavContainer:".site-nav-content",leftRailContainer:".left-rail-container",articleContentWell:".content-well",staticContentWell:".static-content",homePageContainer:".homepage-bottom-wrapper",searchContainer:".search-wrapper",searchAutocompleteContainer:".site-search"},modals:new Array,initialize:function(){var modalNames=["subscribe","newsletter","methodology","ie8"];this.initModals(modalNames),this.breakpointWatcher(),this.initLeftRailState(),Fortune.on("breakpointChange:toMobile",function(eventName){this.stickyRail&&this.stickyRail.destroy(),this.toggleLeftRail("close")},this),Fortune.on("breakpointChange:fromMobile",function(eventName){this.initLeftRailState()},this),this.$el.addClass("application-ready"),fortune_wp_vars&&fortune_wp_vars.device&&this.$el.addClass(fortune_wp_vars.device+"-device")},initLeftRailState:function(){var breakpoint=Fortune.request("breakpoint:get");if($(".left-rail-container").length>0){if("mobile"!==breakpoint){var stickyRail=this.initStickyRail();stickyRail.stick()}"mobile"===breakpoint&&this.toggleLeftRail("close")}},breakpointWatcher:function(){var oldwidth=width=$(window).width();$(window).resize(function(){oldwidth=width,width=$(window).width(),oldwidth>=800&&width<800?Fortune.trigger("breakpointChange:toMobile"):800>oldwidth&&width>=800&&Fortune.trigger("breakpointChange:fromMobile")})},toggleSiteNav:function(e){return"undefined"!=typeof e&&(e.preventDefault(),e.stopPropagation()),$("body").toggleClass("site-nav-active"),$("body").toggleClass("left-rail-active"),$("body").hasClass("site-nav-active")},toggleLeftRail:function(e){"undefined"!=typeof e&&"close"!=e&&"open"!=e&&(e.preventDefault(),e.stopPropagation()),$("body").removeClass("site-nav-active");var leftRailHeight=$(window).height()-$(".main-header").height();$(".left-rail-container").height(leftRailHeight),$("body").hasClass("left-rail-active")||"close"==e?($("body").removeClass("left-rail-active"),$(".left-rail-container").css({top:-1*leftRailHeight}),$(".left-nav-toggle").css({"margin-top":0}),$(".left-rail-container .article-index").removeClass("scroll"),$("body").removeClass("left-rail-active scroll-disabled"),$(".search-wrapper .search-left-rail").css({top:-1*leftRailHeight}),Fortune.execute("setIsLeftRailVisible:adManager",!1)):$("body").hasClass("left-rail-active")&&"open"!=e||($("body").addClass("left-rail-active"),$(".left-nav-toggle").css({"margin-top":leftRailHeight-30}),$(".left-rail-container .article-index").addClass("scroll"),$("body").addClass("left-rail-active scroll-disabled"),$(".left-rail-active .left-rail-container").css({top:50}),$(".search-wrapper .search-left-rail").css("tablet"===fortune_wp_vars.device?{top:"110px"}:{top:"54px"}),setTimeout(function(){Fortune.execute("setLeftRailBound:adManager"),Fortune.execute("setIsLeftRailVisible:adManager",!0),Fortune.execute("loadUnloadLeftRailAdsInView:adManager")},400)),$(".left-rail-container").scrollTop(0)},initStickyRail:function(){return this.stickyRail=Fortune.request("stickyEl:components",{elSelector:".left-rail-container",posRefSelector:".static-content, .pushdown_multi_wrapper",stickToSelector:".main-header"})},initModals:function(modalNames){var modalScope=this;return $.each(modalNames,function(){$(".fortune-"+this+"-modal").length&&(modalScope.modals[this]=Fortune.request("modal:components",{elSelector:".fortune-"+this+"-modal, .fortune-modal-overlay",$config:{buttonSelector:'a[href="#'+this+'"]'}}))}),window.ie8&&this.modals.ie8.show(null,$("#ie8")),this.modals}})}(jQuery),function($){function getQueryVar(key){var s=unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(key).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));return s.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}$(document).ready(function(){$(".fortune-subscribe-modal").on("click","#sign-in-submit",function(e){var trimmedURL;return e.preventDefault(),trimmedURL=document.URL.split("?"),trimmedURL=trimmedURL[0],$("#rurl").val(trimmedURL+"?loginfailure=true"),$("#turl").val(trimmedURL),$("#sign-in-form").submit()}),"true"==getQueryVar("loginfailure")&&($('a[href="#subscribe"]').first().click(),$("#sign-in-modal-error").css("display","block"))})}(jQuery),Fortune.module("Entities",function(Entities,Fortune,Backbone,Marionette,$,_){Entities.AdManager=Backbone.Model.extend({initialize:function(attributes,options){if(void 0!=fortune_wp_vars.ad_config){var _this=this,adConfig=fortune_wp_vars.ad_config;for(var breakpointKey in adConfig.breakpoints){var breakpoint=adConfig.breakpoints[breakpointKey];for(var regionKey in breakpoint.regions){var region=breakpoint.regions[regionKey];for(var adUnitKey in region.units){var adUnit=region.units[adUnitKey];adUnit.containers=new Entities.AdUnitContainers([],{slotName:adUnitKey,region:regionKey})}}}_this.set(adConfig)}}}),Entities.AdContainer=Backbone.Model.extend({}),Entities.TaboolaContainer=Backbone.Model.extend({}),Entities.AdUnitContainers=Backbone.Collection.extend({initialize:function(attributes,options){var _this=this;_this.slotName=options.slotName,_this.region=options.region},model:Entities.AdContainer}),Entities.TaboolaContainers=Backbone.Collection.extend({model:Entities.TaboolaContainer});var API={getAdManager:function(){return adManager=new Entities.AdManager,adManager}};Fortune.reqres.setHandler("getAdManager:entities",function(){return API.getAdManager()})}),Fortune.module("Entities",function(Entities,Fortune,Backbone,Marionette,$,_){Entities.Article=Backbone.Model.extend({adInsertion:!1,initialize:function(data){this.initRightRail(data),this.linkedin(data)},url:function(){return void 0!=fortune_wp_vars.preview?"/data/preview/article/"+this.get("id")+"/":"/data/article/"+this.get("id")+"/"},linkedin:function(data){return"mobile"!==Fortune.request("breakpoint:get")&&"tablet"!==Fortune.request("breakpoint:get")||!this.get("linkedin")?void 0:(this.unset("linkedin"),data)},initRightRail:function(data){if("undefined"!=typeof data&&!$.isEmptyObject(data)){var rightRailModules=[];for(var moduleName in data.right_rail_modules){var moduleData=data.right_rail_modules[moduleName],module=new Entities.RightRailModule(moduleData);rightRailModules[moduleName]=module}var rightRailModel=new Entities.RightRail(rightRailModules);this.set("right_rail_models",rightRailModel)}}}),Entities.ArticleCollection=Backbone.Collection.extend({model:Entities.Article,endpoint:null,queryString:null,objectID:null,preview:null,page:0,starting_page:fortune_wp_vars.info.page,backpage:0,backpage_request:!1,franchiseListItemOffset:0,metadata:{},uriprefix:"/data/",initialize:function(data,options){void 0!=options.objectID&&(this.objectID=options.objectID),void 0!=options.queryString&&(this.queryString=options.queryString),this.endpoint=options.endpoint,void 0!=fortune_wp_vars.preview&&(this.preview=fortune_wp_vars.preview),this.on("add",this.cleanUp)},resetPagination:function(){this.starting_page=1,this.page=0,this.backpage=0},url:function(){var url="",page=null;if(this.backpage_request){if(page=this.starting_page+this.backpage,0>page)return;this.backpage_request=!1}else page=this.starting_page+this.page;return null!=this.preview&&(this.uriprefix="/data/preview/"),url=null!=this.objectID?this.uriprefix+this.endpoint+"/"+this.objectID+"/"+page+"/":this.uriprefix+this.endpoint+"/"+page+"/",null!=this.queryString&&(url+="?"+this.queryString),url},parse:function(data){var articleLength,i,dataList=data.list,dataArticles=data.articles,articles=[];if(dataList)for(var k in dataList)this.meta(k,dataList[k]);if("company"===this.endpoint&&dataArticles&&dataArticles.length)for(articleLength=dataArticles.length,i=0;articleLength>i;i+=1)_.findWhere(articles,{title:dataArticles[i].title})||this.findWhere({title:dataArticles[i].title})||articles.push(dataArticles[i]);else articles=data.articles;return articles},meta:function(prop,value){return void 0===value?this.metadata[prop]:void(this.metadata[prop]=value)},cleanUp:function(){if("number"!=typeof this.maxItems)return!1;if(this.length>this.maxItems)for(numToDelete=this.length-this.maxItems,i=0;i<numToDelete;i++)this.remove(this.at(i))},getArticleAfter:function(modelId){var model=this.get(modelId),nextArticleModel=this.at(this.indexOf(model)+1);return nextArticleModel?nextArticleModel.get("isClickOut")?this.getArticleAfter(nextArticleModel.get("id")):nextArticleModel:null},getArticleBefore:function(modelId){var model=this.get(modelId),nextArticleModel=this.at(this.indexOf(model)-1);return nextArticleModel?nextArticleModel.get("isClickOut")?this.getArticleBefore(nextArticleModel.get("id")):nextArticleModel:null}});var API={getArticle:function(data){var article=new Entities.Article(data);return article},getArticles:function(data,options){var articles=new Entities.ArticleCollection(data,options);return articles}};Fortune.reqres.setHandler("getArticle:entities",function(data){return API.getArticle(data)}),Fortune.reqres.setHandler("getArticles:entities",function(data,options){return API.getArticles(data,options)})}),Fortune.module("Entities",function(Entities,Fortune,Backbone,Marionette,$,_){Entities.RightRailModule=Backbone.Model.extend(),Entities.RightRail=Backbone.Model.extend();var API={getRightRailModule:function(){return rightRailModule=new Entities.RightRailModule,rightRailModule},getRightRailModules:function(){return rightRailModuleCollection=new Entities.RightRailModuleCollection,rightRailModuleCollection}};Fortune.reqres.setHandler("rightRail:entities",function(data){return API.getRightRailModule()}),Fortune.reqres.setHandler("rightRail:entities",function(data){return API.getRightRailModules()})}),Fortune.module("Entities",function(Entities,Fortune,Backbone,Marionette,$,_){Entities.SiteNavSection=Backbone.Model.extend({}),Entities.SiteNav=Backbone.Collection.extend({model:Entities.SiteNavSection,url:"/data/menu/dropdown/",parse:function(data){return data.menu_sections}});var API={getSiteNav:function(){return siteNav=new Entities.SiteNav,siteNav}};Fortune.reqres.setHandler("getSiteNav:entities",function(){return API.getSiteNav()})}),Fortune.module("Components",function(Components,Fortune,Backbone,Marionette,$,_){Fortune.Components.Modal=function(){function Modal(data){this.opts=$.extend(!0,{},this.defaults,data.$config),this.$el=$(data.elSelector),this.bind()}return Modal.prototype.defaults={closeSelector:".icon-close",buttonSelector:"",submitSelector:".newsletter-submit",interiorSelector:".fortune-modal-content",classToShow:"active",isShowing:!1,handleResize:!1,$html:$("html")},Modal.prototype.bind=function(){var _this=this;return this.opts.$html.delegate(this.opts.buttonSelector,{"click.smart-modal":function(e){return _this.show(e,$(this))}})},Modal.prototype.show=function(e,$clicked){var shownEvt,$showEl=this.$el,showOpts=this.opts;if(e&&e.preventDefault(),this.opts.isShowing)return this.$el;if(shownEvt=$.extend(!0,e,{type:"shown"}),this.isShowing=!0,this.submitClick(),this.bindClose(),$("body").addClass("scroll-disabled"),$clicked.hasClass("methodology-link"))return $(".fortune-methodology-modal").show(),$showEl.addClass(showOpts.classToShow).trigger(shownEvt);if($clicked.hasClass("site-nav-signin")||$clicked.hasClass("article-nav-signin"))return $(".fortune-subscribe-modal").show(),$showEl.addClass(showOpts.classToShow).trigger(shownEvt);if($clicked.hasClass("newsletter-signup-link")){var newsletterSlug=$clicked.data("newsletter-slug"),$newsletterForm=($(".fortune-newsletter-modal .newsletter-name"),$(".newsletter-form")),pageContext=($(".newsletter_name"),fortune_wp_vars.info.context),newsletterName="";switch("newsletter-hub"===pageContext?$("input#page-type").attr("value","nlhub"):"homepage"===pageContext&&$("input#page-type").attr("value","home"),newsletterSlug){case"daily":newsletterName="CEO_DAILY";break;case"termsheet":newsletterName="TERM_SHEET";break;case"broadsheet":newsletterName="BROADSHEET";break;case"datasheet":newsletterName="DATA_SHEET";break;case"powersheet":newsletterName="POWER_SHEET";break;case"worldsmostpowerfulwomen":newsletterName="WMPW";break;case"brainstormhealth":newsletterName="DIGITAL_HEALTH";break;case"raceahead":newsletterName="RACEAHEAD";break;case"trumponomicsdaily":newsletterName="TRUMPONOMICS_DAILY";break;default:newsletterName="CEO_DAILY"}return $newsletterForm.find("[name=newsletter_name]").val(newsletterName),$newsletterForm.attr("target","_blank"),$newsletterForm.attr("action","https://pages.email.fortune.com/newsletters/"),$newsletterForm.submit(),!0}},Modal.prototype.hide=function(e){return e&&e.preventDefault(),this.opts.isShowing=!1,this.unbindClose(),$("body").removeClass("scroll-disabled"),$("#fortune_newsletter_submit_message").hide(),$(".fortune-methodology-modal").hide(),$(".fortune-subscribe-modal").hide(),$("#newsletter-subscribe-email").val(""),$("#recaptcha-error-msg").html(""),$(".g-recaptcha").html(""),$("input[name='recaptcha-response']").val(""),this.$el.removeClass(this.opts.classToShow).trigger("hidden")},Modal.prototype.bindClose=function(e){var _this=this;return this.opts.$html.on({"click.smart-modal-close":function(e){var $targ,isCloseBtn,isNotModal,isRecaptchaActive;return $targ=$(e.target||e.sourceElement),isRecaptchaActive=$targ[0]&&$targ[0].nextSibling&&"g-recaptcha-bubble-arrow"===$targ[0].nextSibling.className?!0:!1,isCloseBtn=$targ.is(_this.opts.closeSelector||$(_this.opts.closeSelector).has($targ).length>0),isNotModal=!$(_this.opts.interiorSelector).has($targ).length>0&&!$(_this.opts.interiorSelector).is($targ),!isNotModal&&!isCloseBtn||isRecaptchaActive?void 0:(e.preventDefault(),_this.hide())}})},Modal.prototype.submitClick=function(e){var _this=this,$newsletterEmail=$("#newsletter-subscribe-email");return this.opts.$html.on({"click.newsletter-submit":function(e){var $targ,isSubmitBtn,hasValidation,mailFormat;if($targ=$(e.target||e.sourceElement),hasValidation=Modernizr.input.required,mailFormat=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,isSubmitBtn=$targ.is(_this.opts.submitSelector||$(_this.opts.submitSelector).has($targ).length>0))if(hasValidation||null!==$newsletterEmail.val().match(mailFormat)){if(hasValidation)if(null===$newsletterEmail.val().match(mailFormat))$newsletterEmail.attr("placeholder","Please use a valid Email Address"),$newsletterEmail.val(""),$("html").hasClass("is-ie")&&$newsletterEmail.val("email@fortune.com");else{if("undefined"!=grecaptcha&&""==grecaptcha.getResponse())return $("#recaptcha-error-msg").html("Please verify that you are not a robot."),!1;$(".fortune-modal-form").hide(),$("#fortune_newsletter_submit_message").show(),$("#fortune_newsletter_submit_message").css({display:"inline","overflow-x":"scroll"}),setTimeout(function(){$("#fortune_newsletter_submit_message").css("display","block")},100)}}else $newsletterEmail.attr("placeholder","Please use a valid Email Address"),$newsletterEmail.val("")}})},Modal.prototype.unbindClose=function(e){return this.opts.$html.off(".smart-modal-close")},Modal.prototype.destroy=function(){return this.opts.$html.off(".smart-modal .smart-modal-close"),this.$el.off(".smart-modal").removeData(".smart-modal")},Modal}(),Fortune.reqres.setHandler("modal:components",function(data){return new Components.Modal(data)})}),function(){for(var method,noop=function(){},methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],length=methods.length,console=window.console=window.console||{};length--;)method=methods[length],console[method]||(console[method]=noop)}();try{getParameterByName("debugads")&&localStorage&&(localStorage.debugads=getParameterByName("debugads"))}catch(err){}try{getParameterByName("noads")&&localStorage&&(localStorage.noads=getParameterByName("noads"))}catch(err){}try{getParameterByName("testads")&&sessionStorage&&(sessionStorage.testads=getParameterByName("testads"))}catch(err){}try{localStorage&&"1"===localStorage.debugads?TiiAdsIsDebugMode=function(){return!0}:TiiAdsIsDebugMode=function(){return!1}}catch(err){}TGX_SITE_CONFIG={comscore:!1,realvu:!0,gpt_sync_mode:"async",refresh_oop_slot:!0},Fortune.module("AdManager",function(AdManager,Fortune,Backbone,Marionette,$,_){var _adTimeout,_adSize,_ad,_adNativo,_cmAd,_doc=document,_win=window,_$win=$(_win),_$body=$("body"),_winAppHeight=_$win.height(),_winAppWidth=_$win.width(),_$leftRail=_$body.find(".left-rail-container"),_fortuneWpVarsRef=fortune_wp_vars,_device=_fortuneWpVarsRef&&_fortuneWpVarsRef.device?_fortuneWpVarsRef.device:"desktop",_$leftRailElAds=[],_$contentWellElAds=[],_elLeftRailArticleIndex=_$body.find(".article-index").get(0),_elLeftRailTop=0,_elLeftRailBottom=0,_elLeftRailLeft=0,_elLeftRailRight=0,_adFactory=null,_adConfig=null,_currentZone=null,_isLeftRailVisible=null,_isTabletPortraitMode="tablet"===_device&&_winAppHeight>_winAppWidth,_isTabletLandscapeMode="tablet"===_device&&_winAppWidth>_winAppHeight,_isSignedIn=_$body.hasClass("is-signed-in"),_initialLoad=!0,_initialFranchiseItemLoad=!0,PUSH_DOWN_AD_ID="pushdown-ad",HIDE_CLASS_NAME="hide-ad",LEFT_RAIL_CLASS="left-rail-ad",LEFT_RAIL_AD_PREFIX="left-rail-ad",RIGHT_RAIL_BUTTON_AD_PREFIX="ad-button",RIGHT_RAIL_AD_PREFIX="right-rail-ad",RIGHT_RAIL_AD_CLASS="right-rail-ad",RIGHT_RAIL_NATIVO_AD_PREFIX="right-rail-nativo-ad",RIGHT_RAIL_NATIVO_ARTICLE_BOTTOM_AD_PREFIX="right-rail-nativo-article-bottom-ad",ASIDE_AD_PREFIX="aside-ad",LISTICLE_AD_PREFIX="listicle-ad",CM_ROAD_BLOCK_AD_PREFIX="cm-road-block-ad",LINKEDIN_AD_PREFIX="franchise-linkedin-ad",DIVIDER_FULL_WIDTH_AD_PREFIX="divider-full-width-ad",DIVIDER_300x250_AD_PREFIX="divider-300x250-ad",MOBILE_ADHESIVE_AD="mobile-adhesive-ad",IN_ARTICLE_AD_PREFIX="in-article-ad",CM_HEADER_AD_ID="cm-header-ad",SPONSOR_AD_ID="sponsor-ad",FORT_AD_ID="fort_ad_id",MARKET_DATA_SPONSOR_ID="market-data-sponsor-ad",SEARCH_QUOTES_RIGHT_RAIL_AD_ID="logo_1_btf",HOMEPAGE_RIGHT_RAIL_AD_ID="homepage-right-rail-ad",HOMEPAGE_FULL_WIDTH_AD_ID="homepage-full-width-ad",MOBILE_TOP_AD_ID="mobile-top-ad",SECTION_RIGHT_RAIL_AD_ID="section-right-rail-ad",RANKINGS_RIGHT_RAIL_AD_ID="section-right-rail-ad",HOMEPAGE_MOBILE_TOP_AD_ID="homepage-mobile-top-ad",HOMEPAGE_MOBILE_MID_AD_ID="homepage-mobile-mid-ad",HOMEPAGE_MOBILE_STICKY_AD_ID="homepage-mobile-sticky-ad",SPECIAL_STORY_CLASS="special-story-ad",NATIVO_AD_ID="nativo-ad",GUM_GUM_AD_ID="gum-gum-ad",INJECTED_AD="f-rg-ad",INCREMENTAL_AD="incremental_ad_player",PAGES_WITH_NATIVO=["article","tagPage","authorPage","companyPage","marketsPage"],PAGES_WITH_SPONSOR_AD=["tagPage"],STATIC_PAGE_WITH_CM_HEADER_AD=["homepage","sectionPage","rankingsPage","specialStoryPage","insiderContibutorPage","insiderAnswerPage","insiderQuestionPage","specialSectionPage","franchisePage","franchisePeoplePage"],PRESERVED_AD_PARAMS=["pos","cmpos","ad_div","cmtyp"],AD_CM_SERVER="cm.fort",AD_SERVER={desktop:"3475.fort",tablet:"3475.fort",mobile:"3475.fort_mob"},AD_SIZES={desktop:{"pushdown-ad":["101x1","970x1","970x66","970x90","970x250"],logo_1_btf:["88x31"],"market-data-sponsor-ad":["170x30"],"left-rail-ad":["300x250"],"cm-header-ad":["200x50"],"right-rail-ad":["300x250","300x600"],"right-rail-article-ad":["300x250","300x600"],"section-right-rail-ad":["300x250","300x600"],"right-rail-nativo-ad":["300x250","300x600"],"right-rail-nativo-article-bottom-ad":["300x250"],"franchise-linkedin-ad":["630x40"],"divider-full-width-ad":["900x500","728x90"],"divider-first-full-width-ad":["728x90"],"divider-300x250-ad":["300x250"],"aside-ad":["300x250"],"nativo-ad":["320x80"],"special-story-ad-banner":["970x66"],"special-story-ad-small":["300x250"],"special-story-ad-large":["900x500","970x418","994x250","728x90"],"cm-road-block-ad":["840x264"],"sponsor-ad":["170x30"],"listicle-ad":["300x250","300x600"],"in-article-ad":["300x250"],"ad-button":["120x60"],"gum-gum-ad":["1x6"]},tablet:{"pushdown-ad":["970x1","101x1","970x250","970x66"],"left-rail-ad":["300x250"],"cm-header-ad":["200x50"],"market-data-sponsor-ad":["170x30"],"franchise-linkedin-ad":["630x40"],"right-rail-ad":["300x250","300x600"],"right-rail-article-ad":[],"section-right-rail-ad":["300x600"],"right-rail-nativo-ad":["300x250","300x600"],"right-rail-nativo-article-bottom-ad":["300x250"],"divider-full-width-ad":["300x250","450x375"],"divider-first-full-width-ad":["300x250","450x375"],"divider-300x250-ad":["300x250"],"aside-ad":["300x250"],"nativo-ad":["320x80"],"special-story-ad-banner":["450x375"],"special-story-ad-small":["300x250"],"special-story-ad-large":["450x375"],"cm-road-block-ad":["840x264"],"sponsor-ad":["170x30"],"listicle-ad":["300x250","450x375"],"in-article-ad":["300x250","450x375"],"ad-button":["120x60"]},mobile:{"homepage-mobile-top-ad":["300x50","320x50"],"mobile-top-ad":["300x50","320x50"],"mobile-adhesive-ad":["300x50","320x50"],"homepage-mobile-sticky-ad":["300x50","320x50"],"homepage-mobile-mid-ad":["300x250"],"left-rail-ad":["300x50","320x50","300x250"],"cm-header-ad":["200x50"],"market-data-sponsor-ad":["170x30"],"franchise-linkedin-ad":["630x40"],"right-rail-ad":["300x250"],"right-rail-article-ad":[],"section-right-rail-ad":["300x250"],"right-rail-nativo-article-bottom-ad":["300x250"],"aside-ad":["300x250"],"divider-300x250-ad":["300x50","320x50","300x250","320x240"],"nativo-ad":["320x80"],"special-story-ad-banner":["300x50","320x50"],"special-story-ad-small":["300x250"],"special-story-ad-large":["300x250"],"cm-road-block-ad":["840x264"],"sponsor-ad":["170x30"],"listicle-ad":["300x250","300x50"],"in-article-ad":["300x250","300x50"],"ad-button":["120x60"]}},_tgxDoRef=tgxDo,_tgxDoSlots=_tgxDoRef.slots,_tgxDoSlotparams=_tgxDoRef.slotparams,_renderCount=0,_clickFromTab=!1,API={nativoInit:function(){var rand=encodeURIComponent(1e9*Math.random()),ntvInit=document.createElement("script"),root=document.body.getElementsByTagName("script")[0],Nativo=window.top.Nativo=window.top.Nativo||{},articleUUID="";pageInfo=_fortuneWpVarsRef.info,pageContext=pageInfo.context,"sponsored"===pageContext&&(articleUUID=encodeURIComponent(pageInfo.ntv_a.replace(" ","+"))),Nativo.pageURL="http://fortune.com",ntvInit.type="text/javascript",("mobile"!==fortune_wp_vars.device||window.innerWidth>800||"sponsored"===fortune_wp_vars.info.context)&&(""!=articleUUID?(Nativo.onArticlesReady=function(response){Fortune.trigger("articlesReady:nativo",response)},ntvInit.src="http://adserve.postrelease.com/index.js?async=true&prx_url=http://fortune.com&ntv_ex=3&ntv_a="+articleUUID+"&rand="+rand):(Nativo.onArticlesReady=function(response){Fortune.trigger("toutResponded:nativo",response)},ntvInit.src="http://adserve.postrelease.com/init.js?async=true&ntv_m=3&rand="+rand),root.parentNode.insertBefore(ntvInit,root))},cache$AdDiv:function($adDiv){var adId=$adDiv.attr("id");$adDiv[FORT_AD_ID]=adId,$adDiv.hasClass(LEFT_RAIL_CLASS)?_$leftRailElAds.push($adDiv):_$contentWellElAds.push($adDiv)},get$AdEl:function(adId){var $adsEl,$adDiv,findObj={};return adId?($adsEl=-1!==adId.indexOf(LEFT_RAIL_AD_PREFIX)?_$leftRailElAds:_$contentWellElAds,findObj[FORT_AD_ID]=adId,$adDiv=_.findWhere($adsEl,findObj),$adDiv?$adDiv:($adDiv=_$body.find("#"+adId),$adDiv.length?(API.cache$AdDiv($adDiv),$adDiv):null)):null},isLeftAdInView:function(adId,partial,topOffset){var elAdRect,elTop,elBottom,elLeft,elRight,$elAdDiv=API.get$AdEl(adId),elAdDiv=$elAdDiv?$elAdDiv.get(0):!1;return topOffset="undefined"!=typeof topOffset?topOffset:0,elAdDiv?(elAdRect=elAdDiv.getBoundingClientRect(),elAdRect?(elTop=elAdRect.top+topOffset,elBottom=elAdRect.bottom,elLeft=elAdRect.left,elRight=elAdRect.right,elHeight=elAdRect.height,partial?_elLeftRailTop>elTop&&elBottom>_elLeftRailTop&&elLeft>=0&&elHeight>0||elTop>=_elLeftRailTop&&_elLeftRailBottom>elTop&&elLeft>=0&&elHeight>0:elTop>=_elLeftRailTop&&_elLeftRailBottom>=elBottom&&elLeft>=0&&elHeight>0):!1):!1},setIsLeftRailVisible:function(){_isLeftRailVisible=_$leftRail.length>0&&parseInt(_$leftRail.css("top"),10)>0},setIsLeftRailValue:function(value){_isLeftRailVisible=value},setLeftRailBound:function(){var leftRailRect;_elLeftRailArticleIndex=_elLeftRailArticleIndex||_$body.find(".article-index").get(0),_elLeftRailArticleIndex&&(leftRailRect=_elLeftRailArticleIndex.getBoundingClientRect(),leftRailRect&&(_elLeftRailTop=leftRailRect.top,_elLeftRailBottom=leftRailRect.bottom,_elLeftRailLeft=leftRailRect.left,_elLeftRailRight=leftRailRect.right))},getIsLeftRailVisible:function(){return _isLeftRailVisible},get$leftRailElAds:function(){return _$leftRailElAds},get$contentWellElAds:function(){return _$contentWellElAds},getArticleAdIds:function(articleModel){var articleAdIdsLength,inArticleAdsIdLength,intro_listicle_ad,listItems,listItemLength,listItemAdId,i,adIds=[],adDividerId=articleModel.get("ad_divider"),rightRailAdId=articleModel.get("rail_rail_id"),rightRailNativoAdId=articleModel.get("rail_rail_nativo_id"),rightRailNativoArticleBottomAdId=articleModel.get("rail_rail_nativo_article_bottom_id"),asideAdId=articleModel.get("aside_ad"),hasLinkedinAd=articleModel.get("linkedin")&&""!==articleModel.get("linkedin")&&"desktop"===_device,hasRoadBlockAd=articleModel.get("paid")&&!_isSignedIn,hasButtonAds=!_.isEmpty(articleModel.get("right_rail_modules"))&&articleModel.get("right_rail_modules").button_ads,isListicleArticle=articleModel.get("format")&&"fortune-post-format-list"===articleModel.get("format").slug,articleAdIds=articleModel.get("articleAdIds"),inArticleAds=articleModel.get("in_article_ad_id");if(adDividerId&&adIds.push(adDividerId),rightRailAdId&&("desktop"===_device||_isTabletLandscapeMode)&&adIds.push(rightRailAdId),rightRailNativoAdId&&"desktop"===_device&&adIds.push(rightRailNativoAdId),rightRailNativoArticleBottomAdId&&("mobile"===_device||_isTabletPortraitMode||_isTabletLandscapeMode)&&adIds.push(rightRailNativoArticleBottomAdId),asideAdId&&("desktop"===_device||_isTabletLandscapeMode)&&adIds.push(asideAdId),hasLinkedinAd&&adIds.push(LINKEDIN_AD_PREFIX+"-"+articleModel.get("id")),hasRoadBlockAd&&adIds.push(CM_ROAD_BLOCK_AD_PREFIX+"-"+articleModel.get("id")),adIds.push("f-rg-ad"),hasButtonAds){var numberOfButtonAds=4;for(i=1;numberOfButtonAds>=i;i++)adIds.push(RIGHT_RAIL_BUTTON_AD_PREFIX+"-"+i+"-"+articleModel.get("id"))}if(isListicleArticle&&(intro_listicle_ad=articleModel.get("intro_listicle_ad"),intro_listicle_ad&&adIds.push(intro_listicle_ad),listItems=articleModel.get("list_items").items))for(listItemLength=listItems.length,i=0;listItemLength>i;i+=1)listItemAdId=listItems[i].list_item_ad_id,listItemAdId&&adIds.push(listItemAdId);if(articleAdIds)for(articleAdIdsLength=articleAdIds.length,i=0;articleAdIdsLength>i;i+=1)adIds.push(articleAdIds[i]);if(inArticleAds)for(inArticleAdsIdLength=inArticleAds.length,i=0;inArticleAdsIdLength>i;i+=1)adIds.push(inArticleAds[i]);return adIds.push(GUM_GUM_AD_ID),adIds.push(MOBILE_ADHESIVE_AD),adIds},getHeaderAdId:function(){var headerAdId=[],_pageType=API.getPageType();return"mobile"===_device||_isTabletPortraitMode?[]:(_.contains(PAGES_WITH_SPONSOR_AD,_pageType)?headerAdId.push(SPONSOR_AD_ID):_.contains(STATIC_PAGE_WITH_CM_HEADER_AD,_pageType)&&headerAdId.push(CM_HEADER_AD_ID),"desktop"!==_device&&!_isTabletLandscapeMode||"homepage"!==_pageType||headerAdId.push(PUSH_DOWN_AD_ID),headerAdId)},setInitialLeftAdCache:function(){$("."+LEFT_RAIL_CLASS).each(function(){API.cache$AdDiv($(this))})},getVisibleLeftRailAdId:function(){var adIds=[],currentId=null,l=_$leftRailElAds.length;if(_isLeftRailVisible)for(;l--;)currentId=_$leftRailElAds[l].attr("id"),API.isLeftAdInView(currentId,!0)&&adIds.push(currentId);return adIds.reverse()},initialLoadAd:function(articleModel){var articleAdData=API.getArticleAdData(articleModel);API.setupTiiAdConfig(),API.initializeAdFactory(articleAdData),API.setDefaultAdfactoryParam(),API.setAdFactoryParams(articleAdData.params),API.initialArticleAdLoad(articleModel)},initialArticleAdLoad:function(articleModel){var l,$adEl,adIds,articleAdIds=API.getArticleAdIds(articleModel),visibleLeftAds=API.getVisibleLeftRailAdId(),headerAdIds=API.getHeaderAdId(),leftRailArticle=Fortune.request("railArticles:list:articles"),leftRailArticleCount=leftRailArticle?leftRailArticle.length:0;for(API.renderLeftRailAdSlot(visibleLeftAds),API.renderArticleAdsSlot(articleModel),API.renderHeaderAdSlot(headerAdIds),l=visibleLeftAds.length;l--;)$adEl=API.get$AdEl(visibleLeftAds[l]),$adEl&&$adEl.length&&$adEl.data("adLoaded",!0);adIds=visibleLeftAds.concat(headerAdIds,articleAdIds),_.contains(PAGES_WITH_NATIVO,_pageType)&&leftRailArticleCount>=7&&"mobile"!==fortune_wp_vars.device&&window.innerWidth>800&&(API.renderNativoAdSlot(1),adIds.push(NATIVO_AD_ID)),adIds.push(INCREMENTAL_AD),API.displayAds(adIds),leftRailArticleCount>=14&&_.contains(PAGES_WITH_NATIVO,_pageType)&&API.displayNativoAd(2)},loadAdFromTabClick:function(articleModel){var l,$adEl,adIds,visibleLeftAds=API.getVisibleLeftRailAdId(),headerAdIds=API.getHeaderAdId(),articleAdIds=API.getArticleAdIds(articleModel);
for(API.renderArticleAdsSlot(articleModel),API.renderHeaderAdSlot(headerAdIds),l=visibleLeftAds.length;l--;)$adEl=API.get$AdEl(visibleLeftAds[l]),$adEl&&$adEl.length&&$adEl.data("adLoaded",!0);adIds=visibleLeftAds.concat(headerAdIds,articleAdIds),API.displayAds(adIds)},loadAdFromLeftRailArticleClick:function(articleModel){var adIds,l,currentAdId,articleAdData=API.getArticleAdData(articleModel),visibleLeftAds=API.getVisibleLeftRailAdId(),headerAdIds=API.getHeaderAdId(),articleAdIds=API.getArticleAdIds(articleModel);for(articleModel.get("id")!==_adFactory.params.aid&&API.resetAdFactoryParams(articleAdData),API.renderArticleAdsSlot(articleModel),l=headerAdIds.length;l--;)currentAdId=headerAdIds[l],API.shouldReRenderAdSlot(currentAdId)&&API.reRenderHeaderAdSlot(currentAdId);for(l=visibleLeftAds.length;l--;)currentAdId=visibleLeftAds[l],API.shouldReRenderAdSlot(currentAdId)&&API.reRenderLeftRailAdSlot(currentAdId);adIds=visibleLeftAds.concat(headerAdIds,articleAdIds),API.displayAds(adIds)},loadAdFromScroll:function(articleModel){var l,currentAdId,articleAdData=API.getArticleAdData(articleModel),adIds=[],headerAdIds=[],visibleLeftAds=[];for(articleModel.get("id")!==_adFactory.params.aid&&API.resetAdFactoryParams(articleAdData),articleAdIds=API.getArticleAdIds(articleModel),headerAdIds=API.getHeaderAdId(),visibleLeftAds=API.getVisibleLeftRailAdId(),l=headerAdIds.length;l--;)currentAdId=headerAdIds[l],API.shouldReRenderAdSlot(currentAdId)&&API.reRenderHeaderAdSlot(currentAdId);for(l=visibleLeftAds.length;l--;)currentAdId=visibleLeftAds[l],API.shouldReRenderAdSlot(currentAdId)&&API.reRenderLeftRailAdSlot(currentAdId);articleAdIds[0]&&(_tgxDoSlots[articleAdIds[0]]||API.renderArticleAdsSlot(articleModel)),adIds=visibleLeftAds.concat(headerAdIds,articleAdIds),API.displayAds(adIds)},isAdInView:function(adId,buffer){var $adContainer=$("#"+adId);if(buffer||(buffer=0),$adContainer.length){var adTop=$adContainer.offset().top,winTop=_$win.scrollTop(),winBottom=winTop+_$win.height();if(winBottom+buffer>=adTop)return!0}},loadHomePageAds:function(){var headerAdIds,homePageAdData={},adIds=[];homePageAdData.params={},homePageAdData.zone="homepage",homePageAdData.params.path="/",homePageAdData.params.ctype="homepage",API.setupTiiAdConfig(),API.initializeAdFactory(homePageAdData),API.setDefaultAdfactoryParam(),API.setAdFactoryParams(homePageAdData.params),"desktop"===_device||_isTabletLandscapeMode?(headerAdIds=API.getHeaderAdId(),API.renderHeaderAdSlot(headerAdIds),API.renderRightRailAdSlot(HOMEPAGE_RIGHT_RAIL_AD_ID),API.renderMarketDataSponsorAdSlot(MARKET_DATA_SPONSOR_ID),API.renderSearchQuotesSponsorAdSlot(SEARCH_QUOTES_RIGHT_RAIL_AD_ID),""===$("#homepage-full-width-ad").html()&&(API.renderDividerFullWidthAdSlot(HOMEPAGE_FULL_WIDTH_AD_ID),adIds.push(HOMEPAGE_FULL_WIDTH_AD_ID)),adIds.push(PUSH_DOWN_AD_ID),adIds.push(HOMEPAGE_RIGHT_RAIL_AD_ID),adIds.push(MARKET_DATA_SPONSOR_ID),adIds.push(SEARCH_QUOTES_RIGHT_RAIL_AD_ID),adIds.push(CM_HEADER_AD_ID),adIds.push(GUM_GUM_AD_ID)):(API.renderHomePageMobileTopAdASlot(HOMEPAGE_MOBILE_TOP_AD_ID),API.renderHomePageMobileMidAdSlot(HOMEPAGE_MOBILE_MID_AD_ID),API.renderHomePageMobileStickyAdSlot(HOMEPAGE_MOBILE_STICKY_AD_ID),adIds.push(HOMEPAGE_MOBILE_TOP_AD_ID),adIds.push(HOMEPAGE_MOBILE_MID_AD_ID),adIds.push(HOMEPAGE_MOBILE_STICKY_AD_ID)),API.displayAds(adIds)},loadSectionPageAds:function(section){var url,paths,sectionPageAdData={},headerAdIds=API.getHeaderAdId(),adIds=[];sectionPageAdData.params={},section&&(sectionPageAdData.zone=section,sectionPageAdData.params.ch=section,url=section?"/category/"+section+"/":"/category/",paths=_.filter(url.split("/"),function(value){return value}).join(","),sectionPageAdData.params.path=paths),sectionPageAdData.params.ch=section,sectionPageAdData.params.ctype="section",API.setupTiiAdConfig(),API.initializeAdFactory(sectionPageAdData),API.setDefaultAdfactoryParam(),API.setAdFactoryParams(sectionPageAdData.params),API.renderHeaderAdSlot(headerAdIds),API.renderRightRailSectionAdSlot(SECTION_RIGHT_RAIL_AD_ID,"companion"),adIds.push(SECTION_RIGHT_RAIL_AD_ID),adIds=adIds.concat(headerAdIds),API.displayAds(adIds)},loadRankingsPageAds:function(){var rankingsPageAdData={},headerAdIds=API.getHeaderAdId(),adIds=[];rankingsPageAdData.params={},rankingsPageAdData.zone="rankings",rankingsPageAdData.params.path="/rankings/",rankingsPageAdData.params.ctype="rankings",API.setupTiiAdConfig(),API.initializeAdFactory(rankingsPageAdData),API.setDefaultAdfactoryParam(),API.setAdFactoryParams(rankingsPageAdData.params),API.renderHeaderAdSlot(headerAdIds),API.renderRightRailAdSlot(RANKINGS_RIGHT_RAIL_AD_ID),adIds.push(RANKINGS_RIGHT_RAIL_AD_ID),adIds=adIds.concat(headerAdIds),API.displayAds(adIds),API.renderGumGumAdSlot(GUM_GUM_AD_ID)},loadSpecialStoryAds:function(){var specialStoryAdData={},headerAdIds=API.getHeaderAdId(),adIds=[];specialStoryAdData.params={},specialStoryAdData.zone="specialStory",specialStoryAdData.params.path=_doc.location.pathname,specialStoryAdData.params.ctype="specialStory","specialStoryPage"===_pageType&&(specialStoryBootstrapData=_fortuneWpVarsRef.bootstrap&&_fortuneWpVarsRef.bootstrap.special_story,specialStoryBootstrapData&&(cleanSpecialStoryAdZone=API.cleanKeyValue(specialStoryBootstrapData.ad_zone),cleanSpecialStoryAdZone&&(specialStoryAdData.zone=cleanSpecialStoryAdZone),_.each(specialStoryBootstrapData.ad_params,function(item){specialStoryAdData.params[item.key]=API.cleanKeyValue(item.value)}))),API.setupTiiAdConfig(),API.initializeAdFactory(specialStoryAdData),API.setDefaultAdfactoryParam(),API.setAdFactoryParams(specialStoryAdData.params),API.renderHeaderAdSlot(headerAdIds),_$body.find("."+SPECIAL_STORY_CLASS).each(function(){var $this=$(this),id=$this.attr("id"),pos=$this.data("pos"),size=SPECIAL_STORY_CLASS+"-"+$this.data("size");API.renderAdSlot(id,_adSize[size],pos),adIds.push(id)}),adIds=adIds.concat(headerAdIds),API.displayAds(adIds)},loadSpecialSectionAds:function(){var specialSectionPageAdData={},headerAdIds=API.getHeaderAdId(),adIds=[],rightRailAdId="mobile"===_device||_isTabletPortraitMode?"mobile-right-rail-ad":"section-right-rail-ad",pageInfo=_fortuneWpVarsRef.info;specialSectionPageAdData.params={},pageInfo&&pageInfo.ad_key_values.zone&&(specialSectionPageAdData.zone=pageInfo.ad_key_values.zone),specialSectionPageAdData.params.path=_doc.location.pathname,specialSectionPageAdData.params.ctype="specialSectionPage",pageInfo&&pageInfo.ad_key_values.frnch&&(specialSectionPageAdData.params.frnch=pageInfo.ad_key_values.frnch),pageInfo&&pageInfo.ad_key_values.tags&&(specialSectionPageAdData.params.tags=pageInfo.ad_key_values.tags),pageInfo&&pageInfo.ad_params&&(specialSectionBootstrapData=pageInfo),specialSectionBootstrapData&&specialSectionPageAdData.zone&&(cleanSpecialSectionAdZone=API.cleanKeyValue(specialSectionPageAdData.zone),cleanSpecialSectionAdZone&&(specialSectionPageAdData.zone=cleanSpecialSectionAdZone),_.each(specialSectionBootstrapData.ad_params,function(item){specialSectionPageAdData.params[item.key]=API.cleanKeyValue(item.value)})),API.setAdSizes(),API.setupTiiAdConfig(),API.initializeAdFactory(specialSectionPageAdData),API.setDefaultAdfactoryParam(),API.setAdFactoryParams(specialSectionPageAdData.params),API.renderHeaderAdSlot(headerAdIds),rightRailAdId&&(API.renderRightRailAdSlot(rightRailAdId,"companion"),adIds.push(rightRailAdId)),"undefined"!=typeof rightRailNativoAdId&&(API.renderRightRailNativoAdSlot(rightRailNativoAdId,"companion"),adIds.push(rightRailNativoAdId)),adIds=adIds.concat(headerAdIds),API.displayAds(adIds),API.renderGumGumAdSlot(GUM_GUM_AD_ID)},loadInitialInsiderPageAds:function(){var $answerPageDividerAd,insiderPageAdData={},headerAdIds=API.getHeaderAdId(),adIds=[];insiderPageAdData.params={},insiderPageAdData.zone="insiderPage",insiderPageAdData.params.path=_doc.location.pathname,insiderPageAdData.params.ctype="insiderPage",API.setupTiiAdConfig(),API.initializeAdFactory(insiderPageAdData),API.setDefaultAdfactoryParam(),API.setAdFactoryParams(insiderPageAdData.params),API.renderHeaderAdSlot(headerAdIds),_$body.find("."+RIGHT_RAIL_AD_CLASS).each(function(){var $this=$(this),id=$this.attr("id"),pos=$this.data("pos");API.renderAdSlot(id,_adSize[RIGHT_RAIL_AD_CLASS],pos),adIds.push(id)}),"insiderAnswerPage"===_pageType&&($answerPageDividerAd=_$body.find(".divider-full-width-ad"),1===$answerPageDividerAd.length&&(API.renderDividerFullWidthAdSlot($answerPageDividerAd.attr("id")),adIds.push($answerPageDividerAd.attr("id")))),("mobile"===_device||_isTabletPortraitMode)&&(API.renderMobileTopAdASlot(MOBILE_TOP_AD_ID),adIds.push(MOBILE_TOP_AD_ID)),adIds=adIds.concat(headerAdIds),API.displayAds(adIds),API.renderGumGumAdSlot(GUM_GUM_AD_ID)},cleanKeyValue:function(value){return value.replace(/[^\w,\/]/g,"").toLowerCase()},setPageType:function(){_pageType=API.getPageType()},getPageType:function(){var pageInfo=_fortuneWpVarsRef.info,pageContext=pageInfo.context;return"homepage"===pageContext?"homepage":"post_tag"===pageContext?"tagPage":"category"===pageContext?"sectionPage":"page"===pageContext?"rankingsPage":"company"===pageContext?"companyPage":"markets"===pageContext?"marketsPage":"author"===pageContext?"authorPage":"franchise-list"===pageContext?_fortuneWpVarsRef.bootstrap&&_fortuneWpVarsRef.bootstrap.franchise&&"people"===_fortuneWpVarsRef.bootstrap.franchise.franchise_type?"franchisePeoplePage":"franchisePage":"sponsored"===pageContext?"sponsoredPage":"special-story"===pageContext?"specialStoryPage":"insider_network"===pageContext?"insiderContibutorPage":"insider_answer"===pageContext?"insiderAnswerPage":"insider_question"===pageContext?"insiderQuestionPage":"section-special-landing"===pageContext?"specialSectionPage":"newsletter-hub"===pageContext?"newsletterHub":"newsletter-signup"===pageContext?"newsletterSignup":"article"},getArticleAdData:function(articleModel){if(!articleModel)return!1;var paths,cleanFormat,cleanSection,cleanTopic,cleanTags,theTags,adConfig,franchiseParentSlug,cleanFranchiseParentSlug,franchiseSlug,cleanFranchiseSlug,cleanFranchiseAdZone,cleanSpons,franchiseBootstrapData,articleAdData={},section=articleModel.get("section"),format=articleModel.get("format"),id=articleModel.get("id"),tags=articleModel.get("tags"),url=articleModel.get("url"),topic=articleModel.get("primary_tag"),spons=articleModel.get("advertiser_name");return articleAdData.params={},section&&section.slug&&(cleanSection=API.cleanKeyValue(section.slug)),tags&&(theTags=_.pluck(tags,"slug").join(","),cleanTags=API.cleanKeyValue(theTags)),url&&(paths=_.filter(url.split("/"),function(value){return value}).join(",")),format&&(cleanFormat=format.name?format.name.toLowerCase():"article"),topic&&topic.slug&&(cleanTopic=API.cleanKeyValue(topic.slug)),id&&(articleAdData.params.aid=id),spons&&(cleanSpons=API.cleanKeyValue(spons)),paths&&(articleAdData.params.path=paths),cleanSection?(articleAdData.zone=cleanSection,articleAdData.params.ch=cleanSection):(articleAdData.zone="",articleAdData.params.ch=""),cleanFormat&&(articleAdData.params.ctype=cleanFormat),cleanTags&&(articleAdData.params.tags=cleanTags),cleanTopic&&(articleAdData.params.topic=cleanTopic),cleanSpons&&(articleAdData.params.spons=cleanSpons),_pageType&&(articleAdData.params.ptype=_pageType),"franchisePage"===_pageType&&(adConfig=_fortuneWpVarsRef.ad_config,franchiseParentSlug=adConfig&&adConfig.franchise_parent_slug,franchiseSlug=adConfig&&adConfig.franchise_slug,franchiseParentSlug&&(cleanFranchiseParentSlug=API.cleanKeyValue(franchiseParentSlug)),franchiseSlug&&(cleanFranchiseSlug=API.cleanKeyValue(franchiseSlug)),articleAdData.zone="rankings/"+cleanFranchiseParentSlug,articleAdData.params.topic=cleanFranchiseSlug,articleAdData.params.frnch=cleanFranchiseParentSlug),("franchisePeoplePage"===_pageType||"franchisePage"===_pageType)&&(franchiseBootstrapData=_fortuneWpVarsRef.bootstrap&&_fortuneWpVarsRef.bootstrap.franchise,franchiseBootstrapData&&(cleanFranchiseAdZone=API.cleanKeyValue(franchiseBootstrapData.ad_zone),cleanFranchiseAdZone&&(articleAdData.zone=cleanFranchiseAdZone),_.each(franchiseBootstrapData.ad_params,function(item){articleAdData.params[item.key]=API.cleanKeyValue(item.value)}))),"companyPage"===_pageType&&_fortuneWpVarsRef&&_fortuneWpVarsRef.ticker&&(articleAdData.params.symb=API.cleanKeyValue(_fortuneWpVarsRef.ticker)),articleAdData},setupTiiAdConfig:function(){"undefined"!=typeof TiiAdConfig&&(_adConfig=new TiiAdConfig(AD_SERVER[_device]),_adConfig.setCmSitename(AD_CM_SERVER),_adConfig.setdisableInitLoad(!0))},initializeAdFactory:function(articleAdData){TiiAdFactory&&_adConfig&&(_adFactory=articleAdData.zone?new TiiAdFactory(_adConfig,articleAdData.zone):new TiiAdFactory(_adConfig))},setAdFactoryParams:function(articleAdDataParams){var key;if(_adFactory.setParam)for(key in articleAdDataParams)articleAdDataParams[key]&&_adFactory.setParam(key,articleAdDataParams[key])},setDefaultAdfactoryParam:function(){_adFactory.setParam&&(""!==_doc.referrer&&_adFactory.setParam("rhost",_doc.referrer.split("/")[2]),sessionStorage&&sessionStorage.testads&&_adFactory.setParam("test",sessionStorage.testads))},setAdSizes:function(){_adSize="tablet"==_device&&_isTabletPortraitMode?AD_SIZES.mobile:AD_SIZES[_device]},getAdFactoryRef:function(){return _adFactory},getIsTabletPortraitMode:function(){return _isTabletPortraitMode},getIsTabletLandscapeMode:function(){return _isTabletLandscapeMode},getDeviceType:function(){return _device},resetRenderCount:function(){_renderCount=0},renderAdSlot:function(adId,size,pos,companion){var dim,aid,$adEl=API.get$AdEl(adId);$adEl&&$adEl.length&&(_adFactory.zone||_adFactory.params)&&!$adEl.data("loaded")&&size&&(aid=_adFactory.params.aid,size.length>0&&(dim=size[0].split("x")),_ad=_adFactory.getAd(dim[0],dim[1]),size.length>1&&_ad.setParam("sz",size.join(",")),_ad.setParam("pos",pos),_ad.setParam("ad_div",adId),$adEl.data("zone",_adFactory.zone).data("pos",pos).data("aid",aid).data("loaded",!0),companion?_ad.write(adId,"companion"):_ad.write(adId),_renderCount+=1)},renderCmAdSlot:function(adId,size,pos,type){var dim,aid,$cmAdEl=API.get$AdEl(adId);$cmAdEl&&$cmAdEl.length&&(_adFactory.params||_adFactory.zone)&&(aid=_adFactory.params.aid?_adFactory.params.aid:_adFactory.zone,dim=size[0].split("x"),_cmAd=_adFactory.getCmAd(dim[0],dim[1],pos,type),size.length>1&&_cmAd.setParam("sz",size.join(",")),_cmAd.setParam("ad_div",adId),$cmAdEl.data("zone",_adFactory.zone).data("pos",pos).data("aid",aid),_cmAd.write(adId),_renderCount+=1)},renderLeftRailAdSlot:function(adIds){"string"==typeof adIds&&(adIds=[adIds]);var currentAdEl,$currentAdEl,pos,l=adIds.length;if(0>=l)return!1;for(;l--;)currentAdEl=adIds[l],$currentAdEl=API.get$AdEl(currentAdEl),$currentAdEl&&$currentAdEl.length&&(pos=$currentAdEl.data("pos"),API.renderAdSlot(currentAdEl,_adSize[LEFT_RAIL_AD_PREFIX],pos))},renderNativoAdSlot:function(pos){var dim,aid,$adEl=API.get$AdEl(NATIVO_AD_ID),size=_adSize[NATIVO_AD_ID];$adEl.length&&(_adFactory.params||_adFactory.zone)&&(aid=_adFactory.params.aid,dim=size[0].split("x"),_adNativo=_adFactory.getAd(dim[0],dim[1]),size.length>1&&_ad.setParam("sz",size.join(",")),_adNativo.setParam("pos",pos),_adNativo.setParam("ad_div",NATIVO_AD_ID),$adEl.data("zone",_adFactory.zone).data("pos",pos).data("aid",aid),_adNativo.write(NATIVO_AD_ID))},renderDividerFullWidthAdSlot:function(adId,size){var size=size||DIVIDER_FULL_WIDTH_AD_PREFIX;API.renderAdSlot(adId,_adSize[size],2)},renderDivider300x250AdSlot:function(adId){API.renderAdSlot(adId,_adSize[DIVIDER_300x250_AD_PREFIX],2)},renderRightRailAdSlot:function(adId,companion){API.renderAdSlot(adId,_adSize[RIGHT_RAIL_AD_PREFIX],1,companion)},renderRightRailArticleAdSlot:function(adId,companion){API.renderAdSlot(adId,_adSize["right-rail-article-ad"],1,companion)},renderRightRailSectionAdSlot:function(adId,companion){API.renderAdSlot(adId,_adSize[SECTION_RIGHT_RAIL_AD_ID],1,companion)},renderRightRailNativoAdSlot:function(adId,companion){API.renderAdSlot(adId,_adSize[RIGHT_RAIL_NATIVO_AD_PREFIX],2,companion)},renderRightRailNativoArticleBottomAdSlot:function(adId,companion){API.renderAdSlot(adId,_adSize[RIGHT_RAIL_NATIVO_ARTICLE_BOTTOM_AD_PREFIX],2,companion)},renderAsideAdSlot:function(adId){API.renderAdSlot(adId,_adSize[ASIDE_AD_PREFIX],1)},renderAdButtonSlots:function(adIds){if("desktop"===_device){var initialAdPosition=1;_.each(adIds,function(adId){API.renderAdSlot(adId,_adSize[RIGHT_RAIL_BUTTON_AD_PREFIX],initialAdPosition++)})}else $(".right-rail-buttons-container").remove()},renderLinkedinAdSlot:function(adId){API.renderAdSlot(adId,_adSize[LINKEDIN_AD_PREFIX],1)},renderCmHeaderAdSlot:function(adId){"desktop"===_device?API.renderCmAdSlot(adId,_adSize[CM_HEADER_AD_ID],"globalheader","tout"):$("#cm-header-ad").remove()},renderSponsorHeaderAdSlot:function(adId){API.renderAdSlot(adId,_adSize[SPONSOR_AD_ID],1)},renderCmRoadBlockAdSlot:function(adId){API.renderCmAdSlot(adId,_adSize[CM_ROAD_BLOCK_AD_PREFIX],"submodule","tout")},renderPushDownAdSlot:function(adId){API.renderAdSlot(adId,_adSize[PUSH_DOWN_AD_ID],1)},renderGumGumAdSlot:function(adId){var gumGumAD=document.getElementById("gum-gum-ad");gumGumAD&&!gumGumAD.dataset.isSet&&(API.renderAdSlot(adId,["1x6"],1),gumGumAD.dataset.isSet=!0)},renderInjectedAd:function(adId){var injectedAd=document.getElementById("f-rg-ad");injectedAd&&!injectedAd.dataset.isSet&&(API.renderAdSlot(adId,["300x250"],1),injectedAd.dataset.isSet=!0)},renderIncrementalAd:function(adId){var increamentalAd=document.getElementById("incremental_ad_player");increamentalAd&&!increamentalAd.dataset.isSet&&(API.renderAdSlot(adId,["5x5"],1),increamentalAd.dataset.isSet=!0)},renderMarketDataSponsorAdSlot:function(adId){API.renderAdSlot(adId,_adSize[MARKET_DATA_SPONSOR_ID],1)},renderSearchQuotesSponsorAdSlot:function(adId){API.renderAdSlot(adId,_adSize[SEARCH_QUOTES_RIGHT_RAIL_AD_ID],1)},renderHomePageMobileTopAdASlot:function(adId){API.renderAdSlot(adId,_adSize[HOMEPAGE_MOBILE_TOP_AD_ID],1)},renderMobileTopAdASlot:function(adId){API.renderAdSlot(MOBILE_TOP_AD_ID,_adSize[MOBILE_TOP_AD_ID],1)},renderHomePageMobileStickyAdSlot:function(adId){API.renderAdSlot(HOMEPAGE_MOBILE_STICKY_AD_ID,_adSize[HOMEPAGE_MOBILE_STICKY_AD_ID],1)},renderHomePageMobileMidAdSlot:function(adId){API.renderAdSlot(adId,_adSize[HOMEPAGE_MOBILE_MID_AD_ID],1)},renderMobileAdhesiveAdSlot:function(){API.renderAdSlot(MOBILE_ADHESIVE_AD,_adSize[MOBILE_ADHESIVE_AD],1)},renderHeaderAdSlot:function(adIds){"string"==typeof adIds&&(adIds=[adIds]);var currentAdId,l=adIds.length;if(!(0>=l))for(;l--;)currentAdId=adIds[l],-1!==currentAdId.indexOf(CM_HEADER_AD_ID)?API.renderCmHeaderAdSlot(currentAdId):-1!==currentAdId.indexOf(SPONSOR_AD_ID)?API.renderSponsorHeaderAdSlot(currentAdId):-1!==currentAdId.indexOf(PUSH_DOWN_AD_ID)&&API.renderPushDownAdSlot(currentAdId)},renderListicleAdSlot:function(adId,pos){API.renderAdSlot(adId,_adSize[LISTICLE_AD_PREFIX],pos)},renderInArticleAdSlot:function(adId,pos){API.renderAdSlot(adId,_adSize[IN_ARTICLE_AD_PREFIX],pos)},renderArticleAdsSlot:function(articleModel){if(articleModel){var currentAdId,articleAdData,$adEl,adIds=API.getArticleAdIds(articleModel),l=adIds.length;if(!(0>=l)){_adFactory?articleModel.get("id")!==_adFactory.params.aid&&(articleAdData=API.getArticleAdData(articleModel),API.resetAdFactoryParams(articleAdData)):(articleAdData=API.getArticleAdData(articleModel),API.setupTiiAdConfig(),API.initializeAdFactory(articleAdData),API.setDefaultAdfactoryParam(),API.setAdFactoryParams(articleAdData.params));for(var buttonAds=(articleModel.get("right_rail_modules"),[]);l--;)currentAdId=adIds[l],-1!==currentAdId.indexOf(DIVIDER_FULL_WIDTH_AD_PREFIX)?articleModel.collection.first().get("id")===articleModel.get("id")?API.renderDividerFullWidthAdSlot(currentAdId,"divider-first-full-width-ad"):API.renderDividerFullWidthAdSlot(currentAdId,DIVIDER_FULL_WIDTH_AD_PREFIX):-1!==currentAdId.indexOf(DIVIDER_300x250_AD_PREFIX)?API.renderDivider300x250AdSlot(currentAdId):-1!==currentAdId.indexOf(RIGHT_RAIL_AD_PREFIX)?API.renderRightRailArticleAdSlot(currentAdId):-1!==currentAdId.indexOf(RIGHT_RAIL_NATIVO_AD_PREFIX)?API.renderRightRailNativoAdSlot(currentAdId):-1!==currentAdId.indexOf(RIGHT_RAIL_NATIVO_ARTICLE_BOTTOM_AD_PREFIX)?API.renderRightRailNativoArticleBottomAdSlot(currentAdId):-1!==currentAdId.indexOf(ASIDE_AD_PREFIX)?API.renderAsideAdSlot(currentAdId):-1!==currentAdId.indexOf(LINKEDIN_AD_PREFIX)?API.renderLinkedinAdSlot(currentAdId):-1!==currentAdId.indexOf(CM_ROAD_BLOCK_AD_PREFIX)?API.renderCmRoadBlockAdSlot(currentAdId):-1!==currentAdId.indexOf(LISTICLE_AD_PREFIX)?($adEl=API.get$AdEl(currentAdId),$adEl&&$adEl.length&&API.renderListicleAdSlot(currentAdId,$adEl.data("pos"))):-1!==currentAdId.indexOf(IN_ARTICLE_AD_PREFIX)&&($adEl=API.get$AdEl(currentAdId),$adEl&&$adEl.length&&API.renderInArticleAdSlot(currentAdId,$adEl.data("pos"))),-1!==currentAdId.indexOf(RIGHT_RAIL_BUTTON_AD_PREFIX)&&buttonAds.unshift(currentAdId);buttonAds.length&&API.renderAdButtonSlots(buttonAds),API.renderInjectedAd(INJECTED_AD),API.renderGumGumAdSlot(GUM_GUM_AD_ID),API.renderIncrementalAd(INCREMENTAL_AD),API.renderMobileAdhesiveAdSlot()}}},resetAdFactoryParams:function(articleAdData){var key,articleAdDataParams=articleAdData.params;if(articleAdData&&articleAdDataParams){for(key in _adFactory.params)_adFactory.clearParam(key);articleAdData&&articleAdData.zone?(_currentZone=articleAdData.zone,_adFactory.setZone(_currentZone)):(_currentZone="",_adFactory.setZone("")),API.setDefaultAdfactoryParam(),API.setAdFactoryParams(articleAdDataParams)}},displayAds:function(adIds,immediately){var $adEl,l=adIds.length,delay=immediately?0:300*_renderCount,newAdIds=[];0>=l||(2>_renderCount&&(delay+=200),immediately||clearTimeout(_adTimeout),_adTimeout=setTimeout(function(){for(;l--;)$adEl=API.get$AdEl(adIds[l]),$adEl&&$adEl.length&&($adEl.removeClass(HIDE_CLASS_NAME),newAdIds.push(adIds[l]));newAdIds.reverse(),_adFactory.clearRefreshAds(newAdIds,PRESERVED_AD_PARAMS),_initialLoad&&(TGX_SITE_CONFIG.refresh_oop_slot=!1,_initialLoad=!1)},delay),API.renderGumGumAdSlot(GUM_GUM_AD_ID))},displayNativoAd:function(pos){"mobile"!==fortune_wp_vars.device&&window.innerWidth>800&&(API.deleteAd(NATIVO_AD_ID),API.renderNativoAdSlot(pos),setTimeout(function(){_adFactory.clearRefreshAds([NATIVO_AD_ID],PRESERVED_AD_PARAMS)},200))},deleteAd:function(adId){var $adEl=API.get$AdEl(adId);$adEl&&$adEl.length&&($adEl.removeData(),delete _tgxDoSlots[adId],delete _tgxDoSlotparams[adId],$adEl.find("iframe").each(function(){$(this).attr("src","about:blank")}),$adEl.empty())},reRenderLeftRailAdSlot:function(adId){API.deleteAd(adId),API.renderLeftRailAdSlot(adId)},reRenderHeaderAdSlot:function(adId){API.deleteAd(adId),API.renderHeaderAdSlot(adId)},reRenderMobileAdhesiveAdSlot:function(){API.deleteAd(MOBILE_ADHESIVE_AD),API.renderAdSlot(MOBILE_ADHESIVE_AD,_adSize[MOBILE_ADHESIVE_AD],1)},shouldReRenderAdSlot:function(adId){var $adEl=API.get$AdEl(adId);return $adEl.length&&!_initialLoad&&$adEl.data("zone")!==_currentZone?!0:!1},deleteLeftRailAds:function(){clearTimeout(_adTimeout);for(var l=_$leftRailElAds.length;l--;)API.deleteAd(_$leftRailElAds[l].attr("id"));_$leftRailElAds=[]},deleteContentWellAds:function(){clearTimeout(_adTimeout);for(var l=_$contentWellElAds.length;l--;)API.deleteAd(_$contentWellElAds[l].attr("id"));_$contentWellElAds=[]},deleteAllAds:function(){API.deleteLeftRailAds(),API.deleteContentWellAds()},getClickFromTab:function(){return _clickFromTab},setClickFromTab:function(value){_clickFromTab=value},loadUnloadLeftRailAdsInView:function(){var $adEl,adId,l=_$leftRailElAds.length;if(!_isLeftRailVisible)return!1;for(;l--;)$adEl=_$leftRailElAds[l],adId=$adEl.attr("id"),API.isLeftAdInView(adId,!0,-200)&&!$adEl.data("adLoaded")&&(_tgxDoSlots[adId]?API.shouldReRenderAdSlot(adId)&&API.reRenderLeftRailAdSlot(adId):API.renderLeftRailAdSlot(adId),$adEl.data("adLoaded",!0),API.displayAds([adId],!0))},setInitialLoadToFalse:function(){_initialFranchiseItemLoad=!1},getCurrentAdFactoryAid:function(){return _adFactory.params.aid}};Fortune.reqres.setHandler("adsEnabled:adManager",function(){if("sponsored"===fortune_wp_vars.context)return!1;if(!_adConfig)return!1;var breakpointConfig=fortune_wp_vars.ad_config.breakpoints[Fortune.request("breakpoint:get")];return void 0!=breakpointConfig&&void 0!=breakpointConfig.regions}),Fortune.reqres.setHandler("leftRailAdDiv:adManager",function(pos){var leftRailAdModel=new AdManager.leftRailAdModel({pos:pos});return new AdManager.LeftRailAdView({model:leftRailAdModel})}),Fortune.commands.setHandler("hideAd:adManager",function(adId){var $adDiv=API.get$AdEl(adId);$adDiv&&$adDiv.length&&$adDiv.addClass(HIDE_CLASS_NAME)}),Fortune.commands.setHandler("updateIframeDimension:adManager",function(adId,width,height){var $adDiv=API.get$AdEl(adId),h=parseInt(height,10),w=parseInt(width,10);$adDiv&&$adDiv.length&&$adDiv.find("iframe[id*='google_ads_iframe']:first").attr("width",w).attr("height",h)}),Fortune.reqres.setHandler("getInitialLoad:adManager",function(){return _initialLoad}),Fortune.reqres.setHandler("getInitialFranchiseItemLoad:adManager",function(){return _initialFranchiseItemLoad}),Fortune.reqres.setHandler("getClickFromTab:adManager",function(){return _clickFromTab}),Fortune.commands.setHandler("setInitialFranchiseItemLoad:adManager",function(){_initialFranchiseItemLoad=!1}),Fortune.commands.setHandler("setClickFromTab:adManager",function(value){API.setClickFromTab(value)}),Fortune.commands.setHandler("cache$AdDiv:adManager",function($adDiv){API.cache$AdDiv($adDiv)}),Fortune.commands.setHandler("setIsLeftRailVisible:adManager",function(){API.setIsLeftRailVisible()}),Fortune.commands.setHandler("setIsLeftRailVisible:adManager",function(value){API.setIsLeftRailValue(value)}),Fortune.commands.setHandler("setLeftRailBound:adManager",function(){API.setLeftRailBound()}),Fortune.commands.setHandler("renderArticleAdsSlot:adManager",function(articleModel){API.renderArticleAdsSlot(articleModel)}),Fortune.commands.setHandler("initialArticleAdLoad:adManager",function(articleModel){API.initialArticleAdLoad(articleModel)}),Fortune.commands.setHandler("resetRenderCount:adManager",function(){API.resetRenderCount()}),Fortune.commands.setHandler("deleteContentWellAds:adManager",function(){API.deleteContentWellAds()}),Fortune.commands.setHandler("deleteAllAds:adManager",function(){API.deleteAllAds()}),Fortune.commands.setHandler("renderLeftRailAdSlot:adManager",function(leftRailAdId){API.renderLeftRailAdSlot(leftRailAdId)}),Fortune.commands.setHandler("loadUnloadLeftRailAdsInView:adManager",function(){API.loadUnloadLeftRailAdsInView()}),Fortune.commands.setHandler("loadArticleAd:adManager",function(articleModel){API.loadArticleAd(articleModel)}),Fortune.commands.setHandler("displayNativoAd:adManager",function(pos){API.displayNativoAd(pos)}),AdManager.API=API}),Fortune.module("AdManager",function(AdManager,Fortune,Backbone,Marionette,$,_){var API=AdManager.API;"undefined"!=typeof window.onorientationchange?"orientationchange":"resize";AdManager.listenTo(Fortune,"article:activate",function(articleModel,fromLeftRail){var activeContentWellArticle=Fortune.request("leftRail:active")?Fortune.request("activeContentWellArticle:show:articles"):null,isInitialLoad=Fortune.request("getInitialLoad:adManager"),isInitialFranchiseItemLoad=Fortune.request("getInitialFranchiseItemLoad:adManager"),clickFromTab=AdManager.API.getClickFromTab(),pageType=API.getPageType();return"franchisePeoplePage"===pageType?!1:(Fortune.execute("resetRenderCount:adManager"),void(isInitialLoad?activeContentWellArticle===articleModel&&"franchisePage"!==pageType?(API.setAdSizes(),API.setLeftRailBound(),API.setIsLeftRailVisible(),API.setInitialLoadToFalse(),"franchisePage"!==pageType&&API.nativoInit(),API.initialLoadAd(articleModel)):"franchisePage"===pageType?(isInitialFranchiseItemLoad||(API.setAdSizes(),API.setLeftRailBound(),API.setIsLeftRailVisible(),API.initialLoadAd(articleModel)),isInitialFranchiseItemLoad&&API.setInitialLoadToFalse()):"companyPage"!==pageType||isInitialLoad||"company_news"!==articleModel.get("post_type")||(API.setAdSizes(),API.setLeftRailBound(),API.setIsLeftRailVisible(),API.initialLoadAd(articleModel)):fromLeftRail?(API.deleteContentWellAds(),API.loadAdFromLeftRailArticleClick(articleModel)):clickFromTab?(API.loadAdFromTabClick(articleModel),API.setClickFromTab(!1)):API.loadAdFromScroll(articleModel)))}),AdManager.on("start",function(){API.setPageType(),$(function(){var section,ad_config,activeArticleData,insiderNetworkName,insiderBootstrap,_fortuneWpVarsRef=fortune_wp_vars,pageType=API.getPageType(),staticArticleModel=new Fortune.Entities.Article({authors:[],tags:[]});API.setAdSizes(),"homepage"===pageType?(API.loadHomePageAds(),staticArticleModel.set({title:$("title").text(),url:location.href,post_type:"homepage"})):"sectionPage"===pageType?(ad_config=_fortuneWpVarsRef.ad_config,section=ad_config?ad_config.section_name:null,section&&(staticArticleModel.set({title:$("title").text(),url:location.href,post_type:"section front",section:{name:section.toLowerCase()}}),section=API.cleanKeyValue(section)),API.loadSectionPageAds(section)):"rankingsPage"===pageType?(API.loadRankingsPageAds(),staticArticleModel.set({post_type:"rankingsLanding",title:"fortune|rankings",section:{name:"rankings landing"}}),activeArticleData=AdManager.Controller.getArticleData(staticArticleModel),AdManager.Controller.doOmniturePageView(activeArticleData)):"sponsoredPage"===pageType?API.nativoInit():"specialStoryPage"===pageType?(staticArticleModel.set({title:$("title").text(),url:location.href,post_type:"special_story"}),API.loadSpecialStoryAds()):"insiderContibutorPage"===pageType||"insiderAnswerPage"===pageType||"insiderQuestionPage"===pageType?(insiderBootstrap=_fortuneWpVarsRef&&_fortuneWpVarsRef.bootstrap&&_fortuneWpVarsRef.bootstrap.insider,insiderNetworkName=insiderBootstrap&&insiderBootstrap.network&&insiderBootstrap.network.title,insiderBootstrap&&(staticArticleModel.set({post_type:pageType,insider_network_name:insiderNetworkName,section:{name:"fortune insider"}}),"insiderContibutorPage"===pageType?staticArticleModel.set("title",insiderNetworkName):"insiderAnswerPage"===pageType?insiderBootstrap&&insiderBootstrap.answer&&(staticArticleModel.set("title",insiderBootstrap.answer.title),staticArticleModel.set("insider_question",insiderBootstrap.answer.insider_question),staticArticleModel.set("insider_network_name",insiderBootstrap.answer.insider_network_name),staticArticleModel.set("authors",insiderBootstrap.answer.authors)):"insiderQuestionPage"===pageType&&insiderBootstrap&&insiderBootstrap.question&&staticArticleModel.set("title",insiderBootstrap.question.title)),API.loadInitialInsiderPageAds()):"newsletterHub"===pageType?staticArticleModel.set({title:"Newsletter Hub",url:location.href,post_type:"newsletter-hub"}):"newsletterSignup"===pageType&&staticArticleModel.set({title:"Newsletter Signup",url:location.href,post_type:"newsletter-signup"});try{localStorage&&"1"===localStorage.debugads?$("body").addClass("debugads"):$("body").removeClass("debugads")}catch(err){}}),AdManager.listenTo(Fortune,"Special_Section:PageReady",function(){API.loadSpecialSectionAds()})}),AdManager.listenToOnce(Fortune,"leftRail:scrollApplied",function(){Fortune.request("railArticles:active:view").infiniteScroll.$viewport.on("scroll",function(){API.loadUnloadLeftRailAdsInView()})}),$(window).on("resize",function(){API.setLeftRailBound(),API.setIsLeftRailVisible()}),$(window).on("orientationchange",function(){"desktop"!==fortune_wp_vars.device&&(API.setLeftRailBound(),API.setIsLeftRailVisible(),API.setAdSizes())}),Fortune.trigger("ready:adManager")}),Fortune.module("AdManager",function(AdManager,Fortune,Backbone,Marionette,$,_){AdManager.leftRailAdModel=Backbone.Model.extend({defaults:{pos:0}}),AdManager.LeftRailAdView=Marionette.ItemView.extend({template:"left-rail-ad"})}),Fortune.module("Chartbeat",function(Chartbeat,Fortune,Backbone,Marionette,$,_){var API,_getSection=function(sectionObject){return"object"==typeof sectionObject&&"string"==typeof sectionObject.name?sectionObject.name.toLowerCase():void 0;
},_getAuthors=function(authorsArray){var i,authors=[];if(authorsArray&&authorsArray.length)for(i=0;i<authorsArray.length;i+=1)"object"==typeof authorsArray[i]&&authors.push(authorsArray[i].name);return authors.join(", ")},initCharbeat=function(charbeatCfg){window._sf_async_config=charbeatCfg,window._sf_endpt=(new Date).getTime()},intialChartbeat=function(charbeatCfg){},updateChartbeat=function(articleModel){var title,url;pSUPERFLY&&window._sf_async_config&&articleModel instanceof Backbone.Model&&(window._sf_async_config.authors=_getAuthors(articleModel.get("authors")),window._sf_async_config.sections=_getSection(articleModel.get("section")),url=articleModel.get("url"),title=articleModel.get("title"),pSUPERFLY.virtualPage(url,title))};Fortune.commands.setHandler("Chartbeat:updateChartbeat",function(articleModel){updateChartbeat(articleModel)}),API={initCharbeat:initCharbeat,intialChartbeat:intialChartbeat,updateChartbeat:updateChartbeat},Chartbeat.API=API}),Fortune.module("Chartbeat",function(Chartbeat,Fortune,Backbone,Marionette,$,_){var API=Chartbeat.API,intialChartbeatObject={uid:54731,domain:"fortune.com",useCanonical:!0};Chartbeat.listenTo(Fortune,"article:activate",function(articleModel){var activeContentWellArticle=Fortune.request("leftRail:active")?Fortune.request("activeContentWellArticle:show:articles"):null;activeContentWellArticle&&activeContentWellArticle!=articleModel&&API.updateChartbeat(articleModel)}),Chartbeat.on("start",function(charbeatCfg){API.initCharbeat(charbeatCfg),API.intialChartbeat()}),Chartbeat.start(intialChartbeatObject),Fortune.trigger("Chartbeat:ready")}),Backbone.Marionette.Renderer.render=function(template,data){return"object"==typeof template?renderTemplate=template:(templateRaw=Backbone.Marionette.TemplateCache.prototype.loadTemplate(template),renderTemplate=twig({data:templateRaw})),renderTemplate.render(data)},Backbone.Marionette.TemplateCache.prototype.loadTemplate=function(templateId){var template,charZero;return charZero=templateId.charAt(0),template="#"==charZero||"|"==charZero?Backbone.Marionette.$(templateId).html():Fortune.templates[templateId],template&&0!==template.length||(errorMessage="Could not find template: '"+templateId+"'",console.error(errorMessage,"NoTemplateError")),template},Fortune.module("Omniture",function(Omniture,Fortune,Backbone,Marionette,$,_){var fortuneVars=fortune_wp_vars,ticker=fortuneVars.ticker&&void 0!==fortuneVars.ticker?fortuneVars.ticker:"",pageContext=fortuneVars.info.context,franchiseID=fortuneVars.info.object_id,initialFranchiseLoad=!0,bootstrapData=fortuneVars.bootstrap,franchiseData=bootstrapData&&bootstrapData.franchise?bootstrapData.franchise:"",franchiseType=franchiseData&&franchiseData.franchise_type?franchiseData.franchise_type:"",franchiseTitle=franchiseData&&franchiseData.franchise_list_name?franchiseData.franchise_list_name:"",franchisePageURL=franchiseData&&franchiseData.franchise_page_url?franchiseData.franchise_page_url:"",franchiseListSection=franchiseData&&franchiseData.franchise_list_section?franchiseData.franchise_list_section:"",franchiseListName=franchiseData&&franchiseData.franchise_list_name?franchiseData.franchise_list_name:"",franchiseListYear=franchiseData&&franchiseData.franchise_list_year?franchiseData.franchise_list_year:"",insiderBootstrap=bootstrapData&&bootstrapData.insider?bootstrapData.insider:"",insiderAnswer=insiderBootstrap&&void 0!==insiderBootstrap.answer?insiderBootstrap.answer:"",answerTitle=insiderAnswer&&insiderAnswer.title?insiderAnswer.title.toLowerCase():"",insiderQuestion=insiderBootstrap&&insiderBootstrap.question?insiderBootstrap.question:"",questionTitle=insiderQuestion&&insiderQuestion.title?insiderQuestion.title.toLowerCase():"",insiderNetworkName=(insiderAnswer&&insiderAnswer.insider_question?insiderAnswer.insider_question.toLowerCase():"",insiderBootstrap&&insiderBootstrap.network&&insiderBootstrap.network.title?insiderBootstrap.network.title:""),insiderAnswerTimePublished=insiderBootstrap&&insiderBootstrap.answer&&insiderBootstrap.answer.time?insiderBootstrap.answer.time:"",insiderQuestionTimePublished=insiderBootstrap&&insiderBootstrap.question&&insiderBootstrap.question.time?insiderBootstrap.question.time:"",ArticleDecorator=function(articleModel){var decoratedObj=$.extend(!0,{},articleModel),decoratedObjAttrs=decoratedObj.attributes,utilities={checkDefined:function(prop){return prop&&void 0!==prop?prop:""},checkDefinedArray:function(arr){return arr&&void 0!==arr?arr:[]},getAuthorInfo:function(authors){var arr=[];return authors?(_.each(authors,function(author,index){return author&&void 0!==author.is_contributor?void arr.push(author.is_contributor.toLowerCase()):""}),decoratedObjAttrs.authorType=arr.join("|"),authors):void 0},getAuthors:function(authors){var arr=[];return authors?(_.each(authors,function(author,index){return author&&void 0!==author.name?void arr.push(author.name.toLowerCase()):""}),decoratedObjAttrs.authorNames=arr.join("|"),authors):void 0},getBool:function(bool){return bool&&void 0!==bool?bool:!1},getListSlug:function(url){var arr=url.split("/"),filteredURL=_.filter(arr,function(n){return""!==n});return filteredURL[filteredURL.length-1]},getPrimaryTagSlug:function(primaryTag){return primaryTag&&void 0!==primaryTag&&void 0!==primaryTag.slug?primaryTag.slug:""},getRightRailModuleID:function(module){return module&&void 0!==module&&void 0!==module.id?module.id:[]},getTags:function(tags){return tags&&void 0!==tags?_.map(tags,function(tag,index){return tag&&void 0!==tag.slug?tag.slug.toLowerCase():void 0}):[]},getTimePublished:function(timeObj){var timePublished=timeObj&&void 0!==timeObj.published?timeObj.published:"";return timePublished=timePublished.split(" ")[0]},lowerCaseName:function(obj){return obj&&void 0!==obj.name?obj.name.toLowerCase():""},lowerCaseFilter:function(str){return str&&"string"==typeof str?str.toLowerCase():str},removeDashes:function(str){return str&&"string"==typeof str&&str.replace(/-/gi," ")},removeSpecialCharacters:function(str){return str&&"string"==typeof str?str.replace(/[^\w\s]/gi,""):str}},u=utilities,decorator={advertiser_name:[u.checkDefined],authors:[u.getAuthors,u.getAuthorInfo],company_name:[u.checkDefined,u.lowerCaseFilter],format:[u.lowerCaseName],franchise_list_slug:[u.getListSlug,u.removeDashes],franchise_name:[u.lowerCaseFilter],id:[u.checkDefined],insider_network_name:[u.checkDefined],insider_question:[u.checkDefined,u.lowerCaseFilter,u.removeSpecialCharacters],nativo:[u.getBool],paid:[u.checkDefined],post_type:[u.checkDefined],primary_tag:[u.getPrimaryTagSlug],right_rail_modules:[u.getRightRailModuleID],section:[u.lowerCaseName,u.removeSpecialCharacters],seo:[u.checkDefinedArray],social:[u.checkDefinedArray],sponsored:[u.getBool],tags:[u.getTags],time:[u.getTimePublished],title:[u.checkDefined,u.lowerCaseFilter,u.removeSpecialCharacters],url:[u.checkDefined],year:[u.checkDefined]};for(var property in decoratedObjAttrs){var methods=decorator[property]||[];if(methods.length)for(var i=0;i<methods.length;i++)decoratedObjAttrs[property]=methods[i].call(this,decoratedObjAttrs[property])}return decoratedObj},API={getPageType:function(){switch(pageContext){case"homepage":return"homepage";case"post_tag":return"tagPage";case"category":return"sectionPage";case"page":return"rankingsPage";case"company":return"companyPage";case"markets":return"marketsPage";case"author":return"authorPage";case"sponsored":return"sponsoredPage";case"special-story":return"specialStoryPage";case"insider_network":return"insiderContibutorPage";case"insider_answer":return"insiderAnswerPage";case"insider_question":return"insiderQuestionPage";case"insider-landing":return"specialSectionPage";case"newsletter-hub":return"newsletterHub";case"fortune_video":return"videoPage";case"franchise-list":return"people"===franchiseType?"franchisePeoplePage":"franchisePage";case"post":return"article";case"fortune_magazine":return"article";case"section-special-landing":return"mpwLanding"}},buildStaticModel:function(){var sectionName=fortuneVars.ad_config.section_name?fortuneVars.ad_config.section_name:"",ID=fortuneVars.object_id,pageType=this.getPageType(),staticArticleModel=new Fortune.Entities.Article({authors:[],section:"",tags:[],time:"",title:"",url:""}),pageTitle=$("title").text(),pageURL=location.href;switch(pageType){case"homepage":staticArticleModel.set({post_type:"homepage",title:pageTitle,url:pageURL});break;case"franchisePage":staticArticleModel.set({id:ID,format:{name:pageContext.replace("-list","")},franchise_list_slug:pageURL,title:pageTitle,url:pageURL});break;case"franchisePeoplePage":staticArticleModel.set({franchise_list_slug:franchisePageURL,format:{name:"franchise-list-people"},franchise_name:franchiseListName,franchiseType:"People",post_type:"peopleFranchiseLanding",section:franchiseListSection,title:franchiseTitle,url:pageURL,year:franchiseListYear});break;case"sectionPage":staticArticleModel.set({id:ID,post_type:"section front",section:{name:sectionName},title:pageTitle,url:pageURL});break;case"specialStoryPage":staticArticleModel.set({authors:specialStoryModel.author,id:specialStoryModel.id,is_magazine_content:specialStoryModel.is_magazine_content,post_type:"special_story",time:specialStoryModel.time,title:specialStoryModel.title,url:pageURL});break;case"insiderContibutorPage":insiderBootstrap&&staticArticleModel.set({insider_network_name:insiderNetworkName,title:insiderNetworkName,section:{name:"fortune insider"},post_type:pageType,url:pageURL});break;case"insiderAnswerPage":insiderBootstrap&&insiderBootstrap.answer&&staticArticleModel.set({authors:insiderAnswer.authors,id:ID,insider_network_name:insiderAnswer.insider_network_name,insider_question:insiderAnswer.insider_question,post_type:pageType,section:{name:"fortune insider"},time:insiderAnswerTimePublished,title:answerTitle,url:pageURL});break;case"insiderQuestionPage":insiderBootstrap&&insiderBootstrap.question&&staticArticleModel.set({id:ID,post_type:pageType,section:{name:"fortune insider"},time:insiderQuestionTimePublished,title:questionTitle,url:pageURL});break;case"newsletterHub":staticArticleModel.set({id:ID,post_type:"newsletter_hub",title:"Newsletter Hub",url:pageURL});break;case"mpwLanding":staticArticleModel.set({id:ID,title:$("title").text(),url:location.href,post_type:"section-special-landing"})}return staticArticleModel},getFranchiseViewType:function(){var toggleText=document.getElementById("franchise-toggle-index-view").innerText;return initialFranchiseLoad?(initialFranchiseLoad=!1,"grid"):-1!==toggleText.indexOf("Grid")?"list":"grid"},makeOmnitureCall:function(articleModel){if("undefined"==typeof utag_data){var decoratedArticleModel=new ArticleDecorator(articleModel),cleanArticleData=decoratedArticleModel.attributes;this.setOmnitureProps(cleanArticleData),s_time.t()}},resetProps:function(){if(void 0!==window.s_time){s_time.events="";for(var i=0;75>i;i++)s_time["prop"+i]=""}},setOmnitureProps:function(articleData){this.resetProps();var pageName,associatedQuestion=articleData.insider_question,authorNames=(articleData.authors,articleData.authorNames),authorType=articleData.authorType,channel="fortune|",companyName=articleData&&articleData.companyName?articleData.companyName:"",contentType=articleData.content_type,magazineContentType=articleData.is_magazine_content,currentSlide=$(".current-slide").text(),format=""===articleData.format?"article":articleData.format,franchiseListSlug=articleData.franchise_list_slug,franchiseName=articleData.franchise_name,franchiseParentSlug=fortuneVars.ad_config.franchise_parent_slug,franchiseYear=articleData.year,ID=articleData.id,pageVal=articleData.paginationVal?articleData.paginationVal:"",section=void 0===articleData.section?"sponsored":articleData.section,sortType=articleData.sortType?articleData.sortType:"",tags=articleData.tags?articleData.tags.join("|"):"",timePublished=articleData.time,title=articleData.title,pageType=this.getPageType(),pageURL=location.href,pathname=location.pathname,friendlySlug="/"+pathname.split("/")[1]+"/",postType=articleData.post_type,primaryTag=articleData.primary_tag,isMethodology=articleData.isMethodology;if(void 0!==window.s_time){switch(pageName=channel,s_time.prop3=magazineContentType,s_time.prop5=primaryTag,s_time.prop7=postType,s_time.prop8=ID,s_time.prop14=pathname,s_time.prop16=section,s_time.prop26=timePublished,s_time.prop28=authorNames,s_time.prop29=authorType,s_time.prop30=title,s_time.prop67=tags,pageType){case"article":s_time.prop7=format,"gallery"===format?(pageName+=section+"|"+format+"|"+title+"|"+currentSlide,s_time.prop7=format):"list"===format?(pageName+=section+"|"+format+"icle|"+title,s_time.prop7=format+"icle"):pageName+=format+"|"+section+"|"+title,-1!==pathname.indexOf("/markets")&&(s_time.prop2="market data"),"teaser"===contentType&&(s_time.prop33=timePublished+"|"+title),"magazine"===magazineContentType&&(s_time.prop27=contentType);break;case"companyPage":pageName+=title?format+"|"+section+"|"+title:format+"|stock data|"+ticker,s_time.prop16=format,s_time.prop45=ticker,s_time.prop2="market data";break;case"homepage":pageName="fortune|home",s_time.prop7="section front",s_time.prop16="home";break;case"franchisePage":pageName+="management|"+pageContext.replace("-list","")+"|"+franchiseParentSlug,(-1!==franchiseParentSlug.indexOf("best-companies")||-1!==franchiseParentSlug.indexOf("500"))&&(pageName=channel+"management|"+pageContext.replace("-list","")+"|"+franchiseName+"_"+franchiseYear,isMethodology&&(pageName+="|methodology"),companyName&&(pageName+="|"+companyName),sortType&&(pageName+="|"+sortType),pageVal&&(pageName+="|"+pageVal)),s_time.prop7="franchise",s_time.prop8=franchiseID,s_time.prop12=franchiseName+"_"+franchiseYear,s_time.prop14=friendlySlug,s_time.prop16="management",s_time.prop30=franchiseName;break;case"franchisePeoplePage":var view=this.getFranchiseViewType();pageName+="franchise|"+section+"|"+title+" "+view+" view",s_time.prop5=franchiseListSlug,s_time.prop7="franchise",s_time.prop8=franchiseID,s_time.prop12=franchiseListSlug+"_"+franchiseYear,s_time.prop14=friendlySlug,s_time.prop16=section,s_time.prop30=franchiseListSlug;break;case"specialSectionPage":pageName+="section front|"+title,s_time.prop7="section front",s_time.prop16=title,s_time.prop30="";break;case"specialStoryPage":pageName+=pageContext+"|"+title,s_time.prop7="special story";break;case"newsletter_hub":pageName+="newsletter hub",s_time.prop7="",s_time.prop30="Newsletter Hub";break;case"mpwLanding":pageName+="section front|"+title,s_time.prop16=section,s_time.prop30="";break;case"section front":pageName+="section front|"+section,s_time.prop16=section,s_time.prop30="";break;case"sectionPage":pageName+="management|"+section+"|"+postType;break;case"videoPage":pageName+="video|"+section+"|"+title,s_time.prop7="video"}switch(section){case"fortune insider":s_time.prop7="contributor network",s_time.prop16=section,"insiderContibutorPage"===pageType?(pageName+=section+"|contributor network|"+title+" all questions",s_time.prop30=insiderNetworkName+"|all questions"):"insiderAnswerPage"===pageType?(pageName+=section+"|contributor network|"+title+"|answer",s_time.prop30=associatedQuestion):"insiderQuestionPage"===pageType&&(pageName+=section+"|contributor network|"+title,s_time.prop30=questionTitle)}pageURL.indexOf("/?s=")>-1&&(pageName+="search",s_time.events="event34",s_time.prop7="search results",s_time.prop16="search",s_time.prop18=pageURL.substring(pageURL.indexOf("/?s=")+4),s_time.prop30=""),s_time.pageName=pageName.toLowerCase()}}};Omniture.API=API}),Fortune.module("Omniture",function(Omniture,Fortune,Backbone,Marionette,$,_){var API=Omniture.API,fortuneVars=fortune_wp_vars,pageContext=fortuneVars.info.context,pageType=API.getPageType();fortuneVars.ad_config.franchise_parent_slug;Omniture.on("start",function(articleModel){$(document).ready(function(articleModel){var staticArticleModel=API.buildStaticModel();$("body").on("click","[data-event]",function(e){var srcEl=$(e.srcElement);"undefined"==typeof omniTrackEv||srcEl.is("[data-event-info]")||omniTrackEv($(this).data("event"))});var isArticleTypePage="post"===pageContext||"post_tag"===pageContext||"sponsored"===pageContext;isArticleTypePage||"franchisePage"===pageType||"videoPage"===pageType||"companyPage"===pageType||"none"===pageType||staticArticleModel&&API.makeOmnitureCall(staticArticleModel)}),Fortune.trigger("ready:Omniture")}),Omniture.listenTo(Fortune,"article:activate",function(articleModel){var activeContentWellArticle=Fortune.request("leftRail:active")?Fortune.request("activeContentWellArticle:show:articles"):null;activeContentWellArticle!==articleModel&&API.makeOmnitureCall(articleModel)}),Omniture.listenTo(Fortune,"slidechanged:articles:show:galleries",function(articleModel){API.makeOmnitureCall(articleModel)}),Omniture.listenTo(Fortune,"PeopleFranchise:changeFranchiseIndexView",function(){var staticArticleModel=API.buildStaticModel();API.makeOmnitureCall(staticArticleModel)})}),Fortune.module("Tealium",function(Tealium,Fortune,Backbone,Marionette,$,_){var initialFranchiseLoad=!0,API={userEvent:function(eventName){var event={};utag.link(event)},getUdo:function(articleModelID,additionalPageData){var articleID=null!==articleModelID&&void 0!==articleModelID?articleModelID:"",url=window.location.origin+"/tealium-api/id/"+articleID;$.getJSON(url,function(data){data=_.extend(data,additionalPageData),utag.view(data)})},getFranchiseViewType:function(){var listState,toggleText=$("#franchise-toggle-index-view").text();return initialFranchiseLoad?(initialFranchiseLoad=!1,listState="list"):listState=-1!==toggleText.indexOf("Grid")?"list":"grid",listState}};Tealium.API=API}),Fortune.module("Tealium",function(Tealium,Fortune,Backbone,Marionette,$,_){function bindEventListeners(){Tealium.listenTo(Fortune,"article:activate",function(articleModel){var activeContentWellArticle=Fortune.request("leftRail:active")?Fortune.request("activeContentWellArticle:show:articles"):null,id=_.isEmpty(articleModel)?"":articleModel.get("id");activeContentWellArticle!==articleModel&&null!==activeContentWellArticle&&"companyPage"!==activeContentWellArticle.get("post_type")&&API.getUdo(id)}),Tealium.listenTo(Fortune,"peopleFranchise:tealium:item:activate",function(articleModel){var id=_.isEmpty(articleModel)?"":articleModel.get("id");API.getUdo(id)}),Tealium.listenTo(Fortune,"slidechanged:articles:show:galleries",function(articleModel){var id=_.isEmpty(articleModel)?"":articleModel.get("id"),page_number=$(".current-slide").text(),galleryData={page_number:page_number};API.getUdo(id,galleryData)}),Tealium.listenTo(Fortune,"PeopleFranchise:tealium:changeFranchiseIndexView",function(){var id=utag_data&&!_.isEmpty(utag_data.content_id)?utag_data.content_id:"",listView=API.getFranchiseViewType(),peopleFranchiseData={franchise_list_view_type:listView};API.getUdo(id,peopleFranchiseData)}),Tealium.listenTo(Fortune,"Search:tealium:numFound",function(numFound){utag_data.search_results=numFound}),Tealium.listenTo(Fortune,"company:item:activate",function(itemView){utag_data.page_name=itemView.model.get("title"),utag_data.content_id=itemView.model.get("id"),utag.view(utag_data)})}var API=Tealium.API;Tealium.on("start",function(){"undefined"!=typeof utag&&bindEventListeners()}),Fortune.trigger("ready:Tealium")}),Fortune.module("simpleReach",function(simpleReach,Fortune,Backbone,Marionette,$,_){simpleReach.API={makeSimpleReachCall:function(simpleReachConfig){try{SPR.Reach.collect(simpleReachConfig)}catch(e){}},SimpleReachConfig:function(articleModel){var clonedModel=jQuery.extend(!0,{},articleModel),authors=clonedModel.get("authors"),section=(clonedModel.get("id"),void 0!==clonedModel.get("section")?clonedModel.get("section"):""),tags=clonedModel.get("tags"),time=clonedModel.get("time"),title=clonedModel.get("title"),url=clonedModel.get("absolute_url");if(section&&void 0!==section.slug)var cleanSectionSlug=filters.cleanValue(section.slug);if(tags)var theTags=filters.getIndividual(tags,"slug"),cleanTags=filters.cleanValue(theTags);if(authors)var theAuthors=filters.getIndividual(authors,"name"),cleanAuthors=filters.cleanValue(theAuthors);if(time)var cleanTime=filters.getCleanTime(time);var simpleReachConfig={authors:cleanAuthors,channels:cleanSectionSlug,date:cleanTime,domain:"fortune.com",iframe:!0,ignore_errors:!0,page_url:url,pid:"538890ee97b0c992bf00006b",tags:cleanTags,title:title,url:url};return simpleReachConfig}};var filters={cleanValue:function(value){return value.replace(/[^\w,\/]/g,"").toLowerCase()},getIndividual:function(array,propertyString){return _.pluck(array,propertyString).join(",")},getCleanTime:function(time){return time&&time.published?time.published.substring(0,10):null}}}),Fortune.module("simpleReach",function(simpleReach,Backbone,Marionette,$,_){var API=simpleReach.API;simpleReach.listenTo(Fortune,"article:activate",function(articleModel){var activeContentWellArticle=Fortune.request("leftRail:active")?Fortune.request("activeContentWellArticle:show:articles"):null;if(activeContentWellArticle!==articleModel&&!articleModel.attributes.nativo){var simpleReachConfig=new API.SimpleReachConfig(articleModel);API.makeSimpleReachCall(simpleReachConfig)}})}),Fortune.module("siteMeta",function(siteMeta,Fortune,Backbone,Marionette,$,_){var API={updateSiteMeta:function(articleModel){if(articleModel){if(!document.addEventListener)return;var $title=($("head"),$("title")),$description=$('meta[name="description"]'),$keywords=$('meta[name="keywords"]'),$newsKeywords=$('meta[name="news_keywords"]'),tags=articleModel.get("tags"),title=articleModel.get("title"),description=articleModel.get("excerpt"),seo=articleModel.get("seo"),keywords=[];tags&&$.each(tags,function(key,value){keywords.push(value.slug)}),$title.length&&(seo&&seo.seo_title?$title.text(seo.seo_title):title&&$title.length&&$title.text(title)),$description.length&&(seo&&seo.seo_description&&$description.attr("content",seo.seo_description),description&&$description.attr("content",description),seo&&seo.additional_meta&&$description.after(seo.additional_meta)),$keywords.length&&(seo&&void 0!==seo.seo_keywords&&$keywords.attr("content",seo.seo_keywords),keywords&&void 0!==keywords&&$keywords.attr("content",keywords)),$newsKeywords.length?$newsKeywords.length&&seo&&void 0!==seo.seo_news_keywords&&$newsKeywords.attr("content",seo.seo_news_keywords):seo&&void 0!==seo.seo_news_keywords&&$keywords.after('<meta name="news_keywords" content="'+seo.seo_news_keywords+'" />')}}};siteMetaAPI=API}),Fortune.module("siteMeta",function(siteMeta,Fortune,Backbone,Marionette,$,_){var API=siteMetaAPI;siteMeta.listenTo(Fortune,"article:activate",function(articleModel){var activeContentWellArticle=Fortune.request("leftRail:active")?Fortune.request("activeContentWellArticle:show:articles"):null,isInitialLoad=Fortune.request("getInitialLoad:adManager");if(activeContentWellArticle!==articleModel&&!isInitialLoad)try{API.updateSiteMeta(articleModel)}catch(e){}})}),Fortune.module("SiteNav",function(SiteNav,Fortune,Backbone,Marionette,$,_){var initializeSiteNav=function(){return siteNav=Fortune.request("getSiteNav:entities"),siteNav},initializeSiteNavView=function(collection){return siteNavView=new SiteNav.SiteNavView({collection:collection}),siteNavView.$el.hover(function(){Fortune.trigger("leftrail:mouseEnter")},function(){Fortune.trigger("leftrail:mouseLeave")}),initScrollbarHover(siteNavView),siteNavView},initScrollbarHover=function(siteNavView){Fortune.on("leftrail:mouseEnter",function(){$(".site-nav-active").addClass("scroll")}),Fortune.on("leftrail:mouseLeave",function(){$(".site-nav-active").removeClass("scroll")})};SiteNav.on("start",function(){siteNav=initializeSiteNav(),siteNavView=initializeSiteNavView(siteNav),siteNav.fetch({success:function(){_this=this,Fortune.UI.siteNavContainer.show(siteNavView)}})})}),Fortune.module("SiteNav",function(SiteNav,Fortune,Backbone,Marionette,$,_){SiteNav.SiteNavSectionView=Marionette.ItemView.extend({template:"sitenav-section",tagName:"ul",className:function(){return"site-nav-section "+this.model.attributes.classes}}),SiteNav.SiteNavView=Marionette.CollectionView.extend({itemView:SiteNav.SiteNavSectionView})}),Fortune.module("TrackedContext",function(TrackedContext,Fortune,Backbone,Marionette,$,_){Fortune.reqres.setHandler("trackedcontext:iscontext",function(){return"page"===fortune_wp_vars.context}),TrackedContext.on("start",function(){Fortune.request("trackedcontext:iscontext")&&Fortune.trigger("trackedcontext:loaded")})});;
Fortune.module("FranchiseCompany2",function(FranchiseCompany2,Fortune,Backbone,Marionette,$,_){FranchiseCompany2.BaseCollectionView=Marionette.CollectionView.extend({renderItemView:function(view,index){view.render(),view.model&&view.model.get("isPreRended")?view.model.set("isPreRended",!1):this.appendHtml(this,view,index)},appendHtml:function(collectionView,itemView,index){return 0===index?collectionView.$el.prepend(itemView.el):collectionView.$el.append(itemView.el)}})}),Fortune.module("FranchiseCompany2",function(FranchiseCompany2,Fortune,Backbone,Marionette,$,_){FranchiseCompany2.BaseCompositeView=Marionette.CompositeView.extend({render:function(){if(this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender(),!this.model.get("isPreRended")){var html=this.renderModel();this.$el.html(html)}return this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this}})}),Fortune.module("FranchiseCompany2",function(FranchiseCompany2,Fortune,Backbone,Marionette,$,_){FranchiseCompany2.BaseItemView=Marionette.ItemView.extend({render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var data=this.serializeData();if(data=this.mixinTemplateHelpers(data),this.model&&this.model.get("isPreRended"))this.model.set("isPreRended",!1);else{var template=this.getTemplate(),html=Marionette.Renderer.render(template,data);this.$el.html(html)}return this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this}})}),Fortune.module("FranchiseCompany2",function(FranchiseCompany2,Fortune,Backbone,Marionette,$,_){FranchiseCompany2.BaseTransistionCollectionView=Fortune.FranchiseCompany2.BaseCollectionView.extend({setupTransistion:function(){var transition,transform,transitionEnd,key,transitions={WebkitTransition:["webkitTransitionEnd","-webkit-transition"],MozTransition:["transitionend","-moz-transition"],msTransition:["MStransitionend","-ms-transition"],OTransition:["oTransitionEnd","-o-transition"],transition:["transitionend","transition"]},transforms={webkitTransform:"-webkit-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform",OTransform:"-o-transform",transform:"transform"};for(key in transitions)if(void 0!==this.el.style[key]){transitionEnd=transitions[key][0],transition=transitions[key][1];break}for(key in transforms)if(void 0!==this.el.style[key]){transform=transforms[key];break}this.canTransition=transition&&transform&&transitionEnd,this.canTransition&&(this.isTransitioning=!1,this.transition=transition,this.transform=transform,this.transitionEnd=transitionEnd)},slideEffect:function($current,$companion,transitionStyle){this.isTransitioning=!0,$current.attr("style",transitionStyle),$companion.attr("style",transitionStyle)},onAfterItemAdded:function(itemView){var transitionEndHandler;this.canTransition&&(transitionEndHandler=$.proxy(this.transitionEndCallBack,this),itemView.$el.on(this.transitionEnd,transitionEndHandler))},onItemRemoved:function(itemView){this.canTransition&&itemView&&itemView.$el.length&&itemView.$el.off(this.transitionEnd)}})}),Fortune.module("FranchiseCompany2",function(FranchiseCompany2,Fortune,Backbone,Marionette,$,_){FranchiseCompany2.BaseTransistionLayout=Marionette.Layout.extend({setupTransistion:function(){var transition,transform,transitionEnd,key,transitions={WebkitTransition:["webkitTransitionEnd","-webkit-transition"],MozTransition:["transitionend","-moz-transition"],msTransition:["MStransitionend","-ms-transition"],OTransition:["oTransitionEnd","-o-transition"],transition:["transitionend","transition"]},transforms={webkitTransform:"-webkit-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform",OTransform:"-o-transform",transform:"transform"};for(key in transitions)if(void 0!==this.el.style[key]){transitionEnd=transitions[key][0],transition=transitions[key][1];break}for(key in transforms)if(void 0!==this.el.style[key]){transform=transforms[key];break}this.canTransition=transition&&transform&&transitionEnd&&!($.browser&&$.browser.mozilla),this.canTransition&&(this.isTransitioning=!1,this.transition=transition,this.transform=transform,this.transitionEnd=transitionEnd)}})}),Fortune.module("FranchiseCompany2.Entities",function(Entities,Fortune,Backbone,Marionette,$,_){var API;Entities.CompanyItem=Backbone.Model.extend({initialize:function(){}}),Entities.CompanyItemCollection=Backbone.Collection.extend({optParam:["url","base_url","orderPartUrl","first_offset","last_offset","max_fetch_tolerance","max_item_in_collection","max_initial_prev_item_fetchable","max_initial_next_item_fetchable","last_data_offset","filtered_sorted_data"],defaults:{max_item_in_collection:31,max_fetch_tolerance:10,max_initial_prev_item_fetchable:15,max_initial_next_item_fetchable:15},model:Entities.CompanyItem,initialize:function(models,options){options=options||{},_.extend(this,_.pick(options,this.optParam)),_.defaults(this,this.defaults)},fetching:!1,setOrderPartUrl:function(orderPart){var orderBy=orderPart.orderBy,order=orderPart.order;orderBy&&orderBy&&(this.orderPartUrl=orderBy+"/"+order+"/")},setSearchFilterPartUrl:function(filters){var encodedSearchTerm,encodedFilters="";filters&&filters.length&&(encodedSearchTerm="search//",_.each(filters,function(filter){"search"!==filter.name?encodedFilters+=filter.name+"/"+encodeURIComponent(filter.value)+"/":encodedSearchTerm=filter.value?"search/"+encodeURIComponent(filter.value)+"/":""},this),encodedFilters?this.searchFilterPartUrl=encodedSearchTerm+encodedFilters:encodedSearchTerm?this.searchFilterPartUrl=encodedSearchTerm:this.searchFilterPartUrl="",this.searchFilterPartUrl=this.searchFilterPartUrl.replace("'","%27"))},updateUrl:function(offset,count){this.url=this.base_url,this.orderPartUrl&&(this.url+=this.orderPartUrl),isNaN(offset)||isNaN(count)||(this.url+=offset+"/"+count+"/",this.searchFilterPartUrl&&(this.url+=this.searchFilterPartUrl))},setUrlParts:function(orderPart,searchFilterPart){this.resetUrlParts(),this.setOrderPartUrl(orderPart),this.setSearchFilterPartUrl(searchFilterPart)},resetUrlParts:function(){this.orderPartUrl="",this.searchFilterPartUrl=""},comparator:function(item){return item.get("offset")},parse:function(data){data["list-items"]&&data["list-items"].map(function(item,i){var company=item.companies&&item.companies[0],ticker=company&&company.ticker,tickerChange=ticker&&ticker.change;item.offset=this.getOffSetByArticleId(item.id),isNaN(tickerChange)||(tickerChange>0?item.companies[0].ticker.class_status="gainer":0>tickerChange?item.companies[0].ticker.class_status="loser":item.companies[0].ticker.class_status="neutral")},this)},getOffSetByArticleId:function(articleId){var item=_.findWhere(this.filtered_sorted_data,{id:articleId});return item&&!isNaN(item.offset)&&item.offset},setFilterSortedData:function(filtered_sorted_data){this.filtered_sorted_data=filtered_sorted_data},setlastDataOffset:function(){var lastItem=_.last(this.filtered_sorted_data);this.last_data_offset=lastItem.offset},fetchInitialData:function(model){var currentOffset=model.get("offset"),maxOffset=currentOffset+this.max_initial_next_item_fetchable,offset=currentOffset-this.max_initial_prev_item_fetchable;maxOffset=maxOffset<this.last_data_offset?maxOffset:this.last_data_offset,offset=offset>0?offset:0;var fetchDataAmount=maxOffset-offset+1;this.updateUrl(offset,fetchDataAmount);var deferred=this.fetch({remove:!1,success:this.fetchInitialSuccess,error:this.fetchError});return deferred},getItemByOffset:function(offset){return isNaN(offset)?void 0:this.findWhere({offset:offset})},fetchError:function(collection,response,options){},fetchSuccess:function(collection,response,options){response["list-items"]&&collection.add(response["list-items"])},fetchInitialSuccess:function(collection,response,options){response["list-items"]&&(collection.add(response["list-items"]),collection.first_offset=collection.first().get("offset"),collection.last_offset=collection.last().get("offset"))},shouldFetchMore:function(direction,offset){var deferred,lastOffset,newFirstOffset,count;if(!this.fetching)if("append"===direction){if(this.last_offset<this.last_data_offset&&offset<this.last_data_offset&&offset+this.max_fetch_tolerance>this.last_offset)return lastOffset=this.last_offset+1,count=this.max_fetch_tolerance,this.updateUrl(lastOffset,count),this.fetching=!0,deferred=this.fetch({remove:!1,success:this.fetchSuccess,error:this.fetchError})}else if(this.first_offset>0&&offset>0&&offset-this.max_fetch_tolerance<this.first_offset)return newFirstOffset=this.first_offset-this.max_fetch_tolerance,newFirstOffset=newFirstOffset>0?newFirstOffset:0,count=this.first_offset-newFirstOffset,this.updateUrl(newFirstOffset,count),this.fetching=!0,deferred=this.fetch({remove:!1,success:this.fetchSuccess,error:this.fetchError});return deferred=$.Deferred(),deferred.resolve({status:"no request made"}),deferred.promise()},getModelsLessThanIndex:function(index){var models=this.filter(function(item,i){return index>i});return models},getModelsGreaterThanIndex:function(index){var models=this.filter(function(item,i){return i>index});return models},shouldRemoveSome:function(direction){var models,index;this.length>this.max_item_in_collection&&(index=this.length-this.max_item_in_collection,models="append"===direction?this.getModelsLessThanIndex(index):this.getModelsGreaterThanIndex(this.length-index),this.remove(models)),this.first_offset=this.first().get("offset"),this.last_offset=this.last().get("offset"),this.fetching=!1,this.trigger("company:collection:remove:loading")}}),API={getCompanyItemCollection:function(models,options){return new Entities.CompanyItemCollection(models,options)}},Fortune.reqres.setHandler("CompanyItemCollection:entities",function(models,options){return API.getCompanyItemCollection(models,options)})}),Fortune.module("FranchiseCompany2.Entities",function(Entities,Fortune,Backbone,Marionette,$,_){var API;Entities.FranchiseCompany=Backbone.Model.extend({}),Entities.FranchiseCompanies=Backbone.Collection.extend({model:Entities.FranchiseCompany}),Entities.FranchiseCompaniesPageSet=Backbone.Model.extend({initialize:function(){var companyList=this.get("companyList");companyList&&this.set("companyListCollection",new Entities.FranchiseCompanies(companyList))}}),Entities.FranchiseCompaniesListPageSet=Backbone.Collection.extend({optParam:["id","uri","section","tags","index_data","filtered_sorted_data","formated_filtered_sorted_data","sort_by_title","franchise_name"],configParam:["item_per_page","sort_by","order","secondary_sort_by","search_term","filters","view_all"],defaults:{index_data:[],filtered_sorted_data:[],formated_filtered_sorted_data:[],sort_by_title:"",config:{item_per_page:10,sort_by:"rank",order:"asc",secondary_sort_by:"title",search_term:"title",filters:[],view_all:!1}},model:Entities.FranchiseCompaniesPageSet,initialize:function(models,options){options=options||{},options.config=options.config||{},this.config={},_.extend(this,_.pick(options,this.optParam)),_.defaults(this,_.pick(this.defaults,this.optParam)),_.extend(this.config,_.pick(options.config,this.configParam)),_.defaults(this.config,_.pick(this.defaults.config,this.configParam)),this.dataCount=this.filtered_sorted_data.length,this.total_page_set=this.formated_filtered_sorted_data.length,this.franchise_name&&(this.seoTitle=this.franchise_name+" - Fortune")},setFormatedFilteredSortedDataPagesToFalse:function(){this.formated_filtered_sorted_data.map(function(item){item.isPreRended=!1,item.companyList.map(function(item){item.isPreRended=!1})})},setTotalPageSet:function(total_page_set){this.total_page_set=total_page_set},setDataCount:function(dataCount){this.dataCount=dataCount,this.trigger("collection:update:dataCount",dataCount)},filterPredicate:function(item){for(var filterName,filterValue,itemFilter,hasMatched=!0,filters=this.config.filters,l=filters.length;l--;)if(filterName=filters[l].name,filterValue=filters[l].value,itemFilter=item.filter,"search"!==filterName){if(!itemFilter||!itemFilter[filterName]||itemFilter[filterName].toLowerCase()!==filterValue.toLowerCase()){hasMatched=!1;break}}else if(item[this.config.search_term].toLowerCase().indexOf(filterValue)<0){hasMatched=!1;break}return hasMatched},sortAndOrderList:function(list,sortBy,order){var sortedList=_.sortBy(list,function(listItem){var sortValue=listItem.sort[sortBy]||"",parsable=parseFloat(sortValue);return parsable||0===parsable?parsable:sortValue.toLowerCase()});return"desc"===order?sortedList.reverse():sortedList},groupByIteratee:function(item,index){var sortByField=this.config.sort_by,sortByValue=item.sort&&item.sort[sortByField];return"undefined"==typeof sortByValue||!_.isNumber(sortByValue)&&_.isEmpty(sortByValue)?"hasNoValue":"hasValue"},isViewAll:function(){return this.config.view_all},setFilters:function(filters){return this.config.filters=filters,this},setSortBy:function(sort_by,order){return this.config.sort_by=sort_by,this.config.order=order,this},setSortByTitle:function(sort_by_title){return this.sort_by_title=sort_by_title,this.trigger("collection:change:sort_by_title",sort_by_title),this},setViewAll:function(view_all){return this.config.view_all=view_all,this},updateFormatedFilteredSortedData:function(){var i,filteredSortedData=this.filtered_sorted_data,l=filteredSortedData&&filteredSortedData.length,currentCompanyListPage=1,companyPerListPage=this.config.view_all?l:this.config.item_per_page,companyPageData={},companyList=[],formatedFilteredSortedData=[];for(companyPageData.pageNum=currentCompanyListPage,companyPageData.id=currentCompanyListPage,i=0;l>i;i+=1)filteredSortedData[i].offset=i,companyList.push(filteredSortedData[i]),i%companyPerListPage===companyPerListPage-1&&(companyPageData.companyList=companyList.slice(0),formatedFilteredSortedData.push(companyPageData),companyList.length=0,currentCompanyListPage+=1,companyPageData={},companyPageData.pageNum=currentCompanyListPage,companyPageData.id=currentCompanyListPage);return companyList.length&&(companyPageData.companyList=companyList.slice(0),formatedFilteredSortedData.push(companyPageData)),this.formated_filtered_sorted_data=formatedFilteredSortedData,this.setTotalPageSet(formatedFilteredSortedData.length),this},shouldHavePaginatedFormatedData:function(){return this.isViewAll()&&(this.setViewAll(!1),this.updateFormatedFilteredSortedData()),this},shouldHaveViewAllFormatedData:function(){return this.isViewAll()||(this.setViewAll(!0),this.updateFormatedFilteredSortedData()),this},setMobileSortData:function(item){if(item.sort_by=this.config.sort_by.toLowerCase(),"rank"==item.sort_by)item.sortDisplayData="",item.sortMobileDisplayTitle="";else{if(item.sortDisplayData=item.sort[this.config.sort_by],(0===parseInt(item.sortDisplayData)||isNaN(parseInt(item.sortDisplayData)))&&(item.sortDisplayData=""),item.sortDisplayData=item.sortDisplayData.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),item.sortDisplayData){if("employees"!==item.sort_by&&"index"!==item.sort_by&&"industry-rank"!==item.sort_by)switch(fortune_wp_vars.bootstrap.franchise.sortable_fields[item.sort_by].type){case"Percent":item.sortDisplayData=item.sortDisplayData.toString().concat("%");break;case"Money":parseInt(item.sortDisplayData)<0?item.sortDisplayData="($"+item.sortDisplayData.substring(1)+")":item.sortDisplayData="$"+item.sortDisplayData.toString();break;default:item.sortDisplayData=item.sortDisplayData.toString()}}else item.sortDisplayData="-";item.sortMobileDisplayTitle=this.sort_by_title}},sortFilteredSortedData:function(){var lists=_.groupBy(this.filtered_sorted_data,this.groupByIteratee,this);return lists.hasValue?lists.hasValue=this.sortAndOrderList(lists.hasValue,this.config.sort_by,this.config.order):lists.hasValue=[],lists.hasNoValue?lists.hasNoValue=this.sortAndOrderList(lists.hasNoValue,this.config.secondary_sort_by,this.config.order):lists.hasNoValue=[],this.filtered_sorted_data=lists.hasValue.concat(lists.hasNoValue),_.map(this.filtered_sorted_data,function(item,offset){return item.offset=offset,this.setMobileSortData(item),item},this),lists=null,this},filterData:function(){return this.filtered_sorted_data=_.filter(this.index_data,this.filterPredicate,this),this.setDataCount(this.filtered_sorted_data.length),this},getPageData:function(pageNum){return _.findWhere(this.formated_filtered_sorted_data,{pageNum:pageNum})},prependPageData:function(pageNum){var pageData=this.getPageData(pageNum);pageData&&this.add(pageData,{at:0})},appendPageData:function(pageNum){var pageData=this.getPageData(pageNum);pageData&&this.add(pageData)},resetPageDataWith:function(pageData){this.reset(pageData)},resetPageDataWithPageNum:function(pageNum){var pageData=this.getPageData(pageNum);pageData?(this.resetPageDataWith(pageData),this.trigger("collection:reset:pageData",pageNum)):(this.reset(),this.trigger("collection:reset:pageData",0),this.setTotalPageSet(0))},resetPageDataWithViewAll:function(){this.resetPageDataWithPageNum(1),this.trigger("collection:view_all")},getOffSetByArticleId:function(articleId){var item=_.findWhere(this.filtered_sorted_data,{id:articleId});return item&&!isNaN(item.offset)&&item.offset},getPageNumByArticleId:function(articleId){var offset=this.getOffSetByArticleId(articleId);return isNaN(offset)?1:Math.ceil((offset+1)/this.config.item_per_page)},getLastDataOffset:function(){var lastItem=_.last(this.filtered_sorted_data);return lastItem&&lastItem.offset}}),API={getFranchiseCompaniesListPageSet:function(models,options){return new Entities.FranchiseCompaniesListPageSet(models,options)}},Fortune.reqres.setHandler("FranchiseCompaniesListPageSet:entities",function(models,options){return API.getFranchiseCompaniesListPageSet(models,options)})}),Fortune.module("FranchiseCompany2",function(FranchiseCompany2,Fortune,Backbone,Marionette,$,_){var orientationTimeout,win=window,$win=$(win),fortuneWpVars=fortune_wp_vars,device=fortuneWpVars.device,franchise_pages=["franchise-list","franchise-list-item"],isFranchiseContent=fortuneWpVars&&_.contains(franchise_pages,fortuneWpVars.context),bootstrapData=fortuneWpVars.bootstrap,bootstrapFranchiseData=bootstrapData&&bootstrapData.franchise,isFranchiseCompany2Content=isFranchiseContent&&bootstrapFranchiseData&&"f500"===bootstrapFranchiseData.franchise_type,hasPushState=!!history.pushState,orientationEvent=win.onorientationchang?"orientationchange":"resize",isTouchDevice=Modernizr&&Modernizr.touch;/iPhone|iPad|iPod/i.test(navigator.userAgent);return isFranchiseCompany2Content?void FranchiseCompany2.on("start",function(){var $html=$("html"),$title=$("title"),$companyFranchiseMainWrapper=$("#company-franchise-main-wrapper"),onCompanyListViewClass="on-list-view",onCompanyItemViewClass="on-item-view",filterIconViewOptions={};setLoadingScreen=function(){$companyFranchiseMainWrapper.addClass("loading")},removeLoadingScreen=function(){$companyFranchiseMainWrapper.removeClass("loading")},showMethodology=function(){$companyFranchiseMainWrapper.addClass("show-methodology")},hideMethodology=function(){$companyFranchiseMainWrapper.removeClass("show-methodology")},scrollToTop=function(){$companyFranchiseMainWrapper.animate({scrollTop:0},"500")},updateUrl=function(entity){var uri;entity&&hasPushState&&(uri=entity.get("uri")||entity.uri,Fortune.navigate(uri))},getIdcCollection=function(){var IdcCollection=Backbone.Collection.extend({url:window.location.protocol+"//"+document.location.host+"/api/v2/franchise-list/"+bootstrapFranchiseData.franchise_list_id+"/symbols"}),idcCollection=new IdcCollection;return idcCollection},fetchAndSetIdcData=function(collection){collection.fetch({success:function(data){var idcData={idcData:data};_.extend(bootstrapFranchiseData,idcData)}})},debounceResizeCallback=_.debounce(function(e){Fortune.trigger("company:app:resize",e)},50),debounceScrollCallback=_.debounce(function(e){Fortune.trigger("company:app:scroll",e)},50),setLoadingScreen();var companyDataCollection=getIdcCollection();fetchAndSetIdcData(companyDataCollection),isFranchiseCompany2Content&&($html.addClass("franchise-company-app"),$("body").hasClass("franchise-list")?($html.addClass(onCompanyListViewClass),filterIconViewOptions.enableShow=!0):($html.addClass(onCompanyItemViewClass),filterIconViewOptions.enableShow=!1),isTouchDevice&&($win.on(orientationEvent,function(e){clearTimeout(orientationTimeout),orientationTimeout=setTimeout(function(){Fortune.trigger("touch:device:orientationEvent")},1e3)}),$companyFranchiseMainWrapper.on("scroll",function(e){debounceScrollCallback(e)})),"desktop"===device&&$win.on("resize",function(e){debounceResizeCallback(e)}),Fortune.vent.on("company:list:onload",function(listView){Fortune.trigger("company:list:onload",listView)}),Fortune.vent.on("company:item:onload",function(itemView){Fortune.trigger("company:item:onload",itemView)}),Fortune.vent.on("company:item:activate",function(itemView){scrollToTop(),Fortune.trigger("company:item:activate",itemView),updateUrl(itemView.model)}),Fortune.vent.on("company:item:rendered",function(itemView){Fortune.trigger("company:item:rendered",itemView)}),Fortune.vent.on("company:item:before:close",function(itemView){Fortune.trigger("company:item:before:close",itemView)}),Fortune.vent.on("company:list:to:item",function(model){Fortune.trigger("company:list:to:item",model)}),Fortune.vent.on("company:item:to:list",function(listView){scrollToTop(),Fortune.trigger("company:item:to:list",listView),updateUrl(listView.collection)}),Fortune.vent.on("company:select:list:sort",function(listView){scrollToTop(),Fortune.trigger("company:select:list:sort",listView)}),Fortune.vent.on("company:click:list:sort",function(listView){scrollToTop(),Fortune.trigger("company:click:list:sort",listView)}),Fortune.vent.on("company:paginate:list:page:change",function(listView){Fortune.trigger("company:paginate:list:page:change",listView)}),Fortune.vent.on("company:select:list:page:change",function(listView){Fortune.trigger("company:select:list:page:change",listView)}),FranchiseCompany2.CompanyAd.start(),FranchiseCompany2.CompanyOmniture.start(),FranchiseCompany2.CompanyHeader.start({filterIconViewOptions:filterIconViewOptions}),bootstrapFranchiseData.company_list_config.franchise_companies_list_page_set_collection_config.collection_config.filtered_sorted_data=bootstrapFranchiseData.filtered_sorted_data,bootstrapFranchiseData.company_list_config.franchise_companies_list_page_set_collection_config.collection_config.franchise_name=bootstrapFranchiseData.franchise_name,FranchiseCompany2.CompanyList.start(bootstrapFranchiseData.company_list_config),bootstrapFranchiseData.company_item_config.company_item_collection_config.filtered_sorted_data=bootstrapFranchiseData.filtered_sorted_data,FranchiseCompany2.CompanyItem.start(bootstrapFranchiseData.company_item_config),Fortune.vent.on("company:list:item:clicked",function(model){var filters=FranchiseCompany2.CompanyList.listController.franchiseCompaniesListPageSet.config.filters,sortBy=FranchiseCompany2.CompanyList.listController.franchiseCompaniesListPageSet.config.sort_by,dataCount=FranchiseCompany2.CompanyList.listController.franchiseCompaniesListPageSet.dataCount,order=FranchiseCompany2.CompanyList.listController.franchiseCompaniesListPageSet.config.order,filtered_sorted_data=FranchiseCompany2.CompanyList.listController.franchiseCompaniesListPageSet.filtered_sorted_data,orderPart={order:order,orderBy:sortBy};FranchiseCompany2.CompanyItem.itemController.companyItemCollection.setUrlParts(orderPart,filters),FranchiseCompany2.CompanyItem.itemController.companyItemCollection.setFilterSortedData(filtered_sorted_data),FranchiseCompany2.CompanyItem.itemController.companyItemCollection.setlastDataOffset();var initialDataPromise=FranchiseCompany2.CompanyItem.itemController.companyItemCollection.fetchInitialData(model);setLoadingScreen(),initialDataPromise.then(function(initialDataPromiseXhr){Fortune.FranchiseCompany2.CompanyItem.itemController.companyItemPageLayout.companyFranchiseListItemsRegion.currentView.setDataCount(dataCount),Fortune.FranchiseCompany2.CompanyItem.itemController.companyItemPageLayout.companyFranchiseListItemsRegion.currentView.setInitialViewTo(model),FranchiseCompany2.CompanyHeader.Header.trigger("disable:show:filter:trigger"),FranchiseCompany2.CompanyItem.itemController.companyItemPageLayout.setToMove(),FranchiseCompany2.CompanyList.listController.companyListPageLayout.goToLeft(),FranchiseCompany2.CompanyItem.itemController.companyItemPageLayout.goToLeft(),removeLoadingScreen(),Fortune.vent.trigger("company:list:to:item",model),$html.removeClass(onCompanyListViewClass).addClass(onCompanyItemViewClass),scrollToTop()},function(initialDataPromiseXhr){})}),Fortune.vent.on("company:list:item:close",function(model){var pageNum;$html.removeClass(onCompanyItemViewClass).addClass(onCompanyListViewClass),FranchiseCompany2.CompanyHeader.Header.trigger("enable:show:filter:trigger"),FranchiseCompany2.CompanyList.listController.franchiseCompaniesListPageSet.config.view_all?FranchiseCompany2.CompanyList.listController.franchiseCompaniesListPageSet.resetPageDataWithViewAll():(pageNum=FranchiseCompany2.CompanyList.listController.franchiseCompaniesListPageSet.getPageNumByArticleId(model.get("id")),FranchiseCompany2.CompanyList.listController.franchiseCompaniesListPageSet.resetPageDataWithPageNum(pageNum)),FranchiseCompany2.CompanyList.listController.companyListPageLayout.setToMove(),FranchiseCompany2.CompanyList.listController.companyListPageLayout.goToRight(),FranchiseCompany2.CompanyItem.itemController.companyItemPageLayout.goToRight(),Fortune.vent.trigger("company:item:to:list",FranchiseCompany2.CompanyList.listController.companyListPageCollectionView),FranchiseCompany2.CompanyList.listController.companyListPageCollectionView.collection.seoTitle&&$title.text(FranchiseCompany2.CompanyList.listController.companyListPageCollectionView.collection.seoTitle),FranchiseCompany2.CompanyItem.itemController.companyItemPageLayout.companyFranchiseListItemsRegion.currentView.resetView()}),Fortune.vent.on("mobile:sort:selected",function(e){FranchiseCompany2.CompanyList.List.trigger("mobile:sort:selected",e)}),Fortune.vent.on("list:sort:selected",function(sort_by){FranchiseCompany2.CompanyHeader.Header.trigger("list:sort:selected",sort_by)}),Fortune.vent.on("franchise:remove:loading:screen",function(){removeLoadingScreen()}),Fortune.vent.on("franchise:set:loading:screen",function(){setLoadingScreen()}),Fortune.vent.on("methodology:link:clicked",function(e){showMethodology(),Fortune.trigger("methodology:show",FranchiseCompany2.CompanyList.listController.companyListPageLayout.mainPageRegion.currentView.companyListRegion.currentView.companyListRegion.currentView.companyListResultsRegion.currentView)}),Fortune.vent.on("methodology:close:link:clicked",function(e){hideMethodology()}),Fortune.vent.on("header:filter:icon:clicked",function(e){e.preventDefault(),FranchiseCompany2.CompanyList.List.trigger("filter:icon:clicked",e)}),Fortune.vent.on("scroll:to:top",function(){scrollToTop()})),Fortune.trigger("company-2:ready"),removeLoadingScreen()}):!1}),Fortune.module("FranchiseCompany2.CompanyAd.Ad",function(Ad,Fortune,Backbone,Marionette,$,_){Ad.Controller=Marionette.Controller.extend({adOptions:[],fixedAds:{cmHeaderAd:"cm-header-ad",pushDownAd:"pushdown-ad",mobileStickyAd:"mobile-sticky-ad",companyListAd:"company-list-aside-ad",companyListInjectedAd:"aside-ad-injected-list"},asideAdPrexes:["aside-ad-","aside-ad-injected-"],AD_SIZES:{"pushdown-ad":["728x90"],"cm-header-ad":["200x50"],"aside-ad":["300x250"],"mobile-sticky-ad":["300x50","320x50"]},companyListAdsRendered:!1,isInitialAdFactory:!1,$win:$(window),initialize:function(options){var _this=this;options=options||{},_.extend(this,_.pick(options,this.adOptions)),this.adApi=Fortune&&Fortune.AdManager&&Fortune.AdManager.API,this.adApi?this.initializeAdSetup():this.listenToOnce(Fortune,"ready:adManager",function(){_this.adApi=Fortune&&Fortune.AdManager&&Fortune.AdManager.API,_this.initializeAdSetup()})},bindAdEvents:function(){var _this=this;this.listenTo(Fortune,"company:list:onload",function(listView){var adModel=_this.companyItemCollectionAdModelAdapter(listView.collection),adData=_this.adApi.getArticleAdData(adModel);_this.initialAdFactory(adData),_this.loadInitialCompanyListAds()}),this.listenTo(Fortune,"company:item:onload",function(itemView){if(!itemView)return!1;var adModel=_this.companyItemAdModelAdapter(itemView.model),adData=_this.adApi.getArticleAdData(adModel);_this.initialAdFactory(adData),_this.loadInitialCompanyItemAds(itemView)}),this.listenTo(Fortune,"company:item:rendered",function(itemView){itemView.asideAdIds||(itemView.asideAdIds=_.map(this.asideAdPrexes,function(prex){return prex+itemView.model.get("id")}))}),this.listenTo(Fortune,"company:click:list:sorted",function(listView){_this.loadCompanyListAds(listView.collection)}),this.listenTo(Fortune,"company:select:list:sort",function(listView){_this.loadCompanyListAds(listView.collection)}),this.listenTo(Fortune,"company:select:list:page:change",function(listView){_this.loadCompanyListAds(listView.collection)}),this.listenTo(Fortune,"company:paginate:list:page:change",function(listView){_this.loadCompanyListAds(listView.collection)}),this.listenTo(Fortune,"company:item:to:list",function(listView){_this.loadCompanyListAds(listView.collection)}),this.listenTo(Fortune,"company:item:activate",function(itemView){Fortune.execute("resetRenderCount:adManager"),_this.loadCompanyItemAds(itemView)}),this.listenTo(Fortune,"company:item:before:close",function(itemView){_this.deleteCompanyItemAd(itemView)})},initializeAdSetup:function(){this.device=this.adApi.getDeviceType(),this.isTabletPortraitMode=this.adApi.getIsTabletPortraitMode(),this.isTabletLandscapeMode=this.adApi.getIsTabletLandscapeMode(),this.adApi.setAdSizes(),this.adApi.setupTiiAdConfig(),this.bindAdEvents()},initialAdFactory:function(adData){this.adApi.initializeAdFactory(adData),this.adApi.setDefaultAdfactoryParam(),this.adApi.setAdFactoryParams(adData.params),this.isInitialAdFactory=!0},companyItemAdModelAdapter:function(companyItem){var adModel;return companyItem?adModel=new Backbone.Model({id:companyItem.get("id"),url:companyItem.get("uri"),tags:companyItem.get("tags")}):!1},companyItemCollectionAdModelAdapter:function(companyList){var adModel,section=companyList.section?companyList.section[0]:null;return companyList?adModel=new Backbone.Model({id:companyList.id,section:section,url:companyList.uri,tags:companyList.tags}):!1},getHeaderAdIds:function(){var adIds=[];return"mobile"!==this.device?"undefined"!=typeof matchMedia&&matchMedia("(min-width: 970px)").matches?adIds.push(this.fixedAds.pushDownAd):this.$win.width()>=970&&adIds.push(this.fixedAds.pushDownAd):adIds.push(this.fixedAds.mobileStickyAd),"undefined"!=typeof matchMedia&&matchMedia("(min-width: 801px)").matches?adIds.push(this.fixedAds.cmHeaderAd):this.$win.width()>=801&&adIds.push(this.fixedAds.cmHeaderAd),adIds},getCompanyItemAsideAdId:function(itemView){return itemView?itemView.asideAdIds:[]},getCompanyListPageAdIds:function(){var headerAdIds=this.getHeaderAdIds(),adIds=[];return headerAdIds.length&&(adIds=adIds.concat(headerAdIds)),adIds.push(this.fixedAds.companyListAd),adIds.push(this.fixedAds.companyListInjectedAd),adIds},getCompanyItemPageAdIds:function(itemView){var headerAdIds=this.getHeaderAdIds(),adIds=[];return headerAdIds.length&&(adIds=adIds.concat(headerAdIds)),adIds=adIds.concat(this.getCompanyItemAsideAdId(itemView))},renderTopBannerAdSlot:function(){this.adApi.renderAdSlot(this.fixedAds.pushDownAd,this.AD_SIZES[this.fixedAds.pushDownAd],1)},renderCmdAdSlot:function(){this.adApi.renderCmAdSlot(this.fixedAds.cmHeaderAd,this.AD_SIZES[this.fixedAds.cmHeaderAd],"globalheader","tout")},renderMobileSticklyAd:function(){this.adApi.renderAdSlot(this.fixedAds.mobileStickyAd,this.AD_SIZES[this.fixedAds.mobileStickyAd],1)},renderCompanyHeaderAdSlot:function(){"mobile"!==this.device&&(this.renderTopBannerAdSlot(),
this.renderCmdAdSlot())},renderCompanyListAsideAdSlot:function(){this.companyListAdsRendered||(this.adApi.renderAdSlot(this.fixedAds.companyListAd,this.AD_SIZES["aside-ad"],1),this.adApi.renderAdSlot(this.fixedAds.companyListInjectedAd,this.AD_SIZES["aside-ad"],1),this.companyListAdsRendered=!0)},renderCompanyItemAsideAdSlot:function(itemView){if(!itemView.adSlotRendered){var adModel=this.companyItemAdModelAdapter(itemView.model),adData=this.adApi.getArticleAdData(adModel),companyItemAsideAdIds=this.getCompanyItemAsideAdId(itemView);this.isInitialAdFactory||this.initialAdFactory(adData),companyItemAsideAdIds&&(this.adApi.resetAdFactoryParams(adData),_.each(companyItemAsideAdIds,function(adId){this.adApi.renderAdSlot(adId,this.AD_SIZES["aside-ad"],1)}.bind(this)),itemView.adSlotRendered=!0)}},renderFixedAds:function(){this.renderCompanyHeaderAdSlot(),this.renderCompanyListAsideAdSlot(),"mobile"===this.device&&this.renderMobileSticklyAd()},setAdFactoryToCompanyListParam:function(franchiseCompaniesListPageSet){var adModel=this.companyItemCollectionAdModelAdapter(franchiseCompaniesListPageSet),adData=this.adApi.getArticleAdData(adModel);this.adApi.resetAdFactoryParams(adData)},loadInitialCompanyListAds:function(){var adIds=[];this.renderFixedAds(),adIds=this.getCompanyListPageAdIds(),this.adApi.displayAds(adIds)},loadInitialCompanyItemAds:function(itemView){var adModel,adData,adIds=[];adModel=this.companyItemAdModelAdapter(itemView.model),adData=this.adApi.getArticleAdData(adModel),this.isInitialAdFactory?this.adApi.resetAdFactoryParams(adData):this.initialAdFactory(adData),this.renderFixedAds(),this.renderCompanyItemAsideAdSlot(itemView),adIds=this.getCompanyItemPageAdIds(itemView),this.adApi.displayAds(adIds)},loadCompanyListAds:function(franchiseCompaniesListPageSet){var adIds=[];adIds=this.getCompanyListPageAdIds(),this.adApi.getCurrentAdFactoryAid()!==franchiseCompaniesListPageSet.id&&this.setAdFactoryToCompanyListParam(franchiseCompaniesListPageSet),this.adApi.displayAds(adIds)},loadCompanyItemAds:function(itemView){var adModel,adData,adIds=[];this.adApi.getCurrentAdFactoryAid()!==itemView.model.get("id")&&(adModel=this.companyItemAdModelAdapter(itemView.model),adData=this.adApi.getArticleAdData(adModel),this.adApi.resetAdFactoryParams(adData)),this.renderCompanyItemAsideAdSlot(itemView),adIds=this.getCompanyItemPageAdIds(itemView),this.adApi.displayAds(adIds)},deleteCompanyItemAd:function(itemView){var adIds=this.getCompanyItemAsideAdId(itemView);adIds&&_.each(adIds,function(adId){this.adApi.deleteAd(adId)}.bind(this)),itemView.adSlotRendered=!1}})}),Fortune.module("FranchiseCompany2.CompanyAd",function(CompanyAd,Fortune,Backbone,Marionette,$,_){CompanyAd.startWithParent=!1,CompanyAd.on("start",function(options){CompanyAd.companyAdController=new CompanyAd.Ad.Controller(options)})}),Fortune.module("FranchiseCompany2.CompanyItem",function(CompanyItem,Fortune,Backbone,Marionette,$,_){CompanyItem.startWithParent=!1,CompanyItem.on("start",function(options){CompanyItem.itemController=new CompanyItem.Item.Controller(options)})}),Fortune.module("FranchiseCompany2.CompanyItem.Item",function(Item,Fortune,Backbone,Marionette,$,_){Item.Controller=Marionette.Controller.extend({itemOptions:["company_item_collection_config","company_item_collection_view_config","start_on_company_item"],initialize:function(options){var _this=this,$win=$(window),$html=$("html"),$title=$("title");Item.appWidth=$win.width(),options=options||{},_.extend(this,_.pick(options,this.itemOptions));var initialItemModel,initialItemView,initial_franchise_list_items_data=this.company_item_collection_config&&this.company_item_collection_config.initial_franchise_list_items_data?this.company_item_collection_config.initial_franchise_list_items_data:[];this.companyItemCollection=Fortune.request("CompanyItemCollection:entities",initial_franchise_list_items_data,this.company_item_collection_config),this.companyPrevPagiView=this.getCompanyPrevPagiView({el:"#prev-company-button"}),this.companyNextPagiView=this.getCompanyNextPagiView({el:"#next-company-button"}),this.companyItemPageLayout=this.getCompanyItemPageLayout(this.company_item_collection_view_config),Item.on("company:itemView:new:activate:item",function(itemView){var item,itemOffset,nextItem,prevItem,seo;itemView&&itemView.model&&(item=itemView.model,itemOffset=item.get("offset"),nextItem=_.findWhere(_this.companyItemCollection.filtered_sorted_data,{offset:itemOffset+1}),prevItem=_.findWhere(_this.companyItemCollection.filtered_sorted_data,{offset:itemOffset-1}),_this.companyNextPagiView.updateView(nextItem),_this.companyPrevPagiView.updateView(prevItem),itemView.updatePaginationButtons(prevItem,nextItem),seo=item.get("seo"),seo&&seo.title&&$title.text(seo.title),_this.companyItemCollectionView.listenTo(itemView,"itemView:prevCompanyInsideButton:clicked",function(e){_this.goToPrev()}),_this.companyItemCollectionView.listenTo(itemView,"itemView:nextCompanyInsideButton:clicked",function(e){_this.goToNext()}),Fortune.vent.trigger("company:item:activate",itemView))}),this.start_on_company_item&&(initialItemModel=this.companyItemCollection.getItemByOffset(this.company_item_collection_view_config.initial_offset),initialItemView=this.companyItemPageLayout.companyFranchiseListItemsRegion.currentView.children.findByModel(initialItemModel),this.companyItemCollectionView.listenTo(initialItemView,"itemView:prevCompanyInsideButton:clicked",function(e){_this.goToPrev()}),this.companyItemCollectionView.listenTo(initialItemView,"itemView:nextCompanyInsideButton:clicked",function(e){_this.goToNext()}),Fortune.vent.trigger("company:item:onload",initialItemView)),Item.listenTo(Fortune,"company:app:resize",function(e){Item.appWidth=$win.width(),_this.companyItemCollectionView&&_this.companyItemCollectionView.currentCompanyItemView&&_this.companyItemCollectionView.currentCompanyItemView.shouldUpdateFeatureImg()}),Item.listenTo(Fortune,"company:app:scroll",function(e){$html.hasClass("on-item-view")&&(_this.companyNextPagiView.$el.is(":animated")||_this.companyNextPagiView.$el.hasClass("disable")||_this.companyNextPagiView.$el.show().fadeOut(1500),_this.companyPrevPagiView.$el.is(":animated")||_this.companyPrevPagiView.$el.hasClass("disable")||_this.companyPrevPagiView.$el.show().fadeOut(1500))})},goToNext:function(){var _this=this,companyItemPageLayout=(this.company_item_collection_view_config||{},this.companyItemPageLayout),companyItemCollectionView=this.companyItemCollectionView;if(companyItemPageLayout.$el.hasClass("loading"))return!1;var shouldFetchMorePromise=this.companyItemCollection.shouldFetchMore("append",companyItemCollectionView.currentCompanyItemViewOffset+1);companyItemCollectionView.shouldAddMore("append"),companyItemCollectionView.moveTo("next"),shouldFetchMorePromise.then(function(shouldFetchMorePromiseXhr){shouldFetchMorePromiseXhr&&"no request made"!==shouldFetchMorePromiseXhr.status&&_this.companyItemCollection.shouldRemoveSome("append")},function(shouldFetchMorePromiseXhr){})},goToPrev:function(){var _this=this,companyItemPageLayout=(this.company_item_collection_view_config||{},this.companyItemPageLayout),companyItemCollectionView=this.companyItemCollectionView;if(companyItemPageLayout.$el.hasClass("loading"))return!1;var shouldFetchMorePromise=this.companyItemCollection.shouldFetchMore("prepend",companyItemCollectionView.currentCompanyItemViewOffset+1);companyItemCollectionView.shouldAddMore("prepend"),companyItemCollectionView.moveTo("prev"),shouldFetchMorePromise.then(function(shouldFetchMorePromiseXhr){shouldFetchMorePromiseXhr&&"no request made"!==shouldFetchMorePromiseXhr.status&&_this.companyItemCollection.shouldRemoveSome("prepend")},function(shouldFetchMorePromiseXhr){})},getCompanyItemPageLayout:function(company_item_collection_view_config){var _this=this,company_item_collection_view_config=company_item_collection_view_config||{},companyItemPageLayout=new Item.CompanyItemPageLayout;return company_item_collection_view_config.collection=this.companyItemCollection,this.companyItemCollectionView=this.getCompanyItemCollectionView(company_item_collection_view_config),this.companyItemCollectionView.listenTo(this.companyPrevPagiView,"prevCompanyButton:clicked",function(e){_this.goToPrev()}),this.companyItemCollectionView.listenTo(this.companyNextPagiView,"nextCompanyButton:clicked",function(e){_this.goToNext()}),this.companyItemCollectionView.on("itemview:company:item:social:icon:clicked",function(itemView,e){var href,width=550,height=420;options="scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+encodeURIComponent(width)+",height="+encodeURIComponent(height),href=encodeURI($(e.currentTarget).attr("href")),window.open(href,"Share",options)}),companyItemPageLayout.companyFranchiseListItemsRegion.attachView(this.companyItemCollectionView),companyItemPageLayout.listenTo(this.companyItemCollectionView,"company:collectionview:show:loading",function(){companyItemPageLayout.setLoadingStatus(),Fortune.vent.trigger("franchise:set:loading:screen")}),companyItemPageLayout.listenTo(this.companyItemCollection,"company:collection:remove:loading",function(){companyItemPageLayout.isLoading&&(_this.companyItemCollectionView.resetWithCurrent(),companyItemPageLayout.removeLoadingStatus(),Fortune.vent.trigger("franchise:remove:loading:screen"))}),Modernizr.touch&&this.companyItemCollectionView.$el.swipe({swipeLeft:function(){_this.goToNext()},swipeRight:function(){_this.goToPrev()},threshold:60,fingers:"all"}),companyItemPageLayout},getCompanyItemCollectionView:function(company_item_collection_view_config){return new Item.CompanyItemCollectionView(company_item_collection_view_config)},getCompanyNextPagiView:function(options){return new Item.CompanyNextPagiView(options)},getCompanyPrevPagiView:function(options){return new Item.CompanyPrevPagiView(options)}})}),Fortune.module("FranchiseCompany2.CompanyItem.Item",function(Item,Fortune,Backbone,Marionette,$,_){Item.CompanyPagiView=Fortune.FranchiseCompany2.BaseItemView.extend({events:{click:"pagiClicked"},updateView:function(item){var companyName="",logoSrc="",permalink="";item?(this.$el.removeClass("disable"),logoSrc=item.companies[0]&&item.companies[0].logo?item.companies[0].logo:"",companyName=item.title?item.title:"",permalink=item.permalink?item.permalink:"#"):this.$el.addClass("disable"),this.$el.find(".button-company-name").text(companyName),this.$el.find("img").attr("src",logoSrc),this.$el.attr("href",permalink),this.$el.attr("title",companyName)}}),Item.CompanyNextPagiView=Item.CompanyPagiView.extend({pagiClicked:function(e){e.preventDefault(),this.trigger("nextCompanyButton:clicked",e)}}),Item.CompanyPrevPagiView=Item.CompanyPagiView.extend({pagiClicked:function(e){e.preventDefault(),this.trigger("prevCompanyButton:clicked",e)}}),Item.ArticleModel=Backbone.Model.extend({}),Item.ArticleView=Fortune.FranchiseCompany2.BaseItemView.extend({model:Item.ArticleModel,tagName:"li",template:"f500-company-article"}),Item.ArticlesView=Marionette.CollectionView.extend({itemView:Item.ArticleView}),Item.IdcModuleModel=Backbone.Model.extend({}),Item.IdcModuleView=Fortune.FranchiseCompany2.BaseItemView.extend({template:"f500-idc-module"}),Item.CompanyItemView=Fortune.FranchiseCompany2.BaseItemView.extend({template:"f500-company-item",tagName:"article",className:"company-franchise-list-item-wrapper",ui:{closeButton:".close",socialIcons:'.article-social-icons a:not(".icon-mail")',prevCompanyInsideButton:".item-previous:not(.disable)",nextCompanyInsideButton:".item-next:not(.disable)"},events:{"click @ui.closeButton":"closeClicked","click @ui.socialIcons":"socialIconsClicked","click @ui.prevCompanyInsideButton":"previousCompanyClicked","click @ui.nextCompanyInsideButton":"nextCompanyClicked"},initialize:function(){this.model.get("isPreRended")?this.setElement($("#company-franchise-list-item-"+this.model.get("id"))):(this.articlesCollection=this.getCompanyArticleData(this.model),this.articlesCollection&&this.renderArticles(this.articlesCollection))},previousCompanyClicked:function(e){e.preventDefault(),this.trigger("itemView:prevCompanyInsideButton:clicked",e)},nextCompanyClicked:function(e){e.preventDefault(),this.trigger("itemView:nextCompanyInsideButton:clicked",e)},updatePaginationButtons:function(prevCompany,nextCompany){var prevCompanyName="",prevCompanyPermalink="",nextCompanyName="",nextCompanyPermalink="",$previousButton=this.$el.find(".item-previous a"),$nextButton=this.$el.find(".item-next a");prevCompany?($previousButton.parent().removeClass("disable"),prevCompanyName=prevCompany.title?prevCompany.title:"",prevCompanyPermalink=prevCompany.permalink?prevCompany.permalink:"#"):$previousButton.parent().addClass("disable"),$previousButton.attr("title",prevCompanyName),$previousButton.attr("href",prevCompanyPermalink),nextCompany?($nextButton.parent().removeClass("disable"),nextCompanyName=nextCompany.title?nextCompany.title:"",nextCompanyPermalink=nextCompany.permalink?nextCompany.permalink:"#"):$nextButton.parent().addClass("disable"),$nextButton.attr("title",nextCompanyName),$nextButton.attr("href",nextCompanyPermalink)},getMarketDataFromSearchSymbols:function(ticker){var _this=this;$.getJSON(document.location.protocol+"//"+document.location.host+"/api/v2/company/"+ticker+"/expand/1",function(response){var idcModel=_this.adaptIdcModel(response.ticker);idcView=new Item.IdcModuleView({model:idcModel,el:_this.$el.find(".idc-container")}),idcView.render()})},adaptIdcModel:function(json){var idcModuleModel=new Item.IdcModuleModel(json);return idcModuleModel},renderArticles:function(articlesCollection){var _this=this;articlesCollection.fetch({success:function(response){response.models=response.models.slice(0,4);var articlesView=new Item.ArticlesView({el:_this.$el.find(".company-articles-container"),collection:response});articlesView.collection.length&&(articlesView.$el.append("<div class= company-articles-header>Fortune's Take On "+_this.model.get("title")+"</div>"),articlesView.render())}})},onRender:function(){var companyData=this.model.get("companies"),tickerSymbol=companyData[0]&&companyData[0].ticker&&companyData[0].ticker.symbol?companyData[0].ticker.symbol:"";this.$el.attr("id","company-franchise-list-item-"+this.model.get("id")).attr("article-id",this.model.get("id")),tickerSymbol&&(this.idcData=this.getMarketDataFromSearchSymbols(tickerSymbol)),this.refreshGlassdoor()},getCompanyArticleData:function(model){var company=model.get("companies")[0],ticker=company.ticker?company.ticker:"",symbol=ticker.symbol?ticker.symbol:"";if(symbol.length){var url=document.location.origin+"/api/v2/company/"+symbol+"/stories",CompanyArticles=Backbone.Collection.extend({url:url}),companyArticles=new CompanyArticles;return companyArticles}},onBeforeRender:function(){if(!this.hasVideo()){this.srcSize=this.pickImageSize();var src=this.getImgSrc(this.srcSize);src&&this.model.set("imageSrc",src)}},onBeforeClose:function(){this.$el.find("iframe").each(function(){$(this).attr("src","about:blank")}),Fortune.vent.trigger("company:item:before:close",this)},setCurrent:function(){this.pickImageSize();this.$el.addClass("current"),this.shouldUpdateFeatureImg()},getImgSrc:function(srcSize){var thumbnail=this.model.get("thumbnail");return thumbnail&&thumbnail.sizes&&thumbnail.sizes[srcSize]},updateFeatureImageSrc:function(src){this.$(".company-feature-image img").length&&this.$(".company-feature-image img").attr("src",src)},shouldUpdateFeatureImg:function(){var src,newSrcSize=this.pickImageSize();this.hasVideo()||this.srcSize===newSrcSize||(src=this.getImgSrc(newSrcSize),this.updateFeatureImageSrc(src),this.srcSize=newSrcSize)},hasVideo:function(){return this.model.videos&&this.model.videos.length},closeClicked:function(e){e.preventDefault(),Fortune.vent.trigger("company:list:item:close",this.model)},socialIconsClicked:function(e){e.preventDefault(),this.trigger("company:item:social:icon:clicked",e)},pickImageSize:function(){var appWidth=Item.appWidth;return appWidth>=950?"company_large":950>appWidth&&appWidth>=900?"company_medium":899>=appWidth&&appWidth>=540?"company_large":539>=appWidth&&appWidth>330?"company_medium":330>appWidth?"company_small":"company_large"},refreshGlassdoor:function(){"undefined"!=typeof JobsWidget&&JobsWidget.initAllWidgets()}}),Item.CompanyItemCollectionView=Fortune.FranchiseCompany2.BaseTransistionCollectionView.extend({_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},showCollection:function(){var ItemView,initialItem;isNaN(this.initial_offset)||(initialItem=this.collection.getItemByOffset(this.initial_offset),ItemView=this.getItemView(initialItem),this.addItemView(initialItem,ItemView,0),this.setCurrentCompanyItemViewByOffset(this.initial_offset))},appendHtml:function(collectionView,itemView,index){var itemViewOffset;return this.currentCompanyItemView?(itemViewOffset=itemView.model&&itemView.model.get("offset"),this.currentCompanyItemViewOffset<itemViewOffset?collectionView.$el.append(itemView.el):collectionView.$el.prepend(itemView.el)):collectionView.$el.append(itemView.el)},optParam:["initial_offset","dataCount"],defaults:{initial_offset:0,maxAppendCompanyItemView:3,maxPrependCompanyItemView:3,maxRenderCompanyItemView:7,itemViewClassName:"company-franchise-list-item-wrapper"},itemView:Item.CompanyItemView,el:"#company-franchise-list-items-container",initialize:function(options){options=options||{},_.extend(this,_.pick(options,this.optParam)),_.defaults(this,this.defaults),this.initializeTransistion(),this.firstChildrenViewOffset=this.initial_offset,this.lastChildrenViewOffset=this.initial_offset,this.initialRender()},onAfterItemAdded:function(itemView){var transitionEndHandler;this.canTransition&&(transitionEndHandler=$.proxy(this.transitionEndCallBack,this),itemView.$el.on(this.transitionEnd,transitionEndHandler)),Fortune.vent.trigger("company:item:rendered",itemView)},initializeTransistion:function(){this.setupTransistion(),this.canTransition&&(this.transitionNextStyle=this.transform+":translate3d(-100%,0,0); "+this.transition+": "+this.transform+" .3s ease-out; left:0; -webkit-backface-visibility: hidden;-webkit-perspective: 1000;",this.transitionPrevStyle=this.transform+":translate3d(100%,0,0); "+this.transition+": "+this.transform+" .3s ease-out; left:-50%; -webkit-backface-visibility: hidden;-webkit-perspective: 1000;")},initialRender:function(){this.render(),this.initialPrependCompanyItemView(),this.initialAppendCompanyItemView()},setCurrentCompanyItemViewByOffset:function(offset){var item=this.collection.getItemByOffset(offset);item&&(this.currentCompanyItemView=this.children.findByModel(item),this.currentCompanyItemViewOffset=offset,this.$current=this.currentCompanyItemView.$el,Item.trigger("company:itemView:new:activate:item",this.currentCompanyItemView),IN&&IN.parse&&IN.parse())},onBeforeItemAdded:function(itemView){this.children.length<1&&itemView.setCurrent()},initialPrependCompanyItemView:function(){var i,l=this.maxPrependCompanyItemView+1;for(i=1;l>i;i+=1)this.currentCompanyItemViewOffset-i>=0&&this.addCompanyItemViewByOffset(this.currentCompanyItemViewOffset-i)},initialAppendCompanyItemView:function(){var i,l=this.maxAppendCompanyItemView;for(i=1;l>=i;i+=1)this.currentCompanyItemViewOffset+i<=this.dataCount-1&&this.addCompanyItemViewByOffset(this.currentCompanyItemViewOffset+i)},addCompanyItemViewByOffset:function(offset){var item=this.collection.getItemByOffset(offset);item&&(this.addChildView(item,this.collection),this.currentCompanyItemViewOffset<offset?this.lastChildrenViewOffset=offset:this.firstChildrenViewOffset=offset)},removeCompanyItemViewByOffset:function(offset){var item=this.collection.getItemByOffset(offset);item&&(this.removeItemView(item),this.currentCompanyItemViewOffset<offset?this.lastChildrenViewOffset=offset-1:this.firstChildrenViewOffset=offset+1)},transitionEndCallBack:function(e){e.stopImmediatePropagation();var $current,$next,$prev,$target=$(e.target);this.isTransitioning&&($target.hasClass("next")?($next=$target,$current=$target.prev(),$current.attr("style","position:absolute; left: -99999px;"),$next.attr("style","left: 0;"),$current.removeClass("current").attr("style",""),$next.removeClass("next").addClass("current").attr("style",""),this.setCurrentCompanyItemViewByOffset(this.currentCompanyItemViewOffset+1),this.isTransitioning=!1):$target.hasClass("prev")&&($prev=$target,$current=$target.next(),$current.attr("style","position:absolute; left: -99999px;"),$prev.attr("style","left: 0;"),$current.removeClass("current").attr("style",""),$prev.removeClass("prev").addClass("current").attr("style",""),this.setCurrentCompanyItemViewByOffset(this.currentCompanyItemViewOffset-1),this.isTransitioning=!1))},itemViewSwap:function($current,$companion){$current.removeClass("current"),$companion.hasClass("next")?($companion.removeClass("next").addClass("current"),this.setCurrentCompanyItemViewByOffset(this.currentCompanyItemViewOffset+1)):($companion.removeClass("prev").addClass("current"),this.setCurrentCompanyItemViewByOffset(this.currentCompanyItemViewOffset-1))},moveTo:function(direction){var $next,$prev,$current=this.$current;this.dataCount>1&&("next"===direction?this.currentCompanyItemViewOffset+1<=this.dataCount-1&&($next=$current.next(),$next.length&&$next.addClass("next")?this.canTransition?this.isTransitioning||this.slideEffect($current,$next,this.transitionNextStyle):this.itemViewSwap($current,$next):this.trigger("company:collectionview:show:loading")):this.currentCompanyItemViewOffset-1>=0&&($prev=$current.prev(),$prev.length&&$prev.addClass("prev")?this.canTransition?this.isTransitioning||this.slideEffect($current,$prev,this.transitionPrevStyle):this.itemViewSwap($current,$prev):this.trigger("company:collectionview:show:loading")))},shouldAddMore:function(typeOfAdd){var children=this.children,childrenCount=children.length,firstChildrenViewOffset=this.firstChildrenViewOffset,lastChildrenViewOffset=this.lastChildrenViewOffset;"append"===typeOfAdd?lastChildrenViewOffset-this.currentCompanyItemViewOffset<=this.maxAppendCompanyItemView&&lastChildrenViewOffset<this.dataCount-1&&(childrenCount+1>this.maxRenderCompanyItemView&&this.removeCompanyItemViewByOffset(firstChildrenViewOffset),this.addCompanyItemViewByOffset(lastChildrenViewOffset+1)):this.currentCompanyItemViewOffset-firstChildrenViewOffset<=this.maxPrependCompanyItemView&&firstChildrenViewOffset>0&&(childrenCount+1>this.maxRenderCompanyItemView&&this.removeCompanyItemViewByOffset(lastChildrenViewOffset),this.addCompanyItemViewByOffset(firstChildrenViewOffset-1))},resetView:function(){var children;children=this.children,children.length&&children.forEach(function(view){this.removeItemView(view.model)},this),this.collection.reset()},resetWithCurrent:function(){var children;children=this.children,children.length&&(children.forEach(function(view){this.removeItemView(view.model)},this),this.addCompanyItemViewByOffset(this.currentCompanyItemViewOffset),this.setCurrentCompanyItemViewByOffset(this.currentCompanyItemViewOffset),this.initialPrependCompanyItemView(),this.initialAppendCompanyItemView())},setInitialViewTo:function(model){var offset=model&&model.get("offset");isNaN(offset)||(this.addCompanyItemViewByOffset(offset),this.setCurrentCompanyItemViewByOffset(offset),this.initialPrependCompanyItemView(),this.initialAppendCompanyItemView())},setDataCount:function(count){this.dataCount=count}})}),Fortune.module("FranchiseCompany2.CompanyItem.Item",function(Item,Fortune,Backbone,Marionette,$,_){Item.CompanyItemPageLayout=Fortune.FranchiseCompany2.BaseTransistionLayout.extend({el:"#company-franchise-list-items-wrapper",initialize:function(){this.initializeTransistion()},ui:{nextCompanyButton:"#next-company-button",prevCompanyButton:"#prev-company-button"},regions:{companyFranchiseListItemsRegion:"#company-franchise-list-items-region"},initializeTransistion:function(){var transitionEndHandler;this.setupTransistion(),this.canTransition&&(this.transitionToLeftStyle=this.transform+":translate3d(-100%,0,0); "+this.transition+": "+this.transform+" .3s ease-out; left:0; -webkit-backface-visibility: hidden;-webkit-perspective: 1000;",this.transitionToRightStyle=this.transform+":translate3d(100%,0,0); "+this.transition+": "+this.transform+" .3s ease-out; left:-50%; -webkit-backface-visibility: hidden;-webkit-perspective: 1000;",transitionEndHandler=$.proxy(this.transitionEndCallBack,this),this.$el.on(this.transitionEnd,transitionEndHandler))},isLoading:!1,transitionEndCallBack:function(e){return e.stopImmediatePropagation(),e.target!==this.el?!1:void(this.$el.hasClass("current")?this.$el.removeClass("current").attr("style",""):this.$el.removeClass("moving").attr("style","").addClass("current"))},setToMove:function(){this.canTransition&&this.$el.addClass("moving")},goToLeft:function(){this.canTransition?this.$el.attr("style",this.transitionToLeftStyle):this.$el.addClass("current")},goToRight:function(){this.canTransition?this.$el.attr("style",this.transitionToRightStyle):this.$el.removeClass("current")},setLoadingStatus:function(){this.isLoading=!0},removeLoadingStatus:function(){this.isLoading=!1}})}),Fortune.module("FranchiseCompany2.CompanyList",function(CompanyList,Fortune,Backbone,Marionette,$,_){CompanyList.startWithParent=!1,CompanyList.on("start",function(options){CompanyList.listController=new CompanyList.List.Controller(options)})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.Controller=Marionette.Controller.extend({listOptions:["franchise_companies_list_page_set_collection_config","company_list_page_collection_view_config","filters_view_config","start_on_company_list"],initialize:function(options){var $body=$("body"),_isIOS=/iPhone|iPad|iPod/i.test(navigator.userAgent);options=options||{},_.extend(this,_.pick(options,this.listOptions));var _this=this;this.franchiseCompaniesListPageSet=Fortune.request("FranchiseCompaniesListPageSet:entities",this.franchise_companies_list_page_set_collection_config.initial_filtered_sorted_data,this.franchise_companies_list_page_set_collection_config.collection_config);var companyListMainLayout=this.getCompanyListMainLayout({franchiseCompaniesListPageSet:this.franchiseCompaniesListPageSet,company_list_page_collection_view_config:this.company_list_page_collection_view_config,filters_view_config:this.filters_view_config}),companyListAsideView=this.getCompanyListAsideView();this.companyListPageLayout=this.getCompanyListPageLayout(),this.companyListPageLayout.mainPageRegion.attachView(companyListMainLayout),this.companyListPageLayout.asidePageRegion.attachView(companyListAsideView),this.methodologyView=this.getMethodologyView(),this.bottomWidgetsView=this.getBottomWidgetsView(),this.setOutbrainModule(this.bottomWidgetsView.$el),List.on("mobile:filters:close:clicked",function(e){$body.toggleClass("show-filters"),$body.hasClass("show-filters")||companyListMainLayout.hideFiltersRegion(),_isIOS&&($(companyListMainLayout.filtersRegion.el).css("display","none"),setTimeout(function(){$(companyListMainLayout.filtersRegion.el).css("display","")},0))}),List.on("mobile:sort:selected",function(e){var $target=$(e.target),$selected=$target.find("option:selected"),sort_by=$selected.attr("value"),sort_by_title=$selected.data("title"),order=$selected.data("order");_this.franchiseCompaniesListPageSet.setSortBy(sort_by,order).setSortByTitle(sort_by_title).sortFilteredSortedData().updateFormatedFilteredSortedData().resetPageDataWithPageNum(1),_this.sortPanelView.updateSelectedState(sort_by),Fortune.vent.trigger("company:select:list:sort",companyListMainLayout.companyListRegion.currentView.companyListRegion.currentView.companyListResultsRegion.currentView)}),List.on("filter:region:transition:end",function(e){e.stopImmediatePropagation(),$body.hasClass("show-filters")||companyListMainLayout.hideFiltersRegion()}),List.on("franchise:filters:close:icon:clicked",function(e){e.preventDefault(),$body.toggleClass("show-filters"),Fortune.vent.trigger("header:filter:icon:clicked",e)}),List.on("filter:icon:clicked",function(e){e.preventDefault(),$body.hasClass("show-filters")&&companyListMainLayout.showFiltersRegion(),companyListMainLayout.canTransition||$body.hasClass("show-filters")||companyListMainLayout.hideFiltersRegion()}),this.start_on_company_list&&Fortune.vent.trigger("company:list:onload",companyListMainLayout.companyListRegion.currentView.companyListRegion.currentView.companyListResultsRegion.currentView)},getCompanyListPageLayout:function(){return new List.CompanyListPageLayout},getCompanyListMainLayout:function(config){var companyListMainLayout=new List.CompanyListMainLayout,franchiseCompaniesListPageSet=config.franchiseCompaniesListPageSet,company_list_page_collection_view_config=config.company_list_page_collection_view_config,filters_view_config=config.filters_view_config,companyListLayout=this.getCompanyListLayout({franchiseCompaniesListPageSet:franchiseCompaniesListPageSet,company_list_page_collection_view_config:company_list_page_collection_view_config}),searchBarView=this.getSearchBarView(),filtersView=this.getFiltersView({filters_view_config:filters_view_config});return searchBarView.on("filter:updated",function(filterOptions){franchiseCompaniesListPageSet.setFilters(filterOptions).filterData().sortFilteredSortedData().updateFormatedFilteredSortedData().resetPageDataWithPageNum(1)}),this.sortPanelView.on("filter:updated",function(filterOptions){franchiseCompaniesListPageSet.setFilters(filterOptions).filterData().sortFilteredSortedData().updateFormatedFilteredSortedData().resetPageDataWithPageNum(1)}),filtersView.on("filter:updated",function(filterOptions){franchiseCompaniesListPageSet.setFilters(filterOptions).filterData().sortFilteredSortedData().updateFormatedFilteredSortedData().resetPageDataWithPageNum(1)}),companyListMainLayout.companyListRegion.attachView(companyListLayout),companyListMainLayout.filtersRegion.attachView(filtersView),companyListMainLayout},setOutbrainModule:function($el){var $outbrain=$el.find(".outbrain-list-page"),deviceType=fortune_wp_vars.device,isMobile="mobile"===deviceType,mobileID="MB_2",ua=navigator.userAgent.toLowerCase(),isAndroid=ua.indexOf("android")>-1;(isMobile||isAndroid)&&($outbrain.attr("data-widget-id",mobileID),"undefined"!=typeof OBR&&OBR.extern.refreshWidget())},getCompanyListAsideView:function(){return new List.CompanyListAsideView},getMethodologyView:function(){return new List.MethodologyView},getBottomWidgetsView:function(){return new List.BottomWidgetsView},getCompanyListLayout:function(config){var franchiseCompaniesListPageSet=config.franchiseCompaniesListPageSet,company_list_page_collection_view_config=config.company_list_page_collection_view_config,companyListLayout=new List.CompanyListLayout;this.sortPanelView=new List.SortPanelView;var introView=new List.IntroView,companyListResultsLayout=this.getCompanyListResultsLayout({franchiseCompaniesListPageSet:franchiseCompaniesListPageSet,company_list_page_collection_view_config:company_list_page_collection_view_config});return this.sortPanelView.on("sort:selected",function(sortObj){franchiseCompaniesListPageSet.setSortBy(sortObj.sort_by,sortObj.order).setSortByTitle(sortObj.sort_by_title).sortFilteredSortedData().updateFormatedFilteredSortedData().resetPageDataWithPageNum(1),Fortune.vent.trigger("list:sort:selected",sortObj.sort_by),Fortune.trigger("company:click:list:sorted",companyListResultsLayout.companyListResultsRegion.currentView)}),companyListLayout.introRegion.attachView(introView),companyListLayout.sortRegion.attachView(this.sortPanelView),companyListLayout.companyListRegion.attachView(companyListResultsLayout),companyListLayout},getSearchBarView:function(config){return new List.SearchBarView(config)},getFiltersView:function(config){return new List.FiltersView(config)},getCompanyListResultsLayout:function(config){var _this=this,franchiseCompaniesListPageSet=config.franchiseCompaniesListPageSet,company_list_page_collection_view_config=config.company_list_page_collection_view_config,companyListResultsLayout=new List.CompanyListResultsLayout,topPanelView=new List.TopPanelView,bottomPanelView=new List.BottomPanelView;
return this.companyListPageCollectionView=new List.CompanyListPageCollectionView({collection:franchiseCompaniesListPageSet,el:"#company-franchise-list-results",current_page:company_list_page_collection_view_config&&company_list_page_collection_view_config.current_page}),company_list_page_collection_view_config&&company_list_page_collection_view_config.current_page&&(this.companyListPageCollectionView.render(),this.companyListPageCollectionView.initialPreRenderPrevPages(),this.companyListPageCollectionView.initialPreRenderNextPages()),franchiseCompaniesListPageSet.setFormatedFilteredSortedDataPagesToFalse(),topPanelView.listenTo(franchiseCompaniesListPageSet,"collection:change:sort_by_title",function(sort_title){topPanelView.updateSortTitle(sort_title)}),List.listenTo(franchiseCompaniesListPageSet,"collection:update:dataCount",function(dataCount){topPanelView.updateDropDownPagination(dataCount),bottomPanelView.updateDropDownPagination(dataCount)}),List.listenTo(this.companyListPageCollectionView,"collectionView:hasNoPagination",function(){topPanelView.setPaginationStatus("hasNoPagination"),bottomPanelView.setPaginationStatus("hasNoPagination")}),List.listenTo(this.companyListPageCollectionView,"collectionView:hasNextOnly",function(){topPanelView.setPaginationStatus("hasNextOnly"),bottomPanelView.setPaginationStatus("hasNextOnly")}),List.listenTo(this.companyListPageCollectionView,"collectionView:hasPrevOnly",function(){topPanelView.setPaginationStatus("hasPrevOnly"),bottomPanelView.setPaginationStatus("hasPrevOnly")}),List.listenTo(this.companyListPageCollectionView,"collectionView:hasPrevNext",function(){topPanelView.setPaginationStatus("hasPrevNext"),bottomPanelView.setPaginationStatus("hasPrevNext")}),List.listenTo(this.companyListPageCollectionView,"collectionView:change:currentPageView",function(pageNum){"number"!=typeof pageNum||isNaN(pageNum)?(topPanelView.setDropDownPagination("all"),bottomPanelView.setDropDownPagination("all")):(topPanelView.setDropDownPagination(pageNum),bottomPanelView.setDropDownPagination(pageNum)),Fortune.vent.trigger("company:list:page:change",_this.companyListPageCollectionView)}),this.companyListPageCollectionView.listenTo(List,"panel:nextPage:clicked",function(e){_this.companyListPageCollectionView.moveTo("nextPage")}),this.companyListPageCollectionView.listenTo(List,"panel:prevPage:clicked",function(e){_this.companyListPageCollectionView.moveTo("prevPage")}),this.companyListPageCollectionView.listenTo(List,"panel:page:selected",function(e){var pageNum,$target=$(e.target),$selected=$target.find("option:selected"),$body=$("body"),viewAllButtonSelected=$target.hasClass("view-all-button");($selected.length||viewAllButtonSelected)&&(pageNum=parseInt($selected.attr("value"),10),"number"!=typeof pageNum||isNaN(pageNum)?($body.addClass("view-all-selected"),franchiseCompaniesListPageSet.shouldHaveViewAllFormatedData().resetPageDataWithViewAll()):($body.removeClass("view-all-selected"),franchiseCompaniesListPageSet.shouldHavePaginatedFormatedData().resetPageDataWithPageNum(pageNum)),Fortune.vent.trigger("company:select:list:page:change",_this.companyListPageCollectionView))}),this.companyListPageCollectionView.listenTo(franchiseCompaniesListPageSet,"collection:reset:pageData",function(pageNum){_this.companyListPageCollectionView.resetCurrentPageNum(pageNum)}),companyListResultsLayout.companyListResultsRegion.attachView(this.companyListPageCollectionView),companyListResultsLayout.topPanelRegion.attachView(topPanelView),companyListResultsLayout.bottomPanelRegion.attachView(bottomPanelView),companyListResultsLayout}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.CompanyListAsideView=Fortune.FranchiseCompany2.BaseItemView.extend({el:"#company-franchise-list-aside-content",initialize:function(){}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.BottomWidgetsView=Fortune.FranchiseCompany2.BaseItemView.extend({el:"#bottom-widgets"})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.CompanyListLayout=Marionette.Layout.extend({el:"#company-franchise-list-content",regions:{introRegion:"#intro-region",sortRegion:"#sort-region",companyListRegion:"#company-list-region"}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.BasePanelView=Fortune.FranchiseCompany2.BaseItemView.extend({initialize:function(){this.item_per_page=10},ui:{nextPage:".next-page",prevPage:".prev-page",viewAll:".view-all-button",pageDropDown:".page-drop-down"},events:{"click @ui.nextPage":"clickedNextPage","click @ui.prevPage":"clickedPrevPage","click @ui.viewAll":"selectedPage","change @ui.pageDropDown":"selectedPage"},clickedNextPage:function(e){e.preventDefault(),List.trigger("panel:nextPage:clicked",e)},clickedPrevPage:function(e){e.preventDefault(),List.trigger("panel:prevPage:clicked",e)},selectedPage:function(e){e.preventDefault(),List.trigger("panel:page:selected",e)},setPaginationStatus:function(statusClass){this.$(".panel-pagination").hasClass(statusClass)||this.$(".panel-pagination").attr("class","panel-pagination "+statusClass)},setDropDownPagination:function(pageNum){this.$(this.ui.pageDropDown).val(pageNum)},updateDropDownPagination:function(dataCount){var option,optionText,i,item_per_page=this.item_per_page,$pageDropDown=this.$(this.ui.pageDropDown),totalPageSet=Math.ceil(dataCount/item_per_page),newOptions=[];for(i=1;totalPageSet>=i;i+=1)optionText=1+(i-1)*item_per_page+"-"+i*item_per_page,option=$("<option />",{value:i,text:optionText}),newOptions.push(option);$pageDropDown.find("option:not(.view-all, :disabled)").remove(),$pageDropDown.prepend(newOptions)}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.BottomPanelView=List.BasePanelView.extend({el:"#company-franchise-list-bottom-panel",clickedNextPage:function(e){var $parent=$(e.target).parent(),isDisabled=$parent.hasClass("hasPrevOnly")||$parent.hasClass("hasNoPagination");e.preventDefault(),List.trigger("panel:nextPage:clicked",e),isDisabled||Fortune.vent.trigger("scroll:to:top")},clickedPrevPage:function(e){var $parent=$(e.target).parent(),isDisabled=$parent.hasClass("hasNextOnly")||$parent.hasClass("hasNoPagination");e.preventDefault(),List.trigger("panel:prevPage:clicked",e),isDisabled||Fortune.vent.trigger("scroll:to:top")},selectedPage:function(e){var $body=$("body"),$target=$(e.target),viewAllAlreadySelected=$body.hasClass("view-all-selected"),viewAllButtonSelected=$target.hasClass("view-all-button");e.preventDefault(),viewAllButtonSelected&&viewAllAlreadySelected||(List.trigger("panel:page:selected",e),Fortune.vent.trigger("scroll:to:top"))}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.CompanyListItemView=Fortune.FranchiseCompany2.BaseItemView.extend({template:"f500-company-list-item",className:"company-list-item icon-new-right-arrow",tagName:"li",initialize:function(){this.model.get("isPreRended")&&this.setElement($("#company-list-item-"+this.model.get("id")))},onRender:function(){this.franchiseData=fortune_wp_vars&&fortune_wp_vars.bootstrap&&fortune_wp_vars.bootstrap.franchise?fortune_wp_vars.bootstrap.franchise:"";var companies=this.model.get("companies"),ticker=companies[0].ticker.symbol;this.model.get("isPreRended")||this.$el.attr("id","company-list-item-"+this.model.get("id")),!_.isEmpty(this.franchiseData.idcData)&&this.franchiseData.idcData.length?ticker&&this.setMarketDataFromBootstrap(ticker):ticker&&this.setMarketDataFromSearchSymbols(ticker)},events:{click:"companyListItemClicked"},companyListItemClicked:function(e){e.preventDefault(),Fortune.vent.trigger("company:list:item:clicked",this.model)},setMarketDataFromBootstrap:function(ticker){var $mktDataContainer=this.$el.find(".company-list-mkt-data"),companies=this.franchiseData.idcData.models[0];if(companies){var changePercent=companies.get(ticker)&&companies.get(ticker).changePercent?companies.get(ticker).changePercent:"";_.isEmpty(changePercent)&&!_.isNumber(changePercent)||isNaN(changePercent)?this.setMarketDataFromSearchSymbols(ticker):(changePercent=parseFloat(changePercent),this.setMarketClass($mktDataContainer,changePercent),$mktDataContainer.append(", "+changePercent.toFixed(2)+" %"))}},setMarketDataFromSearchSymbols:function(ticker){var _this=this,$mktDataContainer=this.$el.find(".company-list-mkt-data");$.getJSON(document.location.protocol+"//"+document.location.host+"/data/search-symbols/"+ticker,function(data){if(data[0]&&data[0].changePercent&&(!_.isEmpty(data[0].changePercent)||_.isNumber(data[0].changePercent))&&!isNaN(data[0].changePercent)){var changePercent=data[0].changePercent;changePercent&&(changePercent=parseFloat(changePercent),_this.setMarketClass($mktDataContainer,changePercent),$mktDataContainer.append(", "+changePercent.toFixed(2)+" %"))}})},setMarketClass:function($mktDataContainer,changePercent){$mktDataContainer.addClass(changePercent>0?"gainer":0>changePercent?"loser":"neutral")}}),List.CompanyListEmptyView=Marionette.ItemView.extend({className:"no-results",template:"f500-company-list-empty"}),List.CompanyListPageView=Fortune.FranchiseCompany2.BaseCompositeView.extend({itemView:List.CompanyListItemView,template:"f500-company-list-item-page",className:"company-franchise-result-content",itemViewContainer:"ol",initialize:function(){var companyList=this.model.get("companyListCollection");companyList&&(this.collection=companyList),this.model.get("isPreRended")&&this.setElement($("#company-franchise-result-page-"+this.model.get("id")))},onRender:function(){this.model.get("isPreRended")?this.model.set("isPreRended",!1):this.$el.attr("id","company-franchise-result-page-"+this.model.get("id"))},setCurrent:function(){this.$el.addClass("current")}}),List.CompanyListPageCollectionView=Fortune.FranchiseCompany2.BaseTransistionCollectionView.extend({optParam:["current_page"],defaults:{maxPreRenderPrevPages:2,maxPreRenderNextPages:2,maxRenderPages:5},itemView:List.CompanyListPageView,emptyView:List.CompanyListEmptyView,initialize:function(options){options=options||{},_.extend(this,_.pick(options,this.optParam)),_.defaults(this,this.defaults),this.initializeTransistion()},initializeTransistion:function(){this.setupTransistion(),this.canTransition&&(this.transitionNextStyle=this.transform+":translate3d(-100%,0,0); "+this.transition+": "+this.transform+" .3s ease-out; left:0; -webkit-backface-visibility: hidden;-webkit-perspective: 1000;",this.transitionPrevStyle=this.transform+":translate3d(100%,0,0); "+this.transition+": "+this.transform+" .3s ease-out; left:-50%; -webkit-backface-visibility: hidden;-webkit-perspective: 1000;")},onRender:function(){var currentModel,itemView;this.collection&&1===this.collection.length&&(currentModel=this.collection.models[0],itemView=this.children.findByModel(currentModel),itemView.setCurrent(),this.$current=itemView.$el)},onAfterItemAdded:function(itemView){var transitionEndHandler;this.canTransition&&(transitionEndHandler=$.proxy(this.transitionEndCallBack,this),itemView.$el.on(this.transitionEnd,transitionEndHandler))},onItemRemoved:function(itemView){this.canTransition&&itemView.$el.off(this.transitionEnd)},renderPrevPage:function(pageNum){this.collection.prependPageData(pageNum)},renderNextPage:function(pageNum){this.collection.appendPageData(pageNum)},initialPreRenderPrevPages:function(){var i,l=this.maxPreRenderPrevPages+1;for(i=1;l>i;i+=1)this.current_page-i>=1&&this.renderPrevPage(this.current_page-i)},initialPreRenderNextPages:function(){var i,l=this.maxPreRenderNextPages;for(i=1;l>=i;i+=1)this.current_page+i<=this.collection.total_page_set&&this.renderNextPage(this.current_page+i)},setCurrentPage:function(pageNum){var totalPageSet=this.collection.total_page_set,currentPage=pageNum,isViewAll=this.collection.isViewAll();this.current_page=pageNum,this.trigger(1>=totalPageSet?"collectionView:hasNoPagination":1===currentPage?"collectionView:hasNextOnly":currentPage===totalPageSet?"collectionView:hasPrevOnly":"collectionView:hasPrevNext"),isViewAll?this.trigger("collectionView:change:currentPageView","all"):this.trigger("collectionView:change:currentPageView",pageNum)},resetCurrentPageNum:function(pageNum){this.setCurrentPage(pageNum),this.initialPreRenderNextPages(),this.initialPreRenderPrevPages()},itemViewSwap:function($current,$companion){$current.removeClass("current"),$companion.hasClass("next")?($companion.removeClass("next").addClass("current"),this.setCurrentPage(this.current_page+1)):($companion.removeClass("prev").addClass("current"),this.setCurrentPage(this.current_page-1)),this.$current=$companion},addMore:function(typeOfAdd){var lastCollectionPageNum,firstCollectionPageNum,collection=this.collection,lastCollectionDataModel=collection.last(),firstCollectionDataModel=collection.first();"append"===typeOfAdd?(lastCollectionPageNum=lastCollectionDataModel.get("pageNum"),lastCollectionPageNum-this.current_page<=this.maxPreRenderNextPages&&lastCollectionPageNum<collection.total_page_set&&(collection.length+1>this.maxRenderPages&&collection.remove(firstCollectionDataModel),this.renderNextPage(lastCollectionPageNum+1))):(firstCollectionPageNum=firstCollectionDataModel.get("pageNum"),this.current_page-firstCollectionPageNum<=this.maxPreRenderPrevPages&&firstCollectionPageNum>1&&(collection.length+1>this.maxRenderPages&&collection.remove(lastCollectionDataModel),this.renderPrevPage(firstCollectionPageNum-1)))},moveTo:function(direction){var $next,$prev,$current=this.$current;this.collection.total_page_set>1&&("nextPage"===direction?this.current_page+1<=this.collection.total_page_set&&($next=$current.next(),$next.length&&$next.addClass("next")&&(this.addMore("append"),this.canTransition?this.isTransitioning||this.slideEffect($current,$next,this.transitionNextStyle):this.itemViewSwap($current,$next),this.trigger("collectionView:moveTo",this.current_page+1),Fortune.vent.trigger("company:paginate:list:page:change",this))):this.current_page-1>=1&&($prev=$current.prev(),$prev.length&&$prev.addClass("prev")&&(this.addMore("prepend"),this.canTransition?this.isTransitioning||this.slideEffect($current,$prev,this.transitionPrevStyle):this.itemViewSwap($current,$prev),this.trigger("collectionView:moveTo",this.current_page-1),Fortune.vent.trigger("company:paginate:list:page:change",this))))},transitionEndCallBack:function(e){e.stopImmediatePropagation();var $current,$next,$prev,$target=$(e.target);$target.hasClass("next")?($next=$target,$current=$target.prev(),$current.attr("style","position:absolute; left: -99999px;"),$next.attr("style","left: 0;"),$current.removeClass("current").attr("style",""),$next.removeClass("next").addClass("current").attr("style",""),this.$current=$next,this.setCurrentPage(this.current_page+1),this.isTransitioning=!1):$target.hasClass("prev")&&($prev=$target,$current=$target.next(),$current.attr("style","position:absolute; left: -99999px;"),$prev.attr("style","left: 0;"),$current.removeClass("current").attr("style",""),$prev.removeClass("prev").addClass("current").attr("style",""),this.$current=$prev,this.setCurrentPage(this.current_page-1),this.isTransitioning=!1)}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.CompanyListResultsLayout=Marionette.Layout.extend({el:"#company-franchise-list-results-wrapper",regions:{topPanelRegion:"#top-panel-region",companyListResultsRegion:"#company-list-results-region",bottomPanelRegion:"#bottom-panel-region"}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.TopPanelView=List.BasePanelView.extend({el:"#company-franchise-list-top-panel",updateSortTitle:function(sortTitle){$("#sort-title").text(sortTitle),sortTitle?$("#sort-title").addClass("has-value"):$("#sort-title").removeClass("has-value")}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.IntroView=Fortune.FranchiseCompany2.BaseItemView.extend({el:"#intro-view",initialize:function(){},ui:{methodologyLink:".methodology-link"},events:{"click @ui.methodologyLink":"methodologyLinkClicked"},methodologyLinkClicked:function(e){e.preventDefault(),Fortune.vent.trigger("methodology:link:clicked",e)}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.SearchBarView=Fortune.FranchiseCompany2.BaseItemView.extend({optParam:["search_placeholder_text"],defaults:{search_placeholder_text:"Search company by name"},el:"#search-and-sort-title-container",ui:{clearButton:"#clear-search-query",searchInput:"#company-search-input",searchIcon:".icon-search"},events:{"click @ui.clearButton":"clearFilters","keyup @ui.searchInput":"searchKeyupEvent","click @ui.searchIcon":"applyFilters"},initialize:function(){this.$applyButton=$("#apply-button"),this.$companySearchInput=$(this.ui.searchInput),this.$filterForm=$("#filter-form")},searchKeyupEvent:function(e){e.preventDefault(),13===e.keyCode?this.$applyButton&&this.$applyButton.is(":visible")?this.applyFilters(e):$(this).next().focus():this.triggerFiltering(e)},triggerFiltering:function(e){if(e.preventDefault(),this.$applyButton&&!this.$applyButton.is(":visible")){var filterOptions=[];filterOptions=this.getFilterOptions(),this.trigger("filter:updated",filterOptions)}},applyFilters:function(e){e.preventDefault();var filterOptions=this.getFilterOptions();this.trigger("filter:updated",filterOptions),Fortune.vent.trigger("scroll:to:top")},getFilterOptions:function(){var filterOptions=[],companySearchInputValue=this.$companySearchInput.get(0).value;return this.$filterForm.find("input:checked, option:selected").each(function(){var $this=$(this),isInput=$this.is("input"),value=$this.get(0).value,name=isInput?$this.get(0).name:$this.parent().get(0).name;value=isInput||"any"!==value?value:null,"Number"===$this.data("formatType")&&(value=parseInt(value,10)),name&&value&&filterOptions.push({name:name,value:value})}),companySearchInputValue.length>0&&this.search_placeholder_text!==companySearchInputValue&&filterOptions.push({name:"search",value:companySearchInputValue.toLowerCase()}),filterOptions},clearFilters:function(e){e.preventDefault(),this.$companySearchInput.get(0).value="",this.$filterForm.find("input:checked, select").each(function(){var $this=$(this),isInput=$this.is("input");isInput?$this.prop("checked",!1):$this.val("any")}),this.trigger("filter:updated",[])}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.SortPanelView=Fortune.FranchiseCompany2.BaseItemView.extend({el:"#sort-region",ui:{li:"li",clearFilters:"#sort-region-clear-filters"},events:{"click @ui.li":"clickedLi","click @ui.clearFilters":"clearFilters"},initialize:function(){this.$sortDescriptionContainer=this.$el.find("#sort-description"),this.$companySearchInput=$("#company-search-input"),this.$filterForm=$("#filter-form"),this.initialSortDescription=this.$el.find(".selected").data("description"),this.updateSortDescription(this.initialSortDescription)},clickedLi:function(e){e.preventDefault();var $target=$(e.target),sortDescription=$target.data("description"),sort_by=$target.data("sort"),sort_by_title=$target.data("title"),order=$target.data("order");this.trigger("sort:selected",{sort_by:sort_by,sort_by_title:sort_by_title,order:order}),this.updateSelectedState(sort_by),this.updateSortDescription(sortDescription)},updateSortDescription:function(sortDescription){sortDescription?(this.$sortDescriptionContainer.text(sortDescription),this.$sortDescriptionContainer.addClass("has-value")):(this.$sortDescriptionContainer.text(""),this.$sortDescriptionContainer.removeClass("has-value"))},updateSelectedState:function(sort_by){this.$el.find(".selected").removeClass("selected").parent().find('[data-sort="'+sort_by+'"]').addClass("selected")},clearFilters:function(e){e.preventDefault(),this.$companySearchInput.get(0).value="",this.$filterForm.find("input:checked, select").each(function(){var $this=$(this),isInput=$this.is("input");isInput?$this.prop("checked",!1):$this.val("any")}),this.trigger("filter:updated",[])}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.CompanyListMainLayout=Marionette.Layout.extend({el:"#company-franchise-list-content-wrapper",regions:{companyListRegion:"#company-list-region",filtersRegion:"#filters-region"},initialize:function(){var transitionEndHandler;this.$filtersRegion=this.$(this.regions.filtersRegion),this.setupTransistion(),this.canTransition&&(transitionEndHandler=$.proxy(this.transitionEndCallBack,this),this.$filtersRegion.on(this.transitionEnd,transitionEndHandler))},setupTransistion:function(){var transition,transform,transitionEnd,key,transitions={WebkitTransition:["webkitTransitionEnd","-webkit-transition"],MozTransition:["transitionend","-moz-transition"],msTransition:["MStransitionend","-ms-transition"],OTransition:["oTransitionEnd","-o-transition"],transition:["transitionend","transition"]},transforms={webkitTransform:"-webkit-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform",OTransform:"-o-transform",transform:"transform"};for(key in transitions)if(void 0!==this.el.style[key]){transitionEnd=transitions[key][0],transition=transitions[key][1];break}for(key in transforms)if(void 0!==this.el.style[key]){transform=transforms[key];break}this.canTransition=transition&&transform&&transitionEnd,this.canTransition&&(this.isTransitioning=!1,this.transition=transition,this.transform=transform,this.transitionEnd=transitionEnd)},transitionEndCallBack:function(e){e.stopImmediatePropagation(),List.trigger("filter:region:transition:end",e)},hideFiltersRegion:function(){this.$filtersRegion.css("height",1)},showFiltersRegion:function(){this.$filtersRegion.css("height","auto")},onClose:function(){this.canTransition&&this.$filtersRegion.off(this.transitionEnd)}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.FiltersView=Fortune.FranchiseCompany2.BaseItemView.extend({optParam:["search_placeholder_text"],defaults:{search_placeholder_text:"Search company by name"},el:"#company-franchise-filters",initialize:function(options){options=options||{},_.extend(this,_.pick(options,this.optParam)),_.defaults(this,this.defaults),this.$applyButton=$(this.ui.applyButton),this.$companySearchInput=$("#company-search-input")},ui:{filterForm:"#filter-form",switchFilterInput:".switch-filter-input",dropdownFilterSelect:".dropdown-filter-select",companySearchInput:"#company-search-input",closeFiltersButtons:".close-filters",desktopCloseFilterButton:".desktop-close-filter",applyButton:"#apply-button",clearFilterButton:"#clear-filters"},events:{"change @ui.switchFilterInput":"triggerFiltering","change @ui.dropdownFilterSelect":"triggerFiltering","click @ui.closeFiltersButtons":"closeFiltersView","click @ui.desktopCloseFilterButton":"closeFilterIconClicked","click @ui.applyButton":"applyFilters","click @ui.clearFilterButton":"clearFilters","submit @ui.filterForm":"filterFormSubmit"},closeFiltersView:function(e){List.trigger("mobile:filters:close:clicked",e),Fortune.vent.trigger("scroll:to:top")},closeFilterIconClicked:function(e){e.preventDefault(),List.trigger("franchise:filters:close:icon:clicked",e)},getFilterOptions:function(){var filterOptions=[],companySearchInputValue=this.$companySearchInput.get(0).value;return this.$el.find("input:checked, option:selected").each(function(){var $this=$(this),isInput=$this.is("input"),value=$this.get(0).value,name=isInput?$this.get(0).name:$this.parent().get(0).name;value=isInput||"any"!==value?value:null,"Number"===$this.data("formatType")&&(value=parseInt(value,10)),name&&value&&filterOptions.push({name:name,value:value})}),companySearchInputValue.length>0&&this.search_placeholder_text!==companySearchInputValue&&filterOptions.push({name:"search",value:companySearchInputValue.toLowerCase()}),filterOptions},triggerFiltering:function(e){if(e.preventDefault(),this.$applyButton&&!this.$applyButton.is(":visible")){var filterOptions=[];filterOptions=this.getFilterOptions(),console.dir(filterOptions),this.trigger("filter:updated",filterOptions)}},searchKeyupEvent:function(e){e.preventDefault(),13===e.keyCode?this.$applyButton&&this.$applyButton.is(":visible")?this.applyFilters(e):$(this).next().focus():this.triggerFiltering(e)},applyFilters:function(e){e.preventDefault();var filterOptions=this.getFilterOptions();this.trigger("filter:updated",filterOptions),List.trigger("mobile:filters:close:clicked",e),Fortune.vent.trigger("scroll:to:top")},clearFilters:function(e){e.preventDefault(),this.$companySearchInput.get(0).value="",this.$el.find("input:checked, select").each(function(){var $this=$(this),isInput=$this.is("input");isInput?$this.prop("checked",!1):$this.val("any")}),this.trigger("filter:updated",[])},filterFormSubmit:function(e){e.preventDefault()}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.CompanyListPageLayout=Fortune.FranchiseCompany2.BaseTransistionLayout.extend({el:"#company-franchise-list-wrapper",regions:{mainPageRegion:"#company-franchise-list-content-wrapper",asidePageRegion:"#aside-page-region"},initialize:function(){this.initializeTransistion()},initializeTransistion:function(){var transitionEndHandler;this.setupTransistion(),this.canTransition&&(this.transitionToLeftStyle=this.transform+":translate3d(-100%,0,0); "+this.transition+": "+this.transform+" .3s ease-out; left:0; -webkit-backface-visibility: hidden;-webkit-perspective: 1000;",this.transitionToRightStyle=this.transform+":translate3d(100%,0,0); "+this.transition+": "+this.transform+" .3s ease-out; left:-50%; -webkit-backface-visibility: hidden;-webkit-perspective: 1000;",transitionEndHandler=$.proxy(this.transitionEndCallBack,this),this.$el.on(this.transitionEnd,transitionEndHandler))},transitionEndCallBack:function(e){return e.stopImmediatePropagation(),e.target!==this.$el.get(0)?!1:void(this.$el.hasClass("current")?this.$el.removeClass("current").attr("style",""):this.$el.removeClass("moving").attr("style","").addClass("current"))},setToMove:function(){this.canTransition&&this.$el.addClass("moving")},goToLeft:function(){this.canTransition?this.$el.attr("style",this.transitionToLeftStyle):this.$el.removeClass("current")},goToRight:function(){this.canTransition?this.$el.attr("style",this.transitionToRightStyle):this.$el.addClass("current")},setLoading:function(){this.$el.addClass("loading")},removeLoading:function(){this.$el.removeClass("loading")}})}),Fortune.module("FranchiseCompany2.CompanyList.List",function(List,Fortune,Backbone,Marionette,$,_){List.MethodologyView=Fortune.FranchiseCompany2.BaseItemView.extend({el:"#methodology",initialize:function(){},ui:{close:".close"},events:{"click @ui.close":"closeClicked"},closeClicked:function(e){e.preventDefault(),Fortune.vent.trigger("methodology:close:link:clicked",e)}})}),Fortune.module("FranchiseCompany2.CompanyOmniture",function(CompanyOmniture,Fortune,Backbone,Marionette,$,_){CompanyOmniture.startWithParent=!1,CompanyOmniture.on("start",function(options){CompanyOmniture.companyOmnitureController=new CompanyOmniture.Omniture.Controller(options)})}),Fortune.module("FranchiseCompany2.CompanyOmniture.Omniture",function(Omniture,Fortune,Backbone,Marionette,$,_){Omniture.Controller=Marionette.Controller.extend({omnitureOptions:[],initialize:function(options){var _this=this;options=options||{},_.extend(this,_.pick(options,this.omnitureOptions)),this.omniApi=Fortune&&Fortune.Omniture&&Fortune.Omniture.API,this.omniApi?this.initializeOmnitureSetup():this.listenToOnce(Fortune,"ready:Omniture",function(){_this.omniApi=Fortune&&Fortune.Omniture&&Fortune.Omniture.API,_this.initializeOmnitureSetup()})},bindOmnitureEvents:function(){var _this=this;this.listenTo(Fortune,"company:list:onload",function(listView){var model=_this.getDefaultProps();_this.omniApi.setOmnitureProps(model),_this.makeCall()}),this.listenTo(Fortune,"company:item:onload",function(itemView){var model=_this.getDefaultProps(),viewData=_this.getViewOmnitureData(itemView);viewData&&(model=_.extend(model,viewData)),_this.omniApi.setOmnitureProps(model),_this.makeCall()}),this.listenTo(Fortune,"company:select:list:sort",function(listView){var model=_this.getDefaultProps(),sortData=_this.getSortingData(listView.collection);sortData&&(model=_.extend(model,sortData)),_this.omniApi.setOmnitureProps(model),_this.makeCall()}),this.listenTo(Fortune,"company:click:list:sorted",function(listView){var model=_this.getDefaultProps(),sortData=_this.getSortingData(listView.collection);sortData&&(model=_.extend(model,sortData)),_this.omniApi.setOmnitureProps(model),_this.makeCall()}),this.listenTo(Fortune,"company:select:list:page:change",function(listView){_.delay(function(){var model=_this.getDefaultProps(),sortData=_this.getSortingData(listView.collection),paginationVal=_this.getPaginationVal(listView);paginationVal&&(model=_.extend(model,paginationVal)),sortData&&(model=_.extend(model,sortData)),_this.omniApi.setOmnitureProps(model),_this.makeCall()},500)}),this.listenTo(Fortune,"company:paginate:list:page:change",function(listView){_.delay(function(){var model=_this.getDefaultProps(),sortData=_this.getSortingData(listView.collection),paginationVal=_this.getPaginationVal(listView);paginationVal&&(model=_.extend(model,paginationVal)),sortData&&(model=_.extend(model,sortData)),_this.omniApi.setOmnitureProps(model),_this.makeCall()},500)}),this.listenTo(Fortune,"company:item:to:list",function(listView){var model=_this.getDefaultProps();_this.omniApi.setOmnitureProps(model),_this.makeCall()}),this.listenTo(Fortune,"company:item:activate",function(itemView){var model=_this.getDefaultProps(),viewData=_this.getViewOmnitureData(itemView);viewData&&(model=_.extend(model,viewData)),_this.omniApi.setOmnitureProps(model),_this.makeCall()}),this.listenTo(Fortune,"methodology:show",function(listView){var model=_this.getDefaultProps();model.isMethodology=!0,_this.omniApi.setOmnitureProps(model),_this.makeCall()})},initializeOmnitureSetup:function(){this.bindOmnitureEvents()},getDefaultProps:function(){var fortuneVars=fortune_wp_vars,bootstrap=fortuneVars.bootstrap,franchiseData=bootstrap.franchise,franchise_name=franchiseData.franchise_name,year=franchiseData.year,id=franchiseData.franchise_list_id,section=franchiseData.section,tag=franchiseData.tags[0].name;return{id:id,franchise_name:franchise_name,year:year,primary_tag:tag,section:section}},makeCall:function(){"undefined"==typeof utag_data&&"undefined"!=typeof s_time&&s_time.t()},getViewOmnitureData:function(view){if(view.model){var model=view.model,companyName=model.get("title");return{companyName:companyName}}return!1},getSortingData:function(collection){if(collection){var sortType=collection.sort_by_title?collection.sort_by_title:"";return{sortType:sortType}}return!1},getPaginationVal:function(listView){if(listView){var paginationVal=listView.current_page;return{paginationVal:paginationVal}}return!1}})}),Fortune.module("FranchiseCompany2.CompanyHeader",function(CompanyHeader,Fortune,Backbone,Marionette,$,_){CompanyHeader.startWithParent=!1,CompanyHeader.on("start",function(options){CompanyHeader.headerController=new CompanyHeader.Header.Controller(options)})}),Fortune.module("FranchiseCompany2.CompanyHeader.Header",function(Header,Fortune,Backbone,Marionette,$,_){Header.Controller=Marionette.Controller.extend({headerOptions:["filterIconViewOptions"],initialize:function(options){var $body=$("body"),_this=this;options=options||{},_.extend(this,_.pick(options,this.headerOptions)),this.companyTitleView=this.getCompanyTitleView(),this.socialControlView=this.getSocialControlView(),this.filterIconView=this.getFilterIconView(this.filterIconViewOptions),this.mobileSortFilterView=this.getMobileSortFilterView(),
this.mobileMethodologyView=this.getMobileMethodologyView(),Header.on("franchise:list:filter:icon:clicked",function(e){e.preventDefault(),$body.toggleClass("show-filters"),Fortune.vent.trigger("header:filter:icon:clicked",e)}),Header.on("list:sort:selected",function(sort_by){_this.mobileSortFilterView.setDropDownSortState(sort_by)}),Header.on("disable:show:filter:trigger",function(){_this.filterIconView.disableShowFilterTrigger()}),Header.on("enable:show:filter:trigger",function(){_this.filterIconView.enableShowFilterTrigger()}),jQuery(".f500-share-icon").on("click",function(){jQuery(".header-right-wrapper").toggle()})},getCompanyTitleView:function(){var companyTitleView=new Header.CompanyTitleView;return companyTitleView.on("company:franchise:year:selected",function(e){var url=$(e.currentTarget).find("option:selected").attr("value");window.location=url}),companyTitleView},getSocialControlView:function(){var socialControlView=new Header.SocialControlView;return socialControlView.on("franchise:list:social:icon:clicked",function(e){var href,width=550,height=420;options="scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+encodeURIComponent(width)+",height="+encodeURIComponent(height),e.preventDefault(),href=encodeURI($(e.currentTarget).attr("href")),window.open(href,"Share",options)}),socialControlView},getFilterIconView:function(options){return new Header.FilterIconView(options)},getMobileSortFilterView:function(){var mobileSortFilterView=new Header.MobileSortFilterView;return mobileSortFilterView},getMobileMethodologyView:function(){return new Header.MobileMethodologyView}})}),Fortune.module("FranchiseCompany2.CompanyHeader.Header",function(Header,Fortune,Backbone,Marionette,$,_){Header.CompanyTitleView=Fortune.FranchiseCompany2.BaseItemView.extend({el:"#company-franchise-title-past-franchise-wrapper",ui:{companyFranchiseYear:"#company-franchise-year"},events:{"change  @ui.companyFranchiseYear":"companyFranchiseYearSelected"},initialize:function(){},companyFranchiseYearSelected:function(e){e.preventDefault(),this.trigger("company:franchise:year:selected",e)}}),Header.SocialControlView=Fortune.FranchiseCompany2.BaseItemView.extend({el:"#company-franchise-sub-header-controls",ui:{socialIcons:'.article-social-icons a:not(".icon-mail")'},events:{"click @ui.socialIcons":"socialIconsClicked"},initialize:function(){},socialIconsClicked:function(e){e.preventDefault(),this.trigger("franchise:list:social:icon:clicked",e)}}),Header.FilterIconView=Fortune.FranchiseCompany2.BaseItemView.extend({el:"#company-franchise-filter",events:{click:"filterIconClicked"},initialize:function(options){this.enableShow=options.enableShow,this.enableShow||this.$el.addClass("disable")},filterIconClicked:function(e){e.preventDefault(),this.enableShow&&Header.trigger("franchise:list:filter:icon:clicked",e)},enableShowFilterTrigger:function(){this.enableShow=!0,this.$el.removeClass("disable")},disableShowFilterTrigger:function(){this.enableShow=!1,this.$el.addClass("disable")}}),Header.MobileSortFilterView=Fortune.FranchiseCompany2.BaseItemView.extend({el:"#mobile-sort-and-filter-container",ui:{mobileSortDropDown:"#mobile-sort-select",mobileFilterContainer:"#mobile-filter-container"},events:{"click @ui.mobileFilterContainer":"filterIconClicked","change @ui.mobileSortDropDown":"sortSelected"},initialize:function(){},filterIconClicked:function(e){e.preventDefault(),Header.trigger("franchise:list:filter:icon:clicked",e)},sortSelected:function(e){e.preventDefault(),Fortune.vent.trigger("mobile:sort:selected",e)},setDropDownSortState:function(sort_by){this.$(this.ui.mobileSortDropDown).val(sort_by)}}),Header.MobileMethodologyView=Fortune.FranchiseCompany2.BaseItemView.extend({el:"#mobile-methodology",ui:{methodologyLink:".methodology-link"},events:{"click @ui.methodologyLink":"methodologyLinkClicked"},methodologyLinkClicked:function(e){e.preventDefault(),Fortune.vent.trigger("methodology:link:clicked",e)}})});;
Fortune.templates=Fortune.templates||{},Fortune.templates["article-format-list"]=[{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"list_item",expression:[{type:"Twig.expression.type.variable",value:"list_items",match:["list_items"]},{type:"Twig.expression.type.key.period",key:"items"}],output:[{type:"raw",value:"\n	"},{type:"logic",token:{type:"Twig.logic.type.set",key:"listicle_id",expression:[{type:"Twig.expression.type.string",value:"listicle-item-"},{type:"Twig.expression.type.variable",value:"id",match:["id"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}},{type:"raw",value:'\n	<div class="listicle-item" id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"listicle_id",match:["listicle_id"]}]},{type:"raw",value:'">\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"title"}],output:[{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"list_items",match:["list_items"]},{type:"Twig.expression.type.key.period",key:"ranked"}],output:[{type:"raw",value:"				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"DESC"},{type:"Twig.expression.type.variable",value:"list_items",match:["list_items"]},{type:"Twig.expression.type.key.period",key:"order"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'					<div class="listicle-item-number">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"list_items",match:["list_items"]},{type:"Twig.expression.type.key.period",key:"items"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:"</div>\n				"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'					<div class="listicle-item-number">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:"</div>\n				"}]}},{type:"raw",value:"			"}]}},{type:"raw",value:'			<h2 class="listicle-title">\n				'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:'\n			</h2>\n			<div class="social-icons article-byline-social article-social"></div>\n		'}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"img"}],output:[{type:"raw",value:'			<img class="listicle-image" src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"img"}]},{type:"raw",value:'" alt="">\n			<div class="caption">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"img_credit"}]},{type:"raw",value:"</div>\n		"}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"content"}],output:[{type:"raw",value:'			<div class="listicle-body">\n				'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"content"}]},{type:"raw",value:"\n			</div>\n		"}]}},{type:"raw",value:"	</div>\n\n"}]}}],Fortune.templates["article-format-qa"]=[{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"qa",expression:[{type:"Twig.expression.type.variable",value:"qas",match:["qas"]}],output:[{type:"raw",value:'\n	<div class="qa">\n		<p class="qa-question">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"qa",match:["qa"]},{type:"Twig.expression.type.key.period",key:"question"}]},{type:"raw",value:'</p>\n		<div class="qa-answer">\n			'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"qa",match:["qa"]},{type:"Twig.expression.type.key.period",key:"answer"}]},{type:"raw",value:"\n		</div>\n	</div>\n\n"}]}},{type:"raw",value:"\n"}],Fortune.templates["article-paywall"]=[{type:"raw",value:'<div class="premium-content-wrapper">\n	<p class="full-access">For full access, <a href="https://subscription.fortune.com/storefront/subscribe-to-fortune/link/1022060.html">Subscribe</a> or <a href="#subscribe" class="article-nav-signin">Sign In</a> today.</p>\n	<div class="premium-content cm_body_subscribe_module_wrapper" id="cm-road-block-ad-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:"\"></div>\n</div>\n<script>\n	( function( $ ) {\n		$.cookie('lastTeaserPage', '"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"encoded_url"}]},{type:"raw",value:"', { expires: 1, path: '/', domain: '.fortune.com' });\n	} )( jQuery );\n</script>\n"}],Fortune.templates["article-single"]=[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"top_article_ad_id",match:["top_article_ad_id"]}],output:[{type:"raw",value:'	<div class="top-article-ad fortune-ad-unit"id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"top_article_ad_id",match:["top_article_ad_id"]}]},{type:"raw",value:'"></div>\n'}]}},{type:"raw",value:"\n"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"nativo",match:["nativo"]},{type:"Twig.expression.type.variable",value:"landing_url",match:["landing_url"]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'	<div class="sponsored-banner">\n		<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"advertiser_url",match:["advertiser_url"]}]},{type:"raw",value:'" target="_blank" class="sponsor-logo"><img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"advertiser_logo",match:["advertiser_logo"]}]},{type:"raw",value:'" alt=""></a>\n		<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"landing_url",match:["landing_url"]}]},{type:"raw",value:'" class="sponsor-name">Content From: <span>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"advertiser_name",match:["advertiser_name"]}]},{type:"raw",value:"</span><!-- placeholder for sponsor name, tagline --></a>\n	</div>\n"}]}},{type:"raw",value:"\n<div "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"post"},{type:"Twig.expression.type.variable",value:"post_type",match:["post_type"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:' itemscope itemtype="http://schema.org/Article" '}]}},{type:"raw",value:' class="article-inner '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"post_type",match:["post_type"]}]},{type:"raw",value:'">\n\n	<header class="article-header">\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"nativo",match:["nativo"]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:'			<div class="article-tags">\n				'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"section",match:["section"]}],output:[{type:"raw",value:'					<a class="article-section-tag" itemprop="articleSection" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"section",match:["section"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"section",match:["section"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</a>\n				"}]}},{type:"raw",value:"				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"primary_tag",match:["primary_tag"]}],output:[{type:"raw",value:'					<a class="article-primary-tag" itemprop="articleSection" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"primary_tag",match:["primary_tag"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"primary_tag",match:["primary_tag"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</a>\n				"}]}},{type:"raw",value:"				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"f500_tag",match:["f500_tag"]},{type:"Twig.expression.type.variable",value:"f500_url",match:["f500_url"]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}]}],output:[{type:"raw",value:'					<div class="f500-bug-container">\n						<a class="f500-bug icon-f500-banner" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"f500_url",match:["f500_url"]}]},{type:"raw",value:'" data-event="fortune500_slug">See the <span>Fortune 500</span> list</a>\n					</div>\n				'}]}},{type:"raw",value:"			</div>\n		"}]}},{type:"raw",value:'\n		<h1 class="article-headline" itemprop="headline">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:'</h1>\n\n		<div class="article-byline">\n\n			'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"company_news"},{type:"Twig.expression.type.variable",value:"post_type",match:["post_type"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'				<ul class="article-byline-authors article-byline-item">\n					<li>by&nbsp;</li>\n					<li><a class="article-byline-author" itemprop="author" href="http://www.reuters.com/" target="_blank"><span>Reuters</span></a></li>\n				</ul>\n			'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"authors",match:["authors"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'					<ul class="article-byline-authors article-byline-item">\n						'},{type:"logic",token:{type:"Twig.logic.type.set",key:"tag_label",expression:[{type:"Twig.expression.type.string",value:""}]}},{type:"raw",value:"						"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"has_commentary_tag",match:["has_commentary_tag"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"has_commentary_tag",match:["has_commentary_tag"]},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.set",key:"tag_label",expression:[{type:"Twig.expression.type.string",value:'<span class="article-byline-tag-label">COMMENTARY</span>&nbsp;'}]}},{type:"raw",value:"							"}]}},{type:"raw",value:"						"}]}},{type:"raw",value:"						<li>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tag_label",match:["tag_label"]}]},{type:"raw",value:"by&nbsp;</li>\n						"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"author",expression:[{type:"Twig.expression.type.variable",value:"authors",match:["authors"]}],output:[{type:"raw",value:"							<li>\n								"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"url"}],output:[{type:"raw",value:'									<a class="article-byline-author" itemprop="author" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">\n								'}]}},{type:"raw",value:"										<span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</span>\n										"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"last"}]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"is_guest_writer"}]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"											<span>,&nbsp;</span>\n										"}]}},{type:"raw",value:"										"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"is_guest_writer"}],output:[{type:"raw",value:"											<span>,&nbsp;at&nbsp;</span>\n										"}]}},{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"url"}],output:[{type:"raw",value:"									</a>\n								"}]}},{type:"raw",value:"							</li>\n						"}]}},{type:"raw",value:"					</ul>\n					"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"authors",match:["authors"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"twitter"}],output:[{type:"raw",value:'					<ul class="article-byline-twitters article-byline-item">\n						<li>\n							<a class="author-byline-twitter" target="_blank" href="https://twitter.com/'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"authors",match:["authors"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"twitter"}]},{type:"raw",value:'">@'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"authors",match:["authors"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"twitter"}]},{type:"raw",value:"</a>\n						</li>\n					"}]}},{type:"raw",value:"					</ul>\n				"}]}},{type:"raw",value:"			"}]}},{type:"raw",value:'\n			<time class="article-byline-time article-byline-item" itemprop="datePublished" datetime="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"published"}]},{type:"raw",value:'" pubdate>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"pretty"}]},{type:"raw",value:", "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"minute"}]},{type:"raw",value:'</time>\n\n			<div class="social-icons article-byline-social article-social"></div>\n\n			'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"edit_link",match:["edit_link"]}],output:[{type:"raw",value:'				<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"edit_link",match:["edit_link"]}]},{type:"raw",value:'" target="_blank" class="edit-link time-icons time-icons-edit"></a>\n			'}]}},{type:"raw",value:'\n		</div>\n	</header>\n\n	<div class="article-body" itemprop="articleBody">\n\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"src"},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:"			<hr />\n		"}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"hide_featured_image",match:["hide_featured_image"]},{type:"Twig.expression.type.test",filter:"defined"}]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"featured_gallery",match:["featured_gallery"]},{type:"Twig.expression.type.test",filter:"defined"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"featured_gallery",match:["featured_gallery"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"				"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_gallery",match:["featured_gallery"]}]},{type:"raw",value:"\n			"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.string",value:"featured-vid-article_full"},{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"class"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"html"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'				<figure class="article-primary-image featured-video '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"class"}]},{type:"raw",value:'">\n					<div class="full-video">\n						'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"html"}]},{type:"raw",value:"\n					</div>\n				</figure>\n			"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.string",value:"featured-img-article_full"},{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"class"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"src"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'				<figure class="article-primary-image '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"class"}]},{type:"raw",value:'">\n					<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"src"}]},{type:"raw",value:'" itemprop="image" alt="">\n				</figure>\n			'}]}},{type:"raw",value:"		"}]}},{type:"raw",value:'\n		<div class="article-bottom">\n			'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"format",match:["format"]},{type:"Twig.expression.type.key.period",key:"slug"},{type:"Twig.expression.type.string",value:"fortune-post-format-list"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"				"},{type:"logic",token:{type:"Twig.logic.type.set",key:"artice_body_text_class",expression:[{type:"Twig.expression.type.string",value:"article-body-text article-listicle"}]}},{type:"raw",value:"\n				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.string",value:"featured-img-article_full"},{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"class"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"src"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"					"},{type:"logic",token:{type:"Twig.logic.type.set",key:"artice_body_text_class",expression:[{type:"Twig.expression.type.variable",value:"artice_body_text_class",match:["artice_body_text_class"]},{type:"Twig.expression.type.string",value:" "},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"article-listicle-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"class"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}},{type:"raw",value:"				"}]}},{type:"raw",value:"			"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"				"},{type:"logic",token:{type:"Twig.logic.type.set",key:"artice_body_text_class",expression:[{type:"Twig.expression.type.string",value:"article-body-text rail-offset"}]}},{type:"raw",value:"			"}]}},{type:"raw",value:"\n			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article_top",match:["article_top"]}],output:[{type:"raw",value:"				"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article_top",match:["article_top"]}]},{type:"raw",value:"\n			"}]}},{type:"raw",value:'\n			<div class="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"artice_body_text_class",match:["artice_body_text_class"]}]},{type:"raw",value:'">\n				'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"hide_featured_image",match:["hide_featured_image"]},{type:"Twig.expression.type.test",filter:"defined"}]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:"					"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.string",value:"featured-vid-article_half"},{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"class"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"html"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'						<figure class="article-primary-image featured-video '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"class"}]},{type:"raw",value:'">\n							<div class="full-video">\n								'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"html"}]},{type:"raw",value:"\n							</div>\n						</figure>\n					"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.string",value:"featured-img-article_full"},{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"class"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"src"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'						<figure class="article-primary-image '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"class"}]},{type:"raw",value:'">\n							<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"src"}]},{type:"raw",value:'" itemprop="image" alt="">\n						</figure>\n					'}]}},{type:"raw",value:"\n					"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"caption"},{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"credit"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'						<figcaption class="article-image-figcaption">\n							'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"caption"}],output:[{type:"raw",value:'								<span class="article-image-caption">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"caption"}]},{type:"raw",value:"</span>\n							"}]}},{type:"raw",value:"							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"credit"}],output:[{type:"raw",value:'								<span class="article-image-credit">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"credit"}]},{type:"raw",value:"</span>\n							"}]}},{type:"raw",value:"						</figcaption>\n					"
}]}},{type:"raw",value:"				"}]}},{type:"raw",value:"\n				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"excerpt",match:["excerpt"]}],output:[{type:"raw",value:'					<h2 class="article-excerpt" itemprop="alternativeHeadline">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"excerpt",match:["excerpt"]}]},{type:"raw",value:"</h2>\n				"}]}},{type:"raw",value:"				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"format",match:["format"]},{type:"Twig.expression.type.key.period",key:"slug"},{type:"Twig.expression.type.string",value:"fortune-post-format-list"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'					<div class="listicle-intro">\n						<div class="listicle-intro-content">\n						'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"content",match:["content"]}]},{type:"raw",value:'\n						</div>\n						<div class="listicle-intro-right-rail">\n						'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"hide_featured_image",match:["hide_featured_image"]},{type:"Twig.expression.type.test",filter:"defined"}]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:"							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"caption"},{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"credit"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'								<figcaption class="article-image-figcaption">\n									'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"caption"}],output:[{type:"raw",value:'										<span class="article-image-caption">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"caption"}]},{type:"raw",value:"</span>\n									"}]}},{type:"raw",value:"									"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"credit"}],output:[{type:"raw",value:'										<span class="article-image-credit">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"credit"}]},{type:"raw",value:"</span>\n									"}]}},{type:"raw",value:"								</figcaption>\n							"}]}},{type:"raw",value:"						"}]}},{type:"raw",value:"\n							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"intro_listicle_ad",match:["intro_listicle_ad"]}],output:[{type:"raw",value:'								<div class="listicle-ad fortune-ad-unit" id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"intro_listicle_ad",match:["intro_listicle_ad"]}]},{type:"raw",value:'" ></div>\n							'}]}},{type:"raw",value:"						</div>\n					</div>\n\n				"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"					"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"content",match:["content"]}]},{type:"raw",value:"\n				"}]}},{type:"raw",value:"\n				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"format",match:["format"]},{type:"Twig.expression.type.key.period",key:"slug"},{type:"Twig.expression.type.string",value:"fortune-post-format-list"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"					"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"list_item",expression:[{type:"Twig.expression.type.variable",value:"list_items",match:["list_items"]},{type:"Twig.expression.type.key.period",key:"items"}],output:[{type:"raw",value:"\n						"},{type:"logic",token:{type:"Twig.logic.type.set",key:"listicle_id",expression:[{type:"Twig.expression.type.string",value:"listicle-item-"},{type:"Twig.expression.type.variable",value:"id",match:["id"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}},{type:"raw",value:'\n						<div class="listicle-item" id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"listicle_id",match:["listicle_id"]}]},{type:"raw",value:'">\n							<div class="listicle-content">\n							'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"title"}],output:[{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"list_items",match:["list_items"]},{type:"Twig.expression.type.key.period",key:"ranked"}],output:[{type:"raw",value:"									"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"DESC"},{type:"Twig.expression.type.variable",value:"list_items",match:["list_items"]},{type:"Twig.expression.type.key.period",key:"order"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'										<div class="listicle-item-number">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"list_items",match:["list_items"]},{type:"Twig.expression.type.key.period",key:"items"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:"</div>\n									"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'										<div class="listicle-item-number">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:"</div>\n									"}]}},{type:"raw",value:"								"}]}},{type:"raw",value:'								<h2 class="listicle-title">\n									'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:'\n								</h2>\n								<div class="social-icons article-byline-social article-social"></div>\n							'}]}},{type:"raw",value:"\n							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"img"}],output:[{type:"raw",value:'								<div class="listicle-image-wrapper">\n									<img class="listicle-image" src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"img"}]},{type:"raw",value:'" alt="">\n									<div class="credit">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"img_credit"}]},{type:"raw",value:"</div>\n								</div>\n							"}]}},{type:"raw",value:"\n							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"content"}],output:[{type:"raw",value:'								<div class="listicle-body">\n									'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"content"}]},{type:"raw",value:"\n								</div>\n							"}]}},{type:"raw",value:"							</div>\n							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"list_item_ad_id"}],output:[{type:"raw",value:'								<div class="listicle-ad fortune-ad-unit" id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"list_item_ad_id"}]},{type:"raw",value:'" data-pos='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"list_item",match:["list_item"]},{type:"Twig.expression.type.key.period",key:"list_item_ad_pos"}]},{type:"raw",value:"></div>\n							"}]}},{type:"raw",value:"						</div>\n\n					"}]}},{type:"raw",value:"\n				"}]}},{type:"raw",value:"\n			</div>\n\n			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"format",match:["format"]},{type:"Twig.expression.type.key.period",key:"slug"},{type:"Twig.expression.type.string",value:"fortune-post-format-list"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"src"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'				<div class="right-rail rail '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"class"}]},{type:"raw",value:'">\n			'}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"html"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'				<div class="right-rail rail featured-video '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"class"}]},{type:"raw",value:'">\n			'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'				<div class="right-rail rail '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"nativo",match:["nativo"]}]}],output:[{type:"raw",value:"nativo"}]}},{type:"raw",value:'">\n			'}]}},{type:"raw",value:"\n			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"hide_featured_image",match:["hide_featured_image"]},{type:"Twig.expression.type.test",filter:"defined"}]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:"				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"caption"},{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"credit"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'					<figcaption class="article-image-figcaption">\n						'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"caption"}],output:[{type:"raw",value:'							<span class="article-image-caption">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"caption"}]},{type:"raw",value:"</span>\n						"}]}},{type:"raw",value:"						"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"credit"}],output:[{type:"raw",value:'							<span class="article-image-credit">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"credit"}]},{type:"raw",value:"</span>\n						"}]}},{type:"raw",value:"					</figcaption>\n				"}]}},{type:"raw",value:"			"}]}},{type:"raw",value:'\n				<div class="right-rail-inner"></div>\n\n				'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article_right_rail",match:["article_right_rail"]}],output:[{type:"raw",value:"					"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article_right_rail",match:["article_right_rail"]}]},{type:"raw",value:"\n				"}]}},{type:"raw",value:"\n				</div>\n			"}]}},{type:"raw",value:"\n			</div>\n\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"paid",match:["paid"]}],output:[{type:"raw",value:'			<div class="paywall-box"></div>\n		'}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"nativo",match:["nativo"]}],output:[{type:"raw",value:'			<div class="right-rail-article-bottom rail nativo">\n				<div class="right-rail-article-bottom-inner"></div>\n			</div>\n		'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'			<div class="article-mobile-ad mobile article_body_mobile_multi_wrapper"></div>\n			<div id="mobile-adhesive-ad" class="mobile-adhesive-ad"></div>\n		'}]}},{type:"raw",value:'\n		<footer class="article-footer">\n\n			<div class="article-meta">\n\n				'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"outbrain_footer",match:["outbrain_footer"]}],output:[{type:"raw",value:'				<div class="OUTBRAIN ob-footer-module" data-src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"outbrain_url",match:["outbrain_url"]}]},{type:"raw",value:'" data-widget-id="" data-ob-template="Fortune"></div>\n				'}]}},{type:"raw",value:'\n				<div class="footer-module-dianomi"></div>\n\n				<div class="social-icons article-footer-item article-footer-social"></div>\n\n				'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"nativo",match:["nativo"]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:'				<div class="article-footer-comments-and-reprints">\n					'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"html"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'					<a class="article-footer-item article-footer-reprint" href="#reprint">Licensing</a>\n					'}]}},{type:"raw",value:"				</div>\n				"}]}},{type:"raw",value:"\n			</div>\n\n    </footer>\n\n	</div>\n</div>\n"}],Fortune.templates["article-social"]=[{type:"raw",value:'<ul class="social-tooltip article-social-icons">\n	'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"authors",match:["authors"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"twitter"}],output:[{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.set",key:"twitter_related",expression:[{type:"Twig.expression.type.variable",value:"authors",match:["authors"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"twitter"}]}},{type:"raw",value:"	"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.set",key:"twitter_related",expression:[{type:"Twig.expression.type.string",value:"@FortuneMagazine"}]}},{type:"raw",value:"	"}]}},{type:"raw",value:"\n	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"franchise-list-item"},{type:"Twig.expression.type.variable",value:"post_type",match:["post_type"]},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.string",value:"franchise-list"},{type:"Twig.expression.type.variable",value:"post_type",match:["post_type"]},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"short_title",match:["short_title"]}],output:[{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.set",key:"share_title",expression:[{type:"Twig.expression.type.variable",value:"short_title",match:["short_title"]}]}},{type:"raw",value:"		"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.set",key:"share_title",expression:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]}},{type:"raw",value:"		"}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"excerpt",match:["excerpt"]}],output:[{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.set",key:"share_excerpt",expression:[{type:"Twig.expression.type.string",value:"Thought you might be interested in this: "},{type:"Twig.expression.type.variable",value:"excerpt",match:["excerpt"]},{type:"Twig.expression.type.filter",value:"striptags",match:["|striptags","striptags"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}},{type:"raw",value:"		"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.set",key:"share_excerpt",expression:[{type:"Twig.expression.type.string",value:"Thought you might be interested in this: "}]}},{type:"raw",value:"		"}]}},{type:"raw",value:"	"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.set",key:"share_title",expression:[{type:"Twig.expression.type.variable",value:"title",match:["title"]},{type:"Twig.expression.type.string",value:" on the "},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"list_title",match:["list_title"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.set",key:"share_excerpt",expression:[{type:"Twig.expression.type.string",value:"Read about "},{type:"Twig.expression.type.variable",value:"title",match:["title"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:" on the "},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"list_title",match:["list_title"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:": "},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}},{type:"raw",value:"	"}]}},{type:"raw",value:"\n  "},{type:"logic",token:{type:"Twig.logic.type.set",key:"full_link",expression:[{type:"Twig.expression.type.string",value:"http://fortune.com"},{type:"Twig.expression.type.variable",value:"url",match:["url"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}},{type:"raw",value:"\n  "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"shortlink"}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"share_link",expression:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"shortlink"}]}},{type:"raw",value:"  "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"share_link",expression:[{type:"Twig.expression.type.variable",value:"full_link",match:["full_link"]}]}},{type:"raw",value:"  "}]}},{type:"raw",value:"\n  "},{type:"raw",value:"\n  "},{type:"raw",value:"\n  "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"?"},{type:"Twig.expression.type.variable",value:"share_link",match:["share_link"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"qas",expression:[{type:"Twig.expression.type.string",value:"&"}]}},{type:"raw",value:"  "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"qas",expression:[{type:"Twig.expression.type.string",value:"?"}]}},{type:"raw",value:"  "}]}},{type:"raw",value:"\n  "},{type:"raw",value:"\n  "},{type:"raw",value:"\n   "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"?"},{type:"Twig.expression.type.variable",value:"full_link",match:["full_link"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"qaf",expression:[{type:"Twig.expression.type.string",value:"&"}]}},{type:"raw",value:"  "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"qaf",expression:[{type:"Twig.expression.type.string",value:"?"}]}},{type:"raw",value:"  "}]}},{type:"raw",value:"\n\n	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"nativo",match:["nativo"]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.set",key:"twitter_via",expression:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.string",value:" via @FortuneMagazine"},{type:"Twig.expression.type.filter",value:"url_encode",match:["|url_encode","url_encode"]}]}]}},{type:"raw",value:"	"}]}},{type:"raw",value:'\n	<li>\n		<a href="'},{type:"output",stack:[{type:"Twig.expression.type.string",value:"mailto:?subject="},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"share_title",match:["share_title"]},{type:"Twig.expression.type.filter",value:"url_encode",match:["|url_encode","url_encode"]}]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"&body="},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"share_excerpt",match:["share_excerpt"]},{type:"Twig.expression.type.filter",value:"url_encode",match:["|url_encode","url_encode"]}]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"share_link",match:["share_link"]},{type:"Twig.expression.type.variable",value:"qas",match:["qas"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"xid=for_em_sh"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"Twig.expression.type.filter",value:"url_encode",match:["| url_encode","url_encode"]}]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:'" class="soc-track icon-mail" aria-hidden="true" data-share=\'{ "event_name" : "social_share", "social_network" : "email" , "click_id" : "share-email-button" }\'></a>\n		<span class="screen-reader-text">E-mail</span>\n	</li>\n	<li>\n		<a href="'},{type:"output",stack:[{type:"Twig.expression.type.string",value:"https://twitter.com/share?url="},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"share_link",match:["share_link"]},{type:"Twig.expression.type.variable",value:"qas",match:["qas"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"xid=for_tw_sh"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"Twig.expression.type.filter",value:"url_encode",match:["| url_encode","url_encode"]}]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"&text="},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"twitter_text"},{type:"Twig.expression.type.filter",value:"url_encode",match:["|url_encode","url_encode"]}]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"twitter_via",match:["twitter_via"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"&related="},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"twitter_related",match:["twitter_related"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:'" target="_blank" class="soc-track icon-twitter" aria-hidden="true" data-share=\'{ "event_name" : "social_share", "social_network" : "twitter" , "click_id" : "share-twitter-button" }\'></a>\n		<span class="screen-reader-text">Tweet</span>\n	</li>\n	\n	<li>\n		<a href="'},{type:"output",stack:[{type:"Twig.expression.type.string",value:"http://www.facebook.com/sharer.php?u="},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"full_link",match:["full_link"]},{type:"Twig.expression.type.variable",value:"qaf",match:["qaf"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"xid=for_fb_sh"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"Twig.expression.type.filter",value:"url_encode",match:["| url_encode","url_encode"]}]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"&t=Check out "},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"share_title",match:["share_title"]},{type:"Twig.expression.type.filter",value:"url_encode",match:["|url_encode","url_encode"]}]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:" on Fortune.com"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:'" target="_blank" class="soc-track icon-facebook" aria-hidden="true" data-share=\'{ "event_name" : "social_share", "social_network" : "facebook" , "click_id" : "share-facebook-button" }\'></a>\n		<span class="screen-reader-text">Facebook</span>\n	</li>\n	<li>\n		<a href="'},{type:"output",stack:[{type:"Twig.expression.type.string",value:"http://www.linkedin.com/shareArticle?mini=true&url="},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",
value:"share_link",match:["share_link"]},{type:"Twig.expression.type.variable",value:"qas",match:["qas"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"xid=for_li_sh"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"Twig.expression.type.filter",value:"url_encode",match:["| url_encode","url_encode"]}]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"&title=Check out "},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"share_title",match:["share_title"]},{type:"Twig.expression.type.filter",value:"url_encode",match:["|url_encode","url_encode"]}]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:" on Fortune.com:"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"&source=Fortune"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:'" target="_blank" class="soc-track icon-linkedin" aria-hidden="true" data-share=\'{ "event_name" : "social_share", "social_network" : "linkedin" , "click_id" : "share-linkedin-button" }\'></a>\n		<span class="screen-reader-text">Linkedin</span>\n	</li>\n	\n</ul>\n'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"franchise-list-item"},{type:"Twig.expression.type.variable",value:"post_type",match:["post_type"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'	<span class="icon-share show-all-social-icon" aria-hidden="true" title="Click to view article share options">Share</span>\n'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'	<span class="icon-share show-all-social-icon" aria-hidden="true" title="Click to view article share options"></span>\n'}]}},{type:"raw",value:'<span class="screen-reader-text">Share icons</span>\n'}],Fortune.templates["article-tile"]=[{type:"raw",value:'<div class="content '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"post_type",match:["post_type"]}]},{type:"raw",value:'">\n	'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"nativo",match:["nativo"]},{type:"Twig.expression.type.variable",value:"landing_url",match:["landing_url"]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'		<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"landing_url",match:["landing_url"]}]},{type:"raw",value:'" '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"isClickOut",match:["isClickOut"]}],output:[{type:"raw",value:'target="_blank"'}]}},{type:"raw",value:' class="sponsor-name rail-offset">Content From: <span>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"advertiser_name",match:["advertiser_name"]}]},{type:"raw",value:"</span><!-- placeholder for sponsor name, tagline --></a>\n	"}]}},{type:"raw",value:'	<h3 class="rail-article-title">\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.string",value:"franchise-list-item"},{type:"Twig.expression.type.variable",value:"post_type",match:["post_type"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'			<span class="rail">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]}]},{type:"raw",value:"</span>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"partner",match:["partner"]}]}],output:[{type:"raw",value:'			<span class="left-rail-partner-name">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"partner",match:["partner"]}]},{type:"raw",value:"</span>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"isClickOut",match:["isClickOut"]}]}],output:[{type:"raw",value:'			<a class="article-permalink rail-offset partner" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"url",match:["url"]}]},{type:"raw",value:'" target="_blank" data-event="tile">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"</a>\n		"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'		   <a class="article-permalink rail-offset" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"url",match:["url"]},{type:"Twig.expression.type.string",value:"?iid=leftrail"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:'" '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"isClickOut",match:["isClickOut"]}],output:[{type:"raw",value:'target="_blank"'}]}},{type:"raw",value:' data-event="tile">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"</a>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"paid",match:["paid"]}],output:[{type:"raw",value:'			<span class="icon icon-key"></span>\n		'}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"featured_gallery",match:["featured_gallery"]},{type:"Twig.expression.type.test",filter:"defined"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"featured_gallery",match:["featured_gallery"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'			<span class="icon icon-photo"></span>\n		'}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"is_same_day"}],output:[{type:"raw",value:'		<time datetime="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"updated"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"minute"}]},{type:"raw",value:"</time>\n		"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'			<time datetime="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"updated"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"pretty"}]},{type:"raw",value:"</time>\n		"}]}},{type:"raw",value:"	</h3>\n\n	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"topic",match:["topic"]}],output:[{type:"raw",value:'<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"url",match:["url"]}]},{type:"raw",value:'" class="full-coverage-link" data-event="tile">Full Coverage</a>'}]}},{type:"raw",value:"\n	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"fortune_video"},{type:"Twig.expression.type.variable",value:"post_type",match:["post_type"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'		<span class="icon icon-video"></span>\n	'}]}},{type:"raw",value:"\n</div>\n"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"edit_link",match:["edit_link"]}],output:[{type:"raw",value:'<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"edit_link",match:["edit_link"]}]},{type:"raw",value:'" target="_blank" class="edit-link tr time-icons time-icons-edit"></a>'}]}}],Fortune.templates["company-articles"]=[{type:"raw",value:"<div>\n	This is a test!\n</div>\n"}],Fortune.templates["company-item"]=[{type:"raw",value:'<div class="company-franchise-list-item-content content-well-wrapper">\n	<div class="company-franchise-list-item-content content-well">\n\n		<div class="company-item-header">\n\n			<div class="company-item-info-container">\n				<div class="rank-name-mkt-data-container">\n					<div class="rank-and-name-container">\n						'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]}],output:[{type:"raw",value:'							<div class="company-rank">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]}]},{type:"raw",value:".</div>\n						"}]}},{type:"raw",value:'\n							<h2 class="company-name-and-mkt-data">\n								<div class="title">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"</div>\n								"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.key.period",key:"symbol"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'									<span class="company-list-mkt-data '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.key.period",key:"class_status"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.key.period",key:"symbol"}]},{type:"raw",value:", "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"change-percent"}]}]},{type:"raw",value:"%</span>\n								"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'									<span class="company-type">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:"</span>\n								"}]}},{type:"raw",value:'							</h2>\n\n					</div>\n				</div>\n				<div data-event="company close" class="close-mobile-profile-link-container">\n					<div class="close icon-x">\n					</div>\n					<div class="close icon-close">\n					</div>\n					'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"link"}],output:[{type:"raw",value:'						<div class="mobile-profile-link-container">\n							<a data-event="company full profile" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"link"}]},{type:"raw",value:'">See Full Profile</a>\n						</div>\n					'}]}},{type:"raw",value:'\n				</div>\n			</div>\n\n			<div class="social-and-profile-link-wrapper">\n				<div class="article-social-wrapper">\n						<ul class="article-social-icons">\n							'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"twitter"},{type:"Twig.expression.type.key.period",key:"description"}],output:[{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.set",key:"social_twitter_description",expression:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"twitter"},{type:"Twig.expression.type.key.period",key:"description"}]}},{type:"raw",value:"							"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.set",key:"social_twitter_description",expression:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]}},{type:"raw",value:"							"}]}},{type:"raw",value:"\n							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"facebook"},{type:"Twig.expression.type.key.period",key:"description"}],output:[{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.set",key:"social_facebook_description",expression:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"facebook"},{type:"Twig.expression.type.key.period",key:"description"}]}},{type:"raw",value:"							"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.set",key:"social_facebook_description",expression:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]}},{type:"raw",value:"							"}]}},{type:"raw",value:"\n							"},{type:"logic",token:{type:"Twig.logic.type.set",key:"social_url",expression:[{type:"Twig.expression.type.variable",value:"shortlink",match:["shortlink"]}]}},{type:"raw",value:'							<li>\n								<a data-event="share email" aria-hidden="true" class="icon-mail" href="mailto:?subject='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"&amp;body="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"permalink",match:["permalink"]}]},{type:"raw",value:'"></a>\n								<span class="screen-reader-text">E-mail</span>\n							</li>\n							<li>\n								<a data-event="share twitter" aria-hidden="true" class="icon-twitter" target="_blank" href="https://twitter.com/intent/tweet?url='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social_url",match:["social_url"]}]},{type:"raw",value:"&amp;text="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social_twitter_description",match:["social_twitter_description"]}]},{type:"raw",value:'"></a>\n								<span class="screen-reader-text">Tweet</span>\n							</li>\n							<li>\n								<a data-event="share facebook" aria-hidden="true" class="icon-facebook" target="_blank" href="http://www.facebook.com/sharer.php?u='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social_url",match:["social_url"]}]},{type:"raw",value:"&amp;t="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social_facebook_description",match:["social_facebook_description"]}]},{type:"raw",value:'"></a>\n								<span class="screen-reader-text">Facebook</span>\n							</li>\n							<li>\n								<a data-event="share linkedin" aria-hidden="true" class="icon-linkedin" target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social_url",match:["social_url"]}]},{type:"raw",value:"&amp;title="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:'&amp;source=Fortune"></a>\n								<span class="screen-reader-text">Linkedin</span>\n							</li>\n\n						</ul>\n\n				</div>\n				'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"link"}],output:[{type:"raw",value:'					<div class="link-wrapper">\n						<a data-event="company full profile" class="company-profile-link" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"link"}]},{type:"raw",value:'">See Full Profile</a>\n					</div>\n				'}]}},{type:"raw",value:'			</div>\n		</div>\n\n		<div class="company-feature-media">\n			'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"videos",match:["videos"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.variable",value:"videos",match:["videos"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"video"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"				"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"videos",match:["videos"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"video"}]},{type:"raw",value:"\n			"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"imageSrc",match:["imageSrc"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'				<div class="company-feature-image">\n\n						<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"imageSrc",match:["imageSrc"]}]},{type:"raw",value:'" />\n\n						'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"credit"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'							<span class="company-image-credit">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"credit"}]},{type:"raw",value:"</span>\n						"}]}},{type:"raw",value:"\n				</div>\n			"}]}},{type:"raw",value:"		</div>\n\n\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"description",match:["description"]}],output:[{type:"raw",value:'		<div class="company-desc">\n			'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"description",match:["description"]}]},{type:"raw",value:"\n		</div>\n		"}]}},{type:"raw",value:'\n		<div class="company-data">\n\n			'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"tables",match:["tables"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"\n				"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"table",expression:[{type:"Twig.expression.type.variable",value:"tables",match:["tables"]}],output:[{type:"raw",value:'					<table class="company-data-table">\n						<thead>\n							<tr>\n								<th><h3>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</h3></th>\n								"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"columns"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"									"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"column",expression:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"columns"}],output:[{type:"raw",value:'										<th class="column">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"column",match:["column"]}]},{type:"raw",value:"</th>\n									"}]}},{type:"raw",value:"								"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'									<th class="column"></th>\n								'}]}},{type:"raw",value:"							</tr>\n						</thead>\n						<tbody>\n							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"rows"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"\n									"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"row",expression:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"rows"}],output:[{type:"raw",value:"											<tr>\n												<th>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</th>\n\n												"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"data"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"}]}],output:[{type:"raw",value:"													"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"row_data",expression:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"data"}],output:[{type:"raw",value:"\n														"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"}],output:[{type:"raw",value:"															"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"},{type:"Twig.expression.type.string",value:"Yes"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'																<td class="icon-check-yes"></td>\n															'}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"},{type:"Twig.expression.type.string",value:"No"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'																<td class="icon-check-no"></td>\n															'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"																<td>\n																	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"Money"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"																		$"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"."},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"\n																	"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"Link"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'																		<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:'" target="_blank">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:"</a>\n																	"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"																		"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"Percent"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"%"}]}},{type:"raw",value:"																	"}]}},{type:"raw",value:"																</td>\n															"}]}},{type:"raw",value:"														"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"															<td>-</td>\n														"}]}},{type:"raw",value:"													"}]}},{type:"raw",value:"												"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"													<td>-</td>\n												"}]}},{type:"raw",value:"											</tr>\n\n									"}]}},{type:"raw",value:"							"}]}},{type:"raw",value:"						</tbody>\n					</table>\n					"}]}},{type:"raw",value:"\n			"}]}},{type:"raw",value:"		</div>\n\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"links",match:["links"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"link"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'			<div class="company-footer-links">\n\n				'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"links",match:["links"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]}],output:[{type:"raw",value:'					<a class="company-great-reviews" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"links",match:["links"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"href"}]}]},{type:"raw",value:'" target="_blank">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"links",match:["links"]
},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"label"}]}]},{type:"raw",value:"</a>\n				"}]}},{type:"raw",value:"\n				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"link"}],output:[{type:"raw",value:'					<a data-event="company full profile" class="company-profile-link" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"link"}]},{type:"raw",value:'">See Full Profile</a>\n				'}]}},{type:"raw",value:"\n			</div>\n		"}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"linkedin"},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'		<div class="company-linkedin">\n			<script type="IN/CompanyInsider" data-id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"linkedin"},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'"></script>\n		</div>\n		'}]}},{type:"raw",value:'	</div>\n</div>\n<div class="aside-region">\n	<aside class="company-franchise-list-item-aside-content">\n		<div id="aside-ad-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" class="fortune-ad-unit aside-ad aside-module"></div>\n\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"people",match:["people"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'			<div class="company-leadership-region aside-module">\n				<h3>Leadership</h3>\n				'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"person",expression:[{type:"Twig.expression.type.variable",value:"people",match:["people"]}],output:[{type:"raw",value:'					<div class="img-and-leader-info-container">\n					'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"person",match:["person"]},{type:"Twig.expression.type.key.period",key:"thumbnail"},{type:"Twig.expression.type.variable",value:"person",match:["person"]},{type:"Twig.expression.type.key.period",key:"thumbnail"},{type:"Twig.expression.type.key.period",key:"company_79x79"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'						<div class="leadership-img-container">\n							<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"person",match:["person"]},{type:"Twig.expression.type.key.period",key:"thumbnail"},{type:"Twig.expression.type.key.period",key:"company_79x79"}]},{type:"raw",value:'" width="79" height="79"/>\n						</div>\n					'}]}},{type:"raw",value:'					<div class="leader-info">\n						<div class="leader-name">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"person",match:["person"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</div>\n						"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.variable",value:"person",match:["person"]},{type:"Twig.expression.type.key.period",key:"title"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}],output:[{type:"raw",value:'							<div class="leader-job-title">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"person",match:["person"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</div>\n						"}]}},{type:"raw",value:"					</div>\n					"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.variable",value:"person",match:["person"]},{type:"Twig.expression.type.key.period",key:"description"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}],output:[{type:"raw",value:'						<div class="leader-detail">\n							'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"person",match:["person"]},{type:"Twig.expression.type.key.period",key:"description"}]},{type:"raw",value:"\n						</div>\n					"}]}},{type:"raw",value:"					</div>\n				"}]}},{type:"raw",value:"			</div>\n		"}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"stories",match:["stories"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'			<div class="company-stories-region aside-module">\n				<h3>FEATURE STORIES</h3>\n				<ul>\n\n					'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"story",expression:[{type:"Twig.expression.type.variable",value:"stories",match:["stories"]}],output:[{type:"raw",value:'						<li>\n							<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"story",match:["story"]},{type:"Twig.expression.type.key.period",key:"permalink"}]},{type:"raw",value:'">\n\n								'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"story",match:["story"]},{type:"Twig.expression.type.key.period",key:"thumbnail"},{type:"Twig.expression.type.variable",value:"story",match:["story"]},{type:"Twig.expression.type.key.period",key:"thumbnail"},{type:"Twig.expression.type.key.period",key:"company_tiny"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'									<div class="featured-stories-image-container">\n										<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"story",match:["story"]},{type:"Twig.expression.type.key.period",key:"thumbnail"},{type:"Twig.expression.type.key.period",key:"company_tiny"}]},{type:"raw",value:'" class="featured-stories-image" />\n									</div>\n								'}]}},{type:"raw",value:"\n								"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"story",match:["story"]},{type:"Twig.expression.type.key.period",key:"title"}],output:[{type:"raw",value:'									<h4 class="featured-stories-title">\n										'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"story",match:["story"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"\n									</h4>\n								"}]}},{type:"raw",value:"							</a>\n						</li>\n					"}]}},{type:"raw",value:"\n				</ul>\n			</div>\n			"}]}},{type:"raw",value:"\n\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"videos",match:["videos"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'			<div class="company-videos aside-module">\n			<h3>MORE ABOUT '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"</h3>\n			"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"video",expression:[{type:"Twig.expression.type.variable",value:"videos",match:["videos"]}],output:[{type:"raw",value:"				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"				"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"video"}]},{type:"raw",value:"\n				<h4>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</h4>\n				"}]}},{type:"raw",value:"			"}]}},{type:"raw",value:"			</div>\n		"}]}},{type:"raw",value:"\n	</aside>\n</div>\n"}],Fortune.templates["company-list-empty"]=[{type:"raw",value:"There are no results that match that search. Please reset the filters and try again."}],Fortune.templates["company-list-item-page"]=[{type:"raw",value:"<ol>\n</ol>"}],Fortune.templates["company-list-item"]=[{type:"raw",value:'<a data-event="company profile" class="company-item-link" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"permalink",match:["permalink"]}]},{type:"raw",value:'">\n	<div class="company-id-and-img-container">\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]}],output:[{type:"raw",value:'		<div class="company-list-id-container">\n			<span class="ranking">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]}]},{type:"raw",value:".</span>\n		</div>\n		"}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"grid_image",match:["grid_image"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"sizes"}]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"company_list_thumb"}]}],output:[{type:"raw",value:'			<div class="company-list-img-container">\n				<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"grid_image",match:["grid_image"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"sizes"}]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"company_list_thumb"}]}]},{type:"raw",value:'" class="company-list-thumbnail"/>\n			</div>\n		'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"sizes"}]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"company_list_thumb"}]}],output:[{type:"raw",value:'				<div class="company-list-img-container">\n					<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"sizes"}]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"company_list_thumb"}]}]},{type:"raw",value:'" class="company-list-thumbnail"/>\n				</div>\n			'}]}},{type:"raw",value:"		"}]}},{type:"raw",value:'	</div>\n	<div class="company-desc-and-sort-container">\n		<div class="company-list-description-container">\n			<div class="company-list-description">\n				<div class="company-name-and-mkt-data">\n					'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}],output:[{type:"raw",value:'						<span class="company-name">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"</span>\n					"}]}},{type:"raw",value:"					"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.key.period",key:"symbol"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'						<span class="company-list-mkt-data '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.key.period",key:"class_status"}]},{type:"raw",value:'">\n							'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.key.period",key:"symbol"}]},{type:"raw",value:", "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"change-percent"}]}]},{type:"raw",value:"%\n						</span>\n					"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'						<span class="company-type">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:"</span>\n					"}]}},{type:"raw",value:'				</div>\n				<div class="list-info-and-highlighted-wrapper">\n					<ul class="company-list-comp-info">\n						'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"location"}],output:[{type:"raw",value:'							<li class="company-location">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"location"}]},{type:"raw",value:"</li>\n						"}]}},{type:"raw",value:"\n						"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"industry"}],output:[{type:"raw",value:'							<li class="company-industry">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"industry"}]},{type:"raw",value:"</li>\n						"}]}},{type:"raw",value:'					</ul>\n					<div class="highlighted icon-down-arrow">\n                        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"cta",match:["cta"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"                           "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"cta",match:["cta"]}]},{type:"raw",value:"\n                        "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                            See Perks, Stats, and More!\n                        "}]}},{type:"raw",value:'					</div>\n				</div>\n						<div class="mobile-sort-info">\n							<div class="mobile-sort-primary-info">\n								<ul>\n									<li class="mobile-sort-primary-info-title">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"sortMobileDisplayTitle",match:["sortMobileDisplayTitle"]}]},{type:"raw",value:'</li>\n									<li class="mobile-sort-primary-info-details">\n									'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"sortDisplayData",match:["sortDisplayData"]}],output:[{type:"raw",value:"										"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"sortDisplayData",match:["sortDisplayData"]}]},{type:"raw",value:"\n									"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"										\n									"}]}},{type:"raw",value:'									</li>\n								</ul>\n							</div>\n						</div>\n			</div>\n		</div>\n		<div class="company-list-sort-type-container">\n			<div class="company-list-sort-type">\n				<div class="sort-value">\n					'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"sortDisplayData",match:["sortDisplayData"]}],output:[{type:"raw",value:"						"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"sortDisplayData",match:["sortDisplayData"]}]},{type:"raw",value:"\n					"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"						\n					"}]}},{type:"raw",value:"				</div>\n			</div>\n		</div>\n	</div>\n</a>\n"}],Fortune.templates["divider-ad"]=[{type:"raw",value:'<div class="divider-ad divider-full-width-ad fortune-ad-unit" id="divider-full-width-ad-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'">\n\n</div>'}],Fortune.templates["f500-company-article"]=[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"sizes"},{type:"Twig.expression.type.key.period",key:"company_small"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'	<div class="articles-thumbnail-container">\n		<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"sizes"},{type:"Twig.expression.type.key.period",key:"company_small"}]},{type:"raw",value:'">\n	</div>\n'}]}},{type:"raw",value:'\n<div class="articles-info-container">\n	<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"permalink",match:["permalink"]}]},{type:"raw",value:'"><div class="company-article-title">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"</div></a>\n\n	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.variable",value:"date",match:["date"]},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}]}],output:[{type:"raw",value:'		<div class="company-articles-byline-container">\n			<div class="company-articles-byline">'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'<span class="company-articles-author">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</span>"}]}},{type:"raw",value:" "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"date",match:["date"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'<span class="company-articles-pub-date">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"date",match:["date"]}]},{type:"raw",value:"</span>"}]}},{type:"raw",value:"</div>\n		</div>\n	"}]}},{type:"raw",value:"\n	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"excerpt",match:["excerpt"]}],output:[{type:"raw",value:'		<div class="company-articles-excerpt">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"excerpt",match:["excerpt"]}]},{type:"raw",value:"</div>\n	"}]}},{type:"raw",value:"</div>\n"}],Fortune.templates["f500-company-item"]=[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.key.period",key:"symbol"}],output:[{type:"raw",value:"	"},{type:"logic",token:{type:"Twig.logic.type.set",key:"ticker",expression:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.key.period",key:"symbol"}]}}]}},{type:"raw",value:"\n"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"swot",match:["swot"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"swot",match:["swot"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"	"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"swot_type",expression:[{type:"Twig.expression.type.variable",value:"swot",match:["swot"]}],output:[{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"swot_item",expression:[{type:"Twig.expression.type.variable",value:"swot_type",match:["swot_type"]}],output:[{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"swot_item",match:["swot_item"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"\n				"},{type:"logic",token:{type:"Twig.logic.type.set",key:"swot_has_content",expression:[{type:"Twig.expression.type.bool",value:!0}]}},{type:"raw",value:"\n			"}]}},{type:"raw",value:"		"}]}},{type:"raw",value:"	"}]}}]}},{type:"raw",value:"\n"},{type:"logic",token:{type:"Twig.logic.type.set",key:"rank_class",expression:[{type:"Twig.expression.type.string",value:"neutral"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]},{type:"Twig.expression.type.variable",value:"prev_rank",match:["prev_rank"]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}]}],output:[{type:"raw",value:"\n	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]},{type:"Twig.expression.type.variable",value:"prev_rank",match:["prev_rank"]},{type:"Twig.expression.type.operator.binary",value:"<",precidence:8,associativity:"leftToRight",operator:"<"}],output:[{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.set",key:"rank_class",expression:[{type:"Twig.expression.type.string",value:"rank-up"}]}},{type:"raw",value:"	"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]},{type:"Twig.expression.type.variable",value:"prev_rank",match:["prev_rank"]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.set",key:"rank_class",expression:[{type:"Twig.expression.type.string",value:"rank-down"}]}},{type:"raw",value:"	"}]}},{type:"raw",value:"\n"}]}},{type:"raw",value:'\n<div class="company-franchise-list-item-content content-well-wrapper">\n	<div class="company-franchise-list-item-content content-well">\n		<div class="company-item-header">\n			<div class="company-item-info-container">\n				<div class="rank-name-mkt-data-container">\n					<div class="rank-and-name-container">\n						'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]}],output:[{type:"raw",value:"							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]},{type:"Twig.expression.type.number",value:1e5,match:["100000",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'								<div class="company-rank">-</div>\n							'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'								<div class="company-rank">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]}]},{type:"raw",value:".</div>\n							"}]}},{type:"raw",value:"						"}]}},{type:"raw",value:'\n							<h1 class="company-name-and-mkt-data">\n								<div class="title">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"</div>\n							</h1>\n							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"prev_rank",match:["prev_rank"]}],output:[{type:"raw",value:'								<div class="last-years-rank icon-new-right-arrow '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rank_class",match:["rank_class"]}]},{type:"raw",value:"\">\n									Last year's Rank: <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"prev_rank",match:["prev_rank"]}]},{type:"raw",value:"</span>\n								</div>\n							"}]}},{type:"raw",value:'					</div>\n				</div>\n				<div data-event="company close" class="close-mobile-profile-link-container">\n					<div class="close icon-x"></div>\n					<div class="close icon-close"></div>\n				</div>\n			</div>\n\n			<div class="social-and-pagination-wrapper">\n				<div class="article-social-wrapper">\n						<ul class="article-social-icons">\n							'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"twitter"},{type:"Twig.expression.type.key.period",key:"description"}],output:[{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.set",key:"social_twitter_description",expression:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"twitter"},{type:"Twig.expression.type.key.period",key:"description"}]}},{type:"raw",value:"							"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.set",key:"social_twitter_description",expression:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]}},{type:"raw",value:"							"}]}},{type:"raw",value:"\n							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"facebook"},{type:"Twig.expression.type.key.period",key:"description"}],output:[{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.set",key:"social_facebook_description",expression:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"facebook"},{type:"Twig.expression.type.key.period",key:"description"}]}},{type:"raw",value:"							"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.set",key:"social_facebook_description",expression:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]}},{type:"raw",value:"							"}]}},{type:"raw",value:"\n							"},{type:"logic",token:{type:"Twig.logic.type.set",key:"social_url",expression:[{type:"Twig.expression.type.variable",value:"shortlink",match:["shortlink"]}]}},{type:"raw",value:'							<li>\n								<a data-event="share email" aria-hidden="true" class="icon-mail" href="mailto:?subject='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"&amp;body="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"permalink",match:["permalink"]}]},{type:"raw",value:'"></a>\n								<span class="screen-reader-text">E-mail</span>\n							</li>\n							<li>\n								<a data-event="share twitter" aria-hidden="true" class="icon-twitter" target="_blank" href="https://twitter.com/intent/tweet?url='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social_url",match:["social_url"]}]},{type:"raw",value:"&amp;text="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social_twitter_description",
match:["social_twitter_description"]}]},{type:"raw",value:'"></a>\n								<span class="screen-reader-text">Tweet</span>\n							</li>\n							<li>\n								<a data-event="share facebook" aria-hidden="true" class="icon-facebook" target="_blank" href="http://www.facebook.com/sharer.php?u='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"permalink",match:["permalink"]}]},{type:"raw",value:"&amp;t="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social_facebook_description",match:["social_facebook_description"]}]},{type:"raw",value:'"></a>\n								<span class="screen-reader-text">Facebook</span>\n							</li>\n							<li>\n								<a data-event="share linkedin" aria-hidden="true" class="icon-linkedin" target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"permalink",match:["permalink"]}]},{type:"raw",value:"&amp;title="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:'&amp;source=Fortune"></a>\n								<span class="screen-reader-text">Linkedin</span>\n							</li>\n						</ul>\n				</div>\n				<div class="item-pagination-wrapper">\n					<div class="item-previous" data-event="company pagination previous"><a href="#" title="">Prev Company</a></div>\n					<div class="item-next icon-right-carrot" data-event="company pagination next"><a href="#" title="">Next Company</a></div>\n				</div>\n			</div>\n		</div>\n\n		<div class="media-and-description-container">\n			'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"videos",match:["videos"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.variable",value:"imageSrc",match:["imageSrc"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}]}],output:[{type:"raw",value:'				<div class="company-feature-media">\n					'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"videos",match:["videos"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.variable",value:"videos",match:["videos"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"video"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"						"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"videos",match:["videos"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"video"}]},{type:"raw",value:"\n					"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"imageSrc",match:["imageSrc"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'						<div class="company-feature-image">\n							<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"imageSrc",match:["imageSrc"]}]},{type:"raw",value:'" />\n							'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"caption"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'								<div class="company-image-caption">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"caption"}]},{type:"raw",value:"</div>\n							"}]}},{type:"raw",value:"							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"credit"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'								<div class="company-image-credit">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"credit"}]},{type:"raw",value:"</div>\n							"}]}},{type:"raw",value:"						</div>\n					"}]}},{type:"raw",value:"				</div>\n			"}]}},{type:"raw",value:"\n			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"description",match:["description"]}],output:[{type:"raw",value:'			<div class="company-desc">\n				'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"description",match:["description"]}]},{type:"raw",value:"\n			</div>\n			"}]}},{type:"raw",value:"		</div>\n\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"swot_has_content",match:["swot_has_content"]}],output:[{type:"raw",value:'			<div class="company-swot">\n				'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:"key",value_var:"swot_type",expression:[{type:"Twig.expression.type.variable",value:"swot",match:["swot"]}],output:[{type:"raw",value:'					<div class="company-swot-box">\n						<div class="company-swot-box-title">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"key",match:["key"]}]},{type:"raw",value:"</div>\n						<ul>\n							"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"swot_item",expression:[{type:"Twig.expression.type.variable",value:"swot_type",match:["swot_type"]}],output:[{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"swot_item",match:["swot_item"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"									<li>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"swot_item",match:["swot_item"]}]},{type:"raw",value:"</li>\n								"}]}},{type:"raw",value:"							"}]}},{type:"raw",value:"						</ul>\n					</div>\n				"}]}},{type:"raw",value:"			</div>\n		"}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"other_lists_ranking",match:["other_lists_ranking"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"other_lists_ranking",match:["other_lists_ranking"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'			<div class="other-lists-ranking-wrapper">\n				<div class="other-lists-ranking">\n					<div class="other-lists-ranking-title">\n					'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"						"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]},{type:"Twig.expression.type.string",value:" also appeared on these lists:"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:"\n					"}]}},{type:"raw",value:"					</div>\n					<ul>\n						"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"other_list",expression:[{type:"Twig.expression.type.variable",value:"other_lists_ranking",match:["other_lists_ranking"]}],output:[{type:"raw",value:"						<li>\n							"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"other_list",match:["other_list"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.string",value:": "},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:"\n							"},{type:"logic",token:{type:"Twig.logic.type.set",key:"rank",expression:[{type:"Twig.expression.type.string",value:"Ranked #"},{type:"Twig.expression.type.variable",value:"other_list",match:["other_list"]},{type:"Twig.expression.type.key.period",key:"rank"},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}},{type:"raw",value:"							"},{type:"logic",token:{type:"Twig.logic.type.set",key:"url",expression:[{type:"Twig.expression.type.variable",value:"other_list",match:["other_list"]},{type:"Twig.expression.type.key.period",key:"url"}]}},{type:"raw",value:"							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"other_list",match:["other_list"]},{type:"Twig.expression.type.key.period",key:"url_meta_key"},{type:"Twig.expression.type.string",value:"wmac-url"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.set",key:"url_rank",expression:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"url",match:["url"]},{type:"Twig.expression.type.filter",value:"split",match:["|split","split"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"Twig.expression.type.filter",value:"last",match:["|last","last"]}]},{type:"Twig.expression.type.filter",value:"split",match:["|split","split"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"/"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"Twig.expression.type.filter",value:"first",match:["|first","first"]}]}},{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"url_rank",match:["url_rank"]},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"]}]},{type:"Twig.expression.type.number",value:1e5,match:["100000",null]},{type:"Twig.expression.type.operator.binary",value:"<",precidence:8,associativity:"leftToRight",operator:"<"}],output:[{type:"raw",value:"									"},{type:"logic",token:{type:"Twig.logic.type.set",key:"rank",expression:[{type:"Twig.expression.type.string",value:"Ranked #"},{type:"Twig.expression.type.variable",value:"url_rank",match:["url_rank"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}},{type:"raw",value:"								"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"									"},{type:"logic",token:{type:"Twig.logic.type.set",key:"rank",expression:[{type:"Twig.expression.type.string",value:"View List"}]}},{type:"raw",value:"								"}]}},{type:"raw",value:"							"}]}},{type:"raw",value:'							<a class="other-lists-ranking-url" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"url",match:["url"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]}]},{type:"raw",value:"</a>\n						</li>\n						"}]}},{type:"raw",value:"					</ul>\n				</div>\n			</div>\n		"}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"tables",match:["tables"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'			<div class="company-data">\n				'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"table",expression:[{type:"Twig.expression.type.variable",value:"tables",match:["tables"]}],output:[{type:"raw",value:'					<table class="company-data-table">\n						<thead>\n							<tr>\n								<th><h3>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</h3></th>\n								"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"columns"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"									"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"column",expression:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"columns"}],output:[{type:"raw",value:'										<th class="column">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"column",match:["column"]}]},{type:"raw",value:"</th>\n									"}]}},{type:"raw",value:"								"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'									<th class="column"></th>\n								'}]}},{type:"raw",value:"							</tr>\n						</thead>\n						<tbody>\n							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"rows"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"\n									"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"row",expression:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"rows"}],output:[{type:"raw",value:"											<tr>\n												<th>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</th>\n\n												"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"data"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"}]}],output:[{type:"raw",value:"													"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"row_data",expression:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"data"}],output:[{type:"raw",value:"\n														"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"}],output:[{type:"raw",value:"															"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"},{type:"Twig.expression.type.string",value:"Yes"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'																<td class="icon-check-yes"></td>\n															'}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"},{type:"Twig.expression.type.string",value:"No"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'																<td class="icon-check-no"></td>\n															'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"																<td>\n																	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"Money"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"																		$"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"."},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"\n																	"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"Link"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'																		<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:'" target="_blank">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:"</a>\n																	"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"																		"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"Percent"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"%"}]}},{type:"raw",value:"																	"}]}},{type:"raw",value:"																</td>\n															"}]}},{type:"raw",value:"														"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"															<td>-</td>\n														"}]}},{type:"raw",value:"													"}]}},{type:"raw",value:"												"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"													<td>-</td>\n												"}]}},{type:"raw",value:"											</tr>\n\n									"}]}},{type:"raw",value:"							"}]}},{type:"raw",value:"						</tbody>\n					</table>\n					"}]}},{type:"raw",value:"\n				</div>\n				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"footnotes",match:["footnotes"]},{type:"Twig.expression.type.key.period",key:"fn_company"},{type:"Twig.expression.type.variable",value:"footnotes",match:["footnotes"]},{type:"Twig.expression.type.key.period",key:"fn_revenue"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}]}],output:[{type:"raw",value:'					<div class="footnotes-wrapper">\n						'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"footnotes",match:["footnotes"]},{type:"Twig.expression.type.key.period",key:"fn_company"}],output:[{type:"raw",value:'							<div class="footnote-company">* '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"footnotes",match:["footnotes"]},{type:"Twig.expression.type.key.period",key:"fn_company"}]},{type:"raw",value:"</div>\n						"}]}},{type:"raw",value:"						"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"footnotes",match:["footnotes"]},{type:"Twig.expression.type.key.period",key:"fn_revenue"}],output:[{type:"raw",value:'							<div class="footnote-revenue">* '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"footnotes",match:["footnotes"]},{type:"Twig.expression.type.key.period",key:"fn_revenue"}]},{type:"raw",value:"</div>\n						"}]}},{type:"raw",value:"					</div>\n				"}]}},{type:"raw",value:"			"}]}},{type:"raw",value:'\n		<div class="company-articles-container">\n		</div>\n\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"linkedin"},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'		<div class="company-linkedin">\n			<script type="IN/CompanyInsider" data-id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"linkedin"},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'"></script>\n		</div>\n		'}]}},{type:"raw",value:'\n	</div>\n</div>\n<div class="aside-region">\n	<aside class="company-franchise-list-item-aside-content">\n		<div id="aside-ad-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" class="fortune-ad-unit aside-ad aside-module"></div>\n\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"people",match:["people"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'			<div class="company-leadership-region aside-module">\n				<h3>Leadership</h3>\n				'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"person",expression:[{type:"Twig.expression.type.variable",value:"people",match:["people"]}],output:[{type:"raw",value:'					<div class="img-and-leader-info-container">\n						<div class="leader-info">\n							<div class="leader-name">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"person",match:["person"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</div>\n							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.variable",value:"person",match:["person"]},{type:"Twig.expression.type.key.period",key:"title"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}],output:[{type:"raw",value:'								<div class="leader-job-title">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"person",match:["person"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</div>\n							"}]}},{type:"raw",value:"						</div>\n					</div>\n				"}]}},{type:"raw",value:"			</div>\n		"}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"stories",match:["stories"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'			<div class="company-stories-region aside-module">\n				<h3>FEATURE STORIES</h3>\n				<ul>\n\n					'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"story",expression:[{type:"Twig.expression.type.variable",value:"stories",match:["stories"]}],output:[{type:"raw",value:'						<li>\n							<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"story",match:["story"]},{type:"Twig.expression.type.key.period",key:"permalink"}]},{type:"raw",value:'">\n\n								'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"story",match:["story"]},{type:"Twig.expression.type.key.period",key:"thumbnail"},{type:"Twig.expression.type.variable",value:"story",match:["story"]},{type:"Twig.expression.type.key.period",key:"thumbnail"},{type:"Twig.expression.type.key.period",key:"sizes"},{type:"Twig.expression.type.key.period",key:"company_tiny"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'									<div class="featured-stories-image-container">\n										<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"story",match:["story"]},{type:"Twig.expression.type.key.period",key:"thumbnail"},{type:"Twig.expression.type.key.period",key:"sizes"},{type:"Twig.expression.type.key.period",key:"company_tiny"}]},{type:"raw",value:'" class="featured-stories-image" />\n									</div>\n								'}]}},{type:"raw",value:"\n								"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"story",match:["story"]},{type:"Twig.expression.type.key.period",key:"title"}],output:[{type:"raw",value:'									<h4 class="featured-stories-title">\n										'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"story",match:["story"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"\n									</h4>\n								"}]}},{type:"raw",value:"							</a>\n						</li>\n					"}]}},{type:"raw",value:"\n				</ul>\n			</div>\n			"}]}},{type:"raw",value:"\n\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"videos",match:["videos"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'			<div class="company-videos aside-module">\n				<h3>MORE ABOUT '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"</h3>\n				"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"video",expression:[{type:"Twig.expression.type.variable",value:"videos",match:["videos"]}],output:[{type:"raw",value:"					"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"					"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"video"}]},{type:"raw",value:"\n					<h4>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</h4>\n					"}]}},{type:"raw",value:"				"}]}},{type:"raw",value:"			</div>\n		"}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"ticker",match:["ticker"]}],output:[{type:"raw",value:'			<div class="idc-container aside-module"><div class="loading"></div></div>\n\n			'},{type:"raw",value:'\n\n			<div id="aside-ad-injected-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" class="fortune-ad-unit aside-ad aside-module"></div>\n		'}]}},{type:"raw",value:"\n	</aside>\n</div>\n\n"}],Fortune.templates["f500-company-list-empty"]=[{type:"raw",value:"There are no results that match that search. Please reset the filters and try again."}],Fortune.templates["f500-company-list-item-page"]=[{type:"raw",value:"<ol>\n</ol>"}],Fortune.templates["f500-company-list-item"]=[{type:"raw",value:'<a data-event="company profile" class="company-item-link" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"permalink",match:["permalink"]}]},{type:"raw",value:'">\n	<div class="company-id-and-img-container">\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]}],output:[{type:"raw",value:'			<div class="company-list-id-container">\n			'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]},{type:"Twig.expression.type.number",value:1e5,match:["100000",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'				<span class="ranking">-</span>\n			'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'				<span class="ranking">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]}]},{type:"raw",value:".</span>\n			"}]}},{type:"raw",value:"			</div>\n		"}]}},{type:"raw",
value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"logo"}],output:[{type:"raw",value:'			<div class="company-list-img-container">\n				<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"logo"}]},{type:"raw",value:'" class="company-list-thumbnail"/>\n			</div>\n		'}]}},{type:"raw",value:'\n	</div>\n\n	<div class="company-desc-and-sort-container">\n		<div class="company-list-description-container">\n			<div class="company-list-description">\n\n				<div class="company-name-and-mkt-data">\n					'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}],output:[{type:"raw",value:'						<span class="company-name">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"</span>\n					"}]}},{type:"raw",value:"					"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.key.period",key:"symbol"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'						<span class="company-list-mkt-data">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"ticker"},{type:"Twig.expression.type.key.period",key:"symbol"}]},{type:"raw",value:"</span>\n					"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'						<span class="company-type">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:"</span>\n					"}]}},{type:"raw",value:'				</div>\n				<div class="list-info-and-highlighted-wrapper">\n					<ul class="company-list-comp-info">\n						'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"location"}],output:[{type:"raw",value:'							<li class="company-location">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"location"}]},{type:"raw",value:"</li>\n						"}]}},{type:"raw",value:"\n						"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"industry"}],output:[{type:"raw",value:'							<li class="company-industry">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"companies",match:["companies"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"industry"}]},{type:"raw",value:"</li>\n						"}]}},{type:"raw",value:'					</ul>\n					<div class="highlighted icon-down-arrow">\n            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"cta",match:["cta"]}],output:[{type:"raw",value:"            	"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"cta",match:["cta"]}]},{type:"raw",value:"\n            "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"            	See company profile\n            "}]}},{type:"raw",value:'					</div>\n				</div>\n\n				<div class="mobile-sort-info">\n					<div class="mobile-sort-primary-info">\n						<ul>\n							<li class="mobile-sort-primary-info-title">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"sortMobileDisplayTitle",match:["sortMobileDisplayTitle"]}]},{type:"raw",value:'</li>\n							<li class="mobile-sort-primary-info-details">\n								'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"sortDisplayData",match:["sortDisplayData"]}],output:[{type:"raw",value:"									"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"sortDisplayData",match:["sortDisplayData"]}]},{type:"raw",value:"\n								"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"									\n								"}]}},{type:"raw",value:'							</li>\n						</ul>\n					</div>\n				</div>\n			</div>\n		</div>\n\n		<div class="company-list-sort-type-container">\n			<div class="company-list-sort-type">\n				<div class="sort-value">\n					'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"sortDisplayData",match:["sortDisplayData"]}],output:[{type:"raw",value:"						"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"sortDisplayData",match:["sortDisplayData"]}]},{type:"raw",value:"\n					"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"						\n					"}]}},{type:"raw",value:"				</div>\n			</div>\n		</div>\n	</div>\n</a>\n"}],Fortune.templates["f500-idc-module"]=[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"last",match:["last"]},{type:"Twig.expression.type.variable",value:"previousClose",match:["previousClose"]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"	"},{type:"logic",token:{type:"Twig.logic.type.set",key:"change_class",expression:[{type:"Twig.expression.type.string",value:"gainer"}]}}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"last",match:["last"]},{type:"Twig.expression.type.variable",value:"previousClose",match:["previousClose"]},{type:"Twig.expression.type.operator.binary",value:"<",precidence:8,associativity:"leftToRight",operator:"<"}],output:[{type:"raw",value:"	"},{type:"logic",token:{type:"Twig.logic.type.set",key:"change_class",expression:[{type:"Twig.expression.type.string",value:"loser"}]}}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"	"},{type:"logic",token:{type:"Twig.logic.type.set",key:"change_class",expression:[{type:"Twig.expression.type.string",value:"neutral"}]}}]}},{type:"raw",value:"\n"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"marketCap",match:["marketCap"]}],output:[{type:"raw",value:"	"},{type:"logic",token:{type:"Twig.logic.type.set",key:"formatted_cap",expression:[{type:"Twig.expression.type.variable",value:"marketCap",match:["marketCap"]},{type:"Twig.expression.type.number",value:1e9,match:["1000000000",null]},{type:"Twig.expression.type.operator.binary",value:"/",precidence:5,associativity:"leftToRight",operator:"/"}]}}]}},{type:"raw",value:'\n<div class="idc-inside-container">\n'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"name",match:["name"]},{type:"Twig.expression.type.variable",value:"symbol",match:["symbol"]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}]}],output:[{type:"raw",value:'	<div class="idc-name-symbol-container"><span>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"name",match:["name"]},{type:"Twig.expression.type.filter",value:"lower",match:["|lower","lower"]}]},{type:"raw",value:"</span> "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"symbol",match:["symbol"]}]},{type:"raw",value:"</div>\n"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"last",match:["last"]},{type:"Twig.expression.type.variable",value:"changeLong",match:["changeLong"]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}]}],output:[{type:"raw",value:'	<div class="idc-top-quote-info">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"last",match:["last"]}]},{type:"raw",value:' <span class="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"change_class",match:["change_class"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"changeLong",match:["changeLong"]}]},{type:"raw",value:"</span></div>\n"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"symbol",match:["symbol"]}],output:[{type:"raw",value:'	<div class="idc-img-container">\n	'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"timeHuman",match:["timeHuman"]}],output:[{type:"raw",value:'		<div class="stock-time">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"timeHuman",match:["timeHuman"]}]},{type:"raw",value:"</div>\n	"}]}},{type:"raw",value:'		<img class="idc-stock-img" src="http://www.fortune.idmanagedsolutions.com/charts/advanced/advanced.chart?SYMBOL_US='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"symbol",match:["symbol"]}]},{type:"raw",value:'&TIME_SPAN=5D">\n	</div>\n'}]}},{type:"raw",value:'	<div class="idc-info-list-container">\n		<ul>\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"previousClose",match:["previousClose"]}],output:[{type:"raw",value:"			<li>Previous Close<span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"previousClose",match:["previousClose"]},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"."},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span></li>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"formatted_cap",match:["formatted_cap"]}],output:[{type:"raw",value:"			<li>Market Cap<span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"formatted_cap",match:["formatted_cap"]},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"."},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"B</span></li>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"nextEarningsDate",match:["nextEarningsDate"]}],output:[{type:"raw",value:"			<li>Next Earnings Date<span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"nextEarningsDate",match:["nextEarningsDate"]}]},{type:"raw",value:"</span></li>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"todayHigh",match:["todayHigh"]}],output:[{type:"raw",value:"			<li>High<span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"todayHigh",match:["todayHigh"]},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"."},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span></li>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"todayLow",match:["todayLow"]}],output:[{type:"raw",value:"			<li>Low<span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"todayLow",match:["todayLow"]},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"."},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span></li>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"yearHigh",match:["yearHigh"]}],output:[{type:"raw",value:"			<li>52 Week High<span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"yearHigh",match:["yearHigh"]},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"."},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span></li>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"yearLow",match:["yearLow"]}],output:[{type:"raw",value:"			<li>52 Week Low<span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"yearLow",match:["yearLow"]},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"."},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span></li>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"yearChangePercent",match:["yearChangePercent"]}],output:[{type:"raw",value:"			<li>52 Week Change Percent<span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"yearChangePercent",match:["yearChangePercent"]},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"."},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span></li>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"peRatio",match:["peRatio"]}],output:[{type:"raw",value:"			<li>P/E Ratio<span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peRatio",match:["peRatio"]},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"."},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span></li>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"eps",match:["eps"]}],output:[{type:"raw",value:"			<li>EPS<span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"eps",match:["eps"]},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"."},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span></li>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"dividendYield",match:["dividendYield"]}],output:[{type:"raw",value:"			<li>Dividend Yield<span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"dividendYield",match:["dividendYield"]},{type:"Twig.expression.type.filter",value:"number_format",match:["|number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"."},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span></li>\n		"}]}},{type:"raw",value:"		</ul>\n	</div>\n</div>\n\n"}],Fortune.templates["franchise-article"]=[{type:"raw",value:'<div class="franchise-content-main-wrapper">\n	<div class="franchise-content-main">\n		<div class="franchise-content-main-header">\n			'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]}],output:[{type:"raw",value:'			<div class="rank">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]}]},{type:"raw",value:"</div>\n			"}]}},{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}],output:[{type:"raw",value:'			<h1 class="franchise-person-name">\n				'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"franchise_name",match:["franchise_name"]},{type:"Twig.expression.type.filter",value:"lower",match:["|lower","lower"]},{type:"Twig.expression.type.string",value:"40 under 40"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:", "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"highlights",match:["highlights"]},{type:"Twig.expression.type.key.period",key:"Age"}]}]}},{type:"raw",value:"			</h1>\n			"}]}},{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"highlights",match:["highlights"]},{type:"Twig.expression.type.variable",value:"highlights",match:["highlights"]},{type:"Twig.expression.type.key.period",key:"Title"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'			<div class="franchise-person-title">\n				'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"highlights",match:["highlights"]},{type:"Twig.expression.type.key.period",key:"Title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"highlights",match:["highlights"]},{type:"Twig.expression.type.key.period",key:"Company"}],output:[{type:"raw",value:", "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"highlights",match:["highlights"]},{type:"Twig.expression.type.key.period",key:"Company"}]}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"highlights",match:["highlights"]},{type:"Twig.expression.type.key.period",key:"Affiliation"}],output:[{type:"raw",value:", "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"highlights",match:["highlights"]},{type:"Twig.expression.type.key.period",key:"Affiliation"}]}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"highlights",match:["highlights"]},{type:"Twig.expression.type.variable",value:"highlights",match:["highlights"]},{type:"Twig.expression.type.key.period",key:"Age"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"highlights",match:["highlights"]},{type:"Twig.expression.type.key.period",key:"Age"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"franchise_name",match:["franchise_name"]},{type:"Twig.expression.type.filter",value:"lower",match:["|lower","lower"]},{type:"Twig.expression.type.string",value:"40 under 40"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:", "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"highlights",match:["highlights"]},{type:"Twig.expression.type.key.period",key:"Age"}]}]}},{type:"raw",value:"			</div>\n			"}]}},{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.variable",value:"title",match:["title"]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'				<div class="article-social-wrapper">\n					<ul class="article-social-icons">\n						<li>\n							<a aria-hidden="true" class="icon-mail" href="mailto:?subject='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"&amp;body="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"encoded_shortlink"}]},{type:"raw",value:'"></a>\n							<span class="screen-reader-text">E-mail</span>\n						</li>\n						<li>\n							<a aria-hidden="true" class="icon-twitter" target="_blank" href="https://twitter.com/share?url='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"encoded_shortlink"}]},{type:"raw",value:"&amp;text="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"twitter_text"}]},{type:"raw",value:'" data-event=" list-twitter"></a>\n							<span class="screen-reader-text">Tweet</span>\n						</li>\n						<li>\n							<a aria-hidden="true" class="icon-facebook" target="_blank" href="http://www.facebook.com/sharer.php?u='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"encoded_shortlink"}]},{type:"raw",value:"&amp;t="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"facebook_title"}]},{type:"raw",value:'" data-event="list-fb"></a>\n							<span class="screen-reader-text">Facebook</span>\n						</li>\n						<li>\n							<a aria-hidden="true" class="icon-linkedin" target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"encoded_shortlink"}]},{type:"raw",value:"&amp;title"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"encoded_title"}]},{type:"raw",value:'&amp;source=Fortune" data-event="list-linkedin"></a>\n							<span class="screen-reader-text">Linkedin</span>\n						</li>\n					</ul>\n				</div>\n			'}]}},{type:"raw",value:"		</div>\n\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]}],output:[{type:"raw",value:'		<div class="franchise-feature-image">\n			<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"src"}]},{type:"raw",value:'" />\n			'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"caption"}],output:[{type:"raw",value:'			<div class="article-image-caption">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"caption"}]},{type:"raw",value:"</div>\n			"}]}},{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"credit"}],output:[{type:"raw",value:'			<div class="article-image-credit">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"credit"}]},{type:"raw",value:"</div>\n			"}]}},{type:"raw",value:"		</div>\n		"}]}},{type:"raw",value:'\n		<div class="franchise-content">\n			'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"content",match:["content"]}]},{type:"raw",value:"\n		</div>\n\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"tables",match:["tables"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'			<div class="company-data">\n			'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:"title",value_var:"table",expression:[{type:"Twig.expression.type.variable",value:"tables",match:["tables"]}],output:[{type:"raw",value:'				<table class="company-data-table">\n					<thead>\n						<tr>\n							<th><h3>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"</h3></th>\n							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"columns"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"								"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"column",expression:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"columns"}],output:[{type:"raw",value:'								<th class="column">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"column",match:["column"]}]},{type:"raw",value:"</th>\n								"}]}},{type:"raw",value:"							"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'								<th class="column"></th>\n							'}]}},{type:"raw",value:"						</tr>\n					</thead>\n					<tbody>\n					"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"data"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"						"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:"row_title",value_var:"row_data",expression:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"data"}],output:[{type:"raw",value:"						<tr>\n							<th>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row_title",match:["row_title"]}]},{type:"raw",value:"</th>\n							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"}]}],output:[{type:"raw",
value:"								"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"data",expression:[{type:"Twig.expression.type.variable",value:"row_data",match:["row_data"]}],output:[{type:"raw",value:"									"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]}],output:[{type:"raw",value:"										"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.string",value:"Yes"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'											<td class="icon-check-yes"></td>\n										'}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.string",value:"No"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'											<td class="icon-check-no"></td>\n										'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"											<td>\n												"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]}]},{type:"raw",value:"\n											</td>\n										"}]}},{type:"raw",value:"									"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"										<td>-</td>\n									"}]}},{type:"raw",value:"								"}]}},{type:"raw",value:"							"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"								<td>-</td>\n							"}]}},{type:"raw",value:"						</tr>\n						"}]}},{type:"raw",value:"					"}]}},{type:"raw",value:"					</tbody>\n				</table>\n			"}]}},{type:"raw",value:"			</div>\n		"}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]}],output:[{type:"raw",value:'		<div class="franchise-feature-video">\n			<h3>VIDEO</h3>\n			<div class="franchise-feature-video-wrapper">\n				<figure class="featured-video featured-vid-article_full">\n					'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"html"}]},{type:"raw",value:'\n				</figure>\n				<div class="franchise-feature-video-content">\n					<h4>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</h4>\n					"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"excerpt"}],output:[{type:"raw",value:'					<div class="franchise-video-excerpt">\n						'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_video",match:["featured_video"]},{type:"Twig.expression.type.key.period",key:"excerpt"}]},{type:"raw",value:"\n					</div>\n					"}]}},{type:"raw",value:"				</div>\n			</div>\n		</div>\n		"}]}},{type:"raw",value:'	</div>\n</div>\n\n<aside class="franchise-content-aside">\n	<div class="fortune-ad-unit aside-ad" id="aside-ad-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'"></div>\n	'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"facts",match:["facts"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'	<div class="facts-module aside-module">\n		<h4>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"facts",match:["facts"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]}]},{type:"raw",value:" THINGS YOU DIDN'T KNOW</h4>\n		<ol>\n			"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"fact",expression:[{type:"Twig.expression.type.variable",value:"facts",match:["facts"]}],output:[{type:"raw",value:"				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fact",match:["fact"]}],output:[{type:"raw",value:'				<li>\n					<div class="fact-num">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:"</div>\n					"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fact",match:["fact"]},{type:"Twig.expression.type.key.period",key:"image"}],output:[{type:"raw",value:'					<figure class="fact-image">\n						<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"fact",match:["fact"]},{type:"Twig.expression.type.key.period",key:"image"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]}]},{type:"raw",value:'" width="135" height="90" />\n					</figure>\n					'}]}},{type:"raw",value:'					<div class="fact-content">\n						'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"fact",match:["fact"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"\n					</div>\n				</li>\n				"}]}},{type:"raw",value:"			"}]}},{type:"raw",value:"		</ol>\n	</div>\n	"}]}},{type:"raw",value:'</aside>\n\n<div class="franchise-content-main-wrapper">\n	<div class="franchise-content-bottom"></div>\n</div>\n'}],Fortune.templates["home-commentary"]=[{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"article",expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]}],output:[{type:"raw",value:'	<article class="commentary-article">\n		<div class="commentary-byline-img">\n			<a class="rail" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"authors"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"thumbnail"}]},{type:"raw",value:'</a>\n			<p class="byline rail-offset">By <a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"authors"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"authors"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</a></p>\n		</div>\n		<div class="commentary-article-content rail-offset">\n			'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'				<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></h3>\n			"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'				<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></h3>\n			"}]}},{type:"raw",value:'			<p class="excerpt">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"excerpt"}]},{type:"raw",value:"</p>\n			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"Dan Primack"},{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"authors"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'				<a href="#newsletter" class="newsletter-signup-link" data-newsletter-slug="termsheet">\n					<div class="package-signup">\n						<p>Subscribe to <span>Term Sheet</span></p>\n					</div>\n				</a>\n			'}]}},{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"Caroline Fairchild"},{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"authors"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'				<a href="#newsletter" class="newsletter-signup-link" data-newsletter-slug="broadsheet">\n					<div class="package-signup">\n						<p>Subscribe to <span>The Broadsheet</span></p>\n					</div>\n				</a>\n			'}]}},{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"Geoff Colvin"},{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"authors"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'				<a href="#newsletter" class="newsletter-signup-link" data-newsletter-slug="powersheet">\n					<div class="package-signup">\n						<p>Subscribe to <span>Power Sheet</span></p>\n					</div>\n				</a>\n			'}]}},{type:"raw",value:"		</div>\n	</article>\n"}]}}],Fortune.templates["home-franchise-rankings"]=[{type:"raw",value:'<header class="franchise-rankings-module-header module-header">\n	<h4>Rankings</h4>\n</header>\n'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"ranking",expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]}],output:[{type:"raw",value:'	<div>\n		<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ranking",match:["ranking"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">\n			<h2>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ranking",match:["ranking"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:'</h2>\n			<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ranking",match:["ranking"]},{type:"Twig.expression.type.key.period",key:"img"}]},{type:"raw",value:'" alt="">\n		</a>\n	</div>\n'}]}}],Fortune.templates["home-latest-news"]=[{type:"raw",value:"<ul>\n	"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"article",expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]}],output:[{type:"raw",value:"		<li>\n			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'				<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></h3>\n			"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'				<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></h3>\n			"}]}},{type:"raw",value:"		</li>\n	"}]}},{type:"raw",value:"</ul>\n"}],Fortune.templates["home-magazine"]=[{type:"logic",token:{type:"Twig.logic.type.set",key:"cover_article",expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"articles"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]}]}},{type:"raw",value:'\n<header class="magazine-module-header module-header">\n	<h4>Magazine</h4>\n</header>\n<div class="magazine-module-content rail-offset">\n	<div class="magazine-module-content-inner">\n		<div class="magazine-cover-story">\n			<header class="magazine-cover-story-header">\n				'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"items",match:["items"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"image"}],output:[{type:"raw",value:'					<img class="rail" src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"items",match:["items"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"image"}]},{type:"raw",value:'" alt="">\n				'}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"cover_article",match:["cover_article"]},{type:"Twig.expression.type.key.period",key:"featured_image"},{type:"Twig.expression.type.parameter.start",value:"(",match:["("]}],output:[{type:"raw",value:'					<img class="rail" src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"cover_article",match:["cover_article"]},{type:"Twig.expression.type.key.period",key:"featured_image"},{type:"Twig.expression.type.key.period",key:"src"}]},{type:"raw",value:'" alt="">\n				'}]}},{type:"raw",value:'				<div class="titles rail-offset">\n					<p class="section">Cover Story</p>\n					'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"cover_article",match:["cover_article"]},{type:"Twig.expression.type.key.period",key:"short_title"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'						<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"cover_article",match:["cover_article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" data-event="hp-magazine">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"cover_article",match:["cover_article"]},{type:"Twig.expression.type.key.period",key:"short_title"}]},{type:"raw",value:"</a></h3>\n					"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'						<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"cover_article",match:["cover_article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" data-event="hp-magazine">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"cover_article",match:["cover_article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</a></h3>\n					"}]}},{type:"raw",value:'				</div>\n			</header>\n			<div class="magazine-cover-story-content rail-offset">\n				'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"cover_article",match:["cover_article"]},{type:"Twig.expression.type.key.period",key:"excerpt"}],output:[{type:"raw",value:'					<p class="excerpt">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"cover_article",match:["cover_article"]},{type:"Twig.expression.type.key.period",key:"excerpt"}]},{type:"raw",value:"</p>\n				"}]}},{type:"raw",value:'				<div class="magazine-subscribe cm_homepage_magazine_button_wrapper"></div>\n			</div>\n		</div>\n		<div class="magazine-articles">\n			<ul>\n				'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"article",expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"articles"},{type:"Twig.expression.type.filter",value:"slice",match:["|slice","slice"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.number",value:6,match:["6",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}],output:[{type:"raw",value:"					"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'						<li><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" data-event="hp-magazine">\n							'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:"								"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"}]},{type:"raw",value:"\n							"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"								"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"\n							"}]}},{type:"raw",value:"							"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'								<span class="icon icon-key"></span>\n							'}]}},{type:"raw",value:"						</a></li>\n					"}]}},{type:"raw",value:"				"}]}},{type:"raw",value:"			</ul>\n		</div>\n	</div>\n</div>\n"}],Fortune.templates["home-market-data"]=[{type:"raw",value:'<header class="market-data-header">\n	<form class="site-search" action="/">\n		<div class="fortune-search">\n		<input type="text" class="site-search-input" id="site-search-input" placeholder="Search Quotes" name="s">\n		<button class="site-search-submit icon icon-search" type="submit" aria-hidden="true" data-event="search event"></button>\n		</div>\n		<span class="screen-reader-text">Search</span>\n	</form>\n	<div class="market-data-sponsor">Sponsored by <img class="market-data-sponsor-logo" src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"market_data",match:["market_data"]},{type:"Twig.expression.type.key.period",key:"sponsor_url"}]},{type:"raw",value:'" alt=""></div>\n</header>\n<div class="market-data-content">\n	<table>\n		'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"market",expression:[{type:"Twig.expression.type.variable",value:"market_data",match:["market_data"]}],output:[{type:"raw",value:"			<tr>\n				<td>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"market",match:["market"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</td>\n				<td>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"market",match:["market"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:'</td>\n				<td class="increase">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"market",match:["market"]},{type:"Twig.expression.type.key.period",key:"change"},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:'</td>\n				<td class="increase">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"market",match:["market"]},{type:"Twig.expression.type.key.period",key:"change"},{type:"Twig.expression.type.key.period",key:"percentage"}]},{type:"raw",value:"</td>\n			</tr>\n		"}]}},{type:"raw",value:'	</table>\n	<div class="chart">\n		<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"market_data",match:["market_data"]},{type:"Twig.expression.type.key.period",key:"chart"}]},{type:"raw",value:'" alt="">\n	</div>\n</div>\n<footer class="market-data-footer">\n	<a href="#">See All Market Activity</a>\n	<time>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"market_data",match:["market_data"]},{type:"Twig.expression.type.key.period",key:"time"}]},{type:"raw",value:"</time>\n</footer>"}],Fortune.templates["home-must-reads-compare-cards"]=[{type:"raw",value:'<div class="must-read compare-cards">\n	<div class="box">\n		<div class="content">\n			<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"link",match:["link"]}]},{type:"raw",value:'" target="_blank"><img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"enclosure",match:["enclosure"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" data-event="hp-must-reads"></a>\n		</div>\n	</div>\n	<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"link",match:["link"]}]},{type:"raw",value:'" target="_blank">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:'</a></h3>\n	<div class="sponsored-text">Sponsored</div>\n</div>\n'}],Fortune.templates["home-must-reads"]=[{type:"raw",value:'<header class="must-reads-module-header module-header">\n	<h4>Must Reads</h4>\n</header>\n'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"must_read",expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]}],output:[{type:"raw",value:'	<div class="must-read">\n		<div class="box">\n			<div class="content">\n				<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"must_read",match:["must_read"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA4AQMAAAAxYM+bAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABBJREFUGBljYBgFo2AUwAAAAxAAAXtt6FsAAAAASUVORK5CYII=" data-src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"must_read",match:["must_read"]},{type:"Twig.expression.type.key.period",key:"featured_image"},{type:"Twig.expression.type.key.period",key:"src"}]},{type:"raw",value:'" alt="" data-event="hp-must-reads"></a>\n			</div>\n		</div>\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"must_read",match:["must_read"]},{type:"Twig.expression.type.key.period",key:"short_title"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'			<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"must_read",match:["must_read"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"must_read",match:["must_read"]},{type:"Twig.expression.type.key.period",key:"short_title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"must_read",match:["must_read"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></h3>\n		"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'			<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"must_read",match:["must_read"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"must_read",match:["must_read"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"must_read",match:["must_read"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></h3>\n		"}]}},{type:"raw",value:"	</div>\n"}]}}],Fortune.templates["home-newsletter"]=[{type:"raw",value:'<div class="newsletter rail"><a href="http://fortune.com/newsletters" target="_blank" title="Email Fortune"><span class="icon icon-mail"></span></a></div>\n<div class="fortune-newsletter-content rail-offset">\n	<a href="http://fortune.com/newsletters" target="_blank"><h4>Fortune Newsletters</h4></a>\n	<p class="excerpt">To stay on top of the ever-changing world of business, subscribe now to Fortune\'s newsletters.</p>\n	<a href="http://fortune.com/newsletters" target="_blank" data-newsletter-slug="newsletter-hub" class="get-newsletter newsletter-signup-link">See All Fortune Newsletters</a>\n</div>\n'}],Fortune.templates["home-package-a"]=[{type:"raw",value:'<section class="package package-a">\n	<section class="featured-articles home-module">\n		\n		<div class="featured-tertiary desktop tablet"></div>\n		\n		<div class="featured-primary"></div>\n\n		<div class="featured-tertiary mobile"></div>\n		\n		<div class="featured-right">\n									\n			<div class="featured-secondary"></div>\n		\n			<div class="latest-news"></div>\n		\n		</div>\n\n	</section>\n\n	<section class="package-bottom home-module">\n		\n		<div class="commentary-module"></div>\n\n	</section>\n</section>'}],Fortune.templates["home-package-b"]=[{type:"raw",value:'<section class="package package-b">	\n	<section class="featured-articles home-module">\n		\n		<div class="featured-tertiary desktop tablet"></div>\n								\n		<div class="featured-right">\n			\n			<div class="featured-primary"></div>\n								\n		</div>\n\n		<div class="featured-tertiary mobile"></div>\n\n	</section>\n\n	<section class="package-bottom home-module">\n		\n		<div class="commentary-module"></div>\n\n	</section>\n</section>'}],Fortune.templates["home-package-c"]=[{type:"raw",value:'<section class="package package-c">\n	<section class="featured-articles home-module">\n								\n		<div class="featured-primary"></div>\n\n	</section>\n\n	<section class="package-bottom home-module">\n		\n		<div class="commentary-module"></div>\n\n		<div class="latest-news"></div>\n\n	</section>\n</section>'}],Fortune.templates["home-package-wrappers"]=[{type:"raw",value:'<section class="package">\n\n	<div class="featured-articles home-module">\n		\n		<!-- tertiary-a, tertiary-b -->\n\n		<!-- primary-a, primary-c -->\n\n		<div class="featured-right">\n\n			<!-- primary-b -->\n\n			<!-- primary-related-b, primary-related-c -->\n\n			<!-- secondary-a, latest-news-a -->\n\n		</div>\n	</div>\n\n	<div class="package-bottom">\n	\n		<!-- commentaries -->\n\n		<!-- latest-news-c -->\n\n	</div>\n\n</section>'}],Fortune.templates["home-popular"]=[{type:"raw",value:'<header class="popular-module-header module-header">\n	<h4>Popular</h4>\n</header>\n<div class="popular-article-module-content">\n	'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"article",expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]}],conditional:[{type:"Twig.expression.type.variable",value:"article",match:["article"]
},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"is_home_pop"}],output:[{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:5,match:["5",null]},{type:"Twig.expression.type.operator.binary",value:"<",precidence:8,associativity:"leftToRight",operator:"<"}],output:[{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"featured_image"},{type:"Twig.expression.type.key.period",key:"src"},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:'				<div class="popular-article no-image">\n			'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'				<div class="popular-article">\n					<a class="rail" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABEAYAAABPhRjKAAAABGdBTUEAALGPC/xhBQAACkFpQ0NQSUNDIFByb2ZpbGUAAEgNnZZ3VFPZFofPvTe90BIiICX0GnoJINI7SBUEUYlJgFAChoQmdkQFRhQRKVZkVMABR4ciY0UUC4OCYtcJ8hBQxsFRREXl3YxrCe+tNfPemv3HWd/Z57fX2Wfvfde6AFD8ggTCdFgBgDShWBTu68FcEhPLxPcCGBABDlgBwOFmZgRH+EQC1Py9PZmZqEjGs/buLoBku9ssv1Amc9b/f5EiN0MkBgAKRdU2PH4mF+UClFOzxRky/wTK9JUpMoYxMhahCaKsIuPEr2z2p+Yru8mYlybkoRpZzhm8NJ6Mu1DemiXho4wEoVyYJeBno3wHZb1USZoA5fco09P4nEwAMBSZX8znJqFsiTJFFBnuifICAAiUxDm8cg6L+TlongB4pmfkigSJSWKmEdeYaeXoyGb68bNT+WIxK5TDTeGIeEzP9LQMjjAXgK9vlkUBJVltmWiR7a0c7e1Z1uZo+b/Z3x5+U/09yHr7VfEm7M+eQYyeWd9s7KwvvRYA9iRamx2zvpVVALRtBkDl4axP7yAA8gUAtN6c8x6GbF6SxOIMJwuL7OxscwGfay4r6Df7n4Jvyr+GOfeZy+77VjumFz+BI0kVM2VF5aanpktEzMwMDpfPZP33EP/jwDlpzcnDLJyfwBfxhehVUeiUCYSJaLuFPIFYkC5kCoR/1eF/GDYnBxl+nWsUaHVfAH2FOVC4SQfIbz0AQyMDJG4/egJ961sQMQrIvrxorZGvc48yev7n+h8LXIpu4UxBIlPm9gyPZHIloiwZo9+EbMECEpAHdKAKNIEuMAIsYA0cgDNwA94gAISASBADlgMuSAJpQASyQT7YAApBMdgBdoNqcADUgXrQBE6CNnAGXARXwA1wCwyAR0AKhsFLMAHegWkIgvAQFaJBqpAWpA+ZQtYQG1oIeUNBUDgUA8VDiZAQkkD50CaoGCqDqqFDUD30I3Qaughdg/qgB9AgNAb9AX2EEZgC02EN2AC2gNmwOxwIR8LL4ER4FZwHF8Db4Uq4Fj4Ot8IX4RvwACyFX8KTCEDICAPRRlgIG/FEQpBYJAERIWuRIqQCqUWakA6kG7mNSJFx5AMGh6FhmBgWxhnjh1mM4WJWYdZiSjDVmGOYVkwX5jZmEDOB+YKlYtWxplgnrD92CTYRm40txFZgj2BbsJexA9hh7DscDsfAGeIccH64GFwybjWuBLcP14y7gOvDDeEm8Xi8Kt4U74IPwXPwYnwhvgp/HH8e348fxr8nkAlaBGuCDyGWICRsJFQQGgjnCP2EEcI0UYGoT3QihhB5xFxiKbGO2EG8SRwmTpMUSYYkF1IkKZm0gVRJaiJdJj0mvSGTyTpkR3IYWUBeT64knyBfJQ+SP1CUKCYUT0ocRULZTjlKuUB5QHlDpVINqG7UWKqYup1aT71EfUp9L0eTM5fzl+PJrZOrkWuV65d7JU+U15d3l18unydfIX9K/qb8uAJRwUDBU4GjsFahRuG0wj2FSUWaopViiGKaYolig+I1xVElvJKBkrcST6lA6bDSJaUhGkLTpXnSuLRNtDraZdowHUc3pPvTk+nF9B/ovfQJZSVlW+Uo5RzlGuWzylIGwjBg+DNSGaWMk4y7jI/zNOa5z+PP2zavaV7/vCmV+SpuKnyVIpVmlQGVj6pMVW/VFNWdqm2qT9QwaiZqYWrZavvVLquNz6fPd57PnV80/+T8h+qwuol6uPpq9cPqPeqTGpoavhoZGlUalzTGNRmabprJmuWa5zTHtGhaC7UEWuVa57VeMJWZ7sxUZiWzizmhra7tpy3RPqTdqz2tY6izWGejTrPOE12SLls3Qbdct1N3Qk9LL1gvX69R76E+UZ+tn6S/R79bf8rA0CDaYItBm8GooYqhv2GeYaPhYyOqkavRKqNaozvGOGO2cYrxPuNbJrCJnUmSSY3JTVPY1N5UYLrPtM8Ma+ZoJjSrNbvHorDcWVmsRtagOcM8yHyjeZv5Kws9i1iLnRbdFl8s7SxTLessH1kpWQVYbbTqsPrD2sSaa11jfceGauNjs86m3ea1rakt33a/7X07ml2w3Ra7TrvP9g72Ivsm+zEHPYd4h70O99h0dii7hH3VEevo4bjO8YzjByd7J7HTSaffnVnOKc4NzqMLDBfwF9QtGHLRceG4HHKRLmQujF94cKHUVduV41rr+sxN143ndsRtxN3YPdn9uPsrD0sPkUeLx5Snk+cazwteiJevV5FXr7eS92Lvau+nPjo+iT6NPhO+dr6rfS/4Yf0C/Xb63fPX8Of61/tPBDgErAnoCqQERgRWBz4LMgkSBXUEw8EBwbuCHy/SXyRc1BYCQvxDdoU8CTUMXRX6cxguLDSsJux5uFV4fnh3BC1iRURDxLtIj8jSyEeLjRZLFndGyUfFRdVHTUV7RZdFS5dYLFmz5EaMWowgpj0WHxsVeyR2cqn30t1Lh+Ps4grj7i4zXJaz7NpyteWpy8+ukF/BWXEqHhsfHd8Q/4kTwqnlTK70X7l35QTXk7uH+5LnxivnjfFd+GX8kQSXhLKE0USXxF2JY0muSRVJ4wJPQbXgdbJf8oHkqZSQlKMpM6nRqc1phLT4tNNCJWGKsCtdMz0nvS/DNKMwQ7rKadXuVROiQNGRTChzWWa7mI7+TPVIjCSbJYNZC7Nqst5nR2WfylHMEeb05JrkbssdyfPJ+341ZjV3dWe+dv6G/ME17msOrYXWrlzbuU53XcG64fW+649tIG1I2fDLRsuNZRvfbore1FGgUbC+YGiz7+bGQrlCUeG9Lc5bDmzFbBVs7d1ms61q25ciXtH1YsviiuJPJdyS699ZfVf53cz2hO29pfal+3fgdgh33N3puvNYmWJZXtnQruBdreXM8qLyt7tX7L5WYVtxYA9pj2SPtDKosr1Kr2pH1afqpOqBGo+a5r3qe7ftndrH29e/321/0wGNA8UHPh4UHLx/yPdQa61BbcVh3OGsw8/rouq6v2d/X39E7Ujxkc9HhUelx8KPddU71Nc3qDeUNsKNksax43HHb/3g9UN7E6vpUDOjufgEOCE58eLH+B/vngw82XmKfarpJ/2f9rbQWopaodbc1om2pDZpe0x73+mA050dzh0tP5v/fPSM9pmas8pnS8+RzhWcmzmfd37yQsaF8YuJF4c6V3Q+urTk0p2usK7ey4GXr17xuXKp2737/FWXq2euOV07fZ19ve2G/Y3WHruell/sfmnpte9tvelws/2W462OvgV95/pd+y/e9rp95Y7/nRsDiwb67i6+e/9e3D3pfd790QepD14/zHo4/Wj9Y+zjoicKTyqeqj+t/dX412apvfTsoNdgz7OIZ4+GuEMv/5X5r0/DBc+pzytGtEbqR61Hz4z5jN16sfTF8MuMl9Pjhb8p/rb3ldGrn353+71nYsnE8GvR65k/St6ovjn61vZt52To5NN3ae+mp4req74/9oH9oftj9MeR6exP+E+Vn40/d3wJ/PJ4Jm1m5t/3hPP7MjpZfgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAtJREFUCB1jYIACAAAJAAEMt4hlAAAAAElFTkSuQmCC" data-src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"featured_image"},{type:"Twig.expression.type.key.period",key:"src"}]},{type:"raw",value:'" alt="" data-event="hp-popular"/></a>\n			'}]}},{type:"raw",value:'				<div class="popular-article-content rail-offset">\n					<p class="section"><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"section"},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" data-event="hp-popular">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"section"},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</a></p>\n					<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" data-event="hp-popular">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:" </a>\n					"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"is_same_day"}],output:[{type:"raw",value:"	  					<time>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"minute"}]},{type:"raw",value:"</time>\n	    			"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"	   					<time>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"pretty"},{type:"Twig.expression.type.string",value:", "},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"minute"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:"</time>\n	    			"}]}},{type:"raw",value:"	   				</h3>\n				</div>\n			</div>\n		"}]}},{type:"raw",value:"	"}]}},{type:"raw",value:"</div>\n"}],Fortune.templates["home-primary"]=[{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"article",expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]}],output:[{type:"raw",value:"	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"is_same_day"}],output:[{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.set",key:"article_time",expression:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"minute"}]}},{type:"raw",value:"	"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.set",key:"article_time",expression:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"pretty"},{type:"Twig.expression.type.string",value:", "},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"minute"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}},{type:"raw",value:"	"}]}},{type:"raw",value:"\n	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'			<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></h3>\n		"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'			<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></h3>\n		"}]}},{type:"raw",value:'		<article class="featured-primary-top-story">\n			<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'"><img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"featured_image"},{type:"Twig.expression.type.key.period",key:"src"}]},{type:"raw",value:'" alt=""></a>\n			<div class="featured-primary-content">\n				'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'					<h3 class="featured-headline"><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></h3>\n				"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'					<h3 class="featured-headline"><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></h3>\n				"}]}},{type:"raw",value:"				<time>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article_time",match:["article_time"]}]},{type:"raw",value:'</time>\n				<p class="excerpt">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"excerpt"}]},{type:"raw",value:'</p>\n			</div>\n		</article>\n		<div class="featured-primary-related">\n			'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'				<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'"><h3>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:" <time>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article_time",match:["article_time"]}]},{type:"raw",value:"</time></h3></a>\n			"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'				<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'"><h3>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:" <time>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article_time",match:["article_time"]}]},{type:"raw",value:"</time></h3></a>\n			"}]}},{type:"raw",value:"			<ul>\n	"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'			<li><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></li>\n		"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'			<li><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></li>\n		"}]}},{type:"raw",value:"	"}]}}]}},{type:"raw",value:'	</ul>\n</div>\n<a class="newsletter-signup-link" href="#newsletter" data-newsletter-slug="daily">\n	<div class="package-signup">\n		<p>Sign up for the <span>Fortune CEO Daily</span></p>\n	</div>\n</a>\n'}],Fortune.templates["home-quick-links"]=[{type:"raw",value:'<div class="full-width-element-wrapper">\n	<form class="site-search" action="http://search-app.fortune.com">\n		<div class="fortune-search">\n		<input type="text" class="site-search-input" id="site-search-input" placeholder="Quotes, Companies, Keywords" name="q">\n		<button class="site-search-submit icon icon-search" type="submit" aria-hidden="true" data-event="search event"></button>\n		</div>\n		<span class="screen-reader-text">Search</span>\n	</form>\n	<ul>\n		<li>Quick Links:</li>\n		'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"quick_link",expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]}],output:[{type:"raw",value:'			<li><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"quick_link",match:["quick_link"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"quick_link",match:["quick_link"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</a></li>\n		"}]}},{type:"raw",value:"	</ul>\n</div>\n"}],Fortune.templates["home-ranked-companies"]=[{type:"raw",value:'<header class="fortune-500-companies-header module-header">\n	<h4 class="module-header">Fortune 500 Companies in the News</h4>\n	<div class="fortune-500-see-all-buttons">\n		<a class="fortune-500-full" href="/fortune500">Fortune 500 Full List</a>\n		<a class="fortune-500-full" href="/rankings">All Fortune Rankings</a>\n	</div>\n</header>\n<div class="fortune-500-companies-content">\n	'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"company",expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]}],output:[{type:"raw",value:'		<article class="company">\n			<header class="company-header">\n				<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" class="company-ranking section"><span>#'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"rank"}]},{type:"raw",value:"</span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'</a>\n			</header>\n			<div class="company-content">\n				'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"article"},{type:"Twig.expression.type.key.period",key:"short_title"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'					<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"article"},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"article"},{type:"Twig.expression.type.key.period",key:"short_title"}]},{type:"raw",value:"</a></h3>\n				"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'					<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"article"},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"article"},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</a></h3>\n				"}]}},{type:"raw",value:'				<p class="excerpt">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"article"},{type:"Twig.expression.type.key.period",key:"excerpt"}]},{type:"raw",value:"</p>\n				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"article"},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"is_same_day"}],output:[{type:"raw",value:"					<time>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"article"},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"minute"}]},{type:"raw",value:"</time>\n				"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"					<time>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"article"},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"pretty"},{type:"Twig.expression.type.string",value:", "},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"article"},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"minute"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:"</time>\n				"}]}},{type:"raw",value:"			</div>\n		</article>\n	"}]}},{type:"raw",value:"</div>\n"}],Fortune.templates["home-secondary"]=[{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"article",expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]}],output:[{type:"raw",value:'	<article class="featured-secondary-with-image">\n		<div class="secondary-featured-image">\n			<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'"><img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"featured_image"},{type:"Twig.expression.type.key.period",key:"src"}]},{type:"raw",value:'" alt=""></a>\n			'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.string",value:"video"},{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"featured_type"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:'				<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" class="icon icon-video-play"></a>\n			'}]}},{type:"raw",value:"		</div>\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'			<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"}]},{type:"raw",value:"</a></h3>\n		"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'			<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></h3>\n		"}]}},{type:"raw",value:"	</article>\n"}]}}],Fortune.templates["home-slideshow"]=[{type:"raw",value:'<header class="feature-slideshow-module-header module-header mobile">\n	<h4>Feature</h4>\n</header>\n<div class="feature-slideshow-module-controls rail">\n	<div class="gallery-arrows">\n		<span class="prev icon icon-prev-line" data-event="hp-feature-arrow"></span>\n		<span>/</span>\n		<span class="next icon enabled icon-next-line" data-event="hp-feature-arrow"></span>\n	</div>\n	<span class="gallery-slide-numbers">\n		<span class="current-slide">1</span> of <span class="total-slides">6</span>\n	</span>\n</div>\n<div class="slides rail-offset">\n	'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"slide",expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]}],output:[{type:"raw",value:'		<div class="slide">\n			<div class="feature-slideshow-module-image">\n				<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"slide",match:["slide"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'"><img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"slide",match:["slide"]},{type:"Twig.expression.type.key.period",key:"featured_image"},{type:"Twig.expression.type.key.period",key:"src"}]},{type:"raw",value:'" alt="" data-event="hp-feature"></a>\n			</div>\n			<div class="feature-slideshow-module-content">\n				<header class="feature-slideshow-module-header module-header">\n					<h4 class="desktop tablet">Feature</h4>\n					'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"slide",match:["slide"]},{type:"Twig.expression.type.key.period",key:"short_title"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'						<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"slide",match:["slide"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" data-event="hp-feature">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"slide",match:["slide"]},{type:"Twig.expression.type.key.period",key:"short_title"}]},{type:"raw",value:"</a></h3>\n					"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'						<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"slide",match:["slide"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" data-event="hp-feature">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"slide",match:["slide"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</a></h3>\n					"}]}},{type:"raw",value:'				</header>\n				<p class="excerpt">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"slide",match:["slide"]},{type:"Twig.expression.type.key.period",key:"excerpt"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"slide",match:["slide"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</p>\n			</div>\n		</div>\n	"}]}},{type:"raw",value:"</div>\n"}],Fortune.templates["home-tertiary"]=[{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"article",
expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]}],output:[{type:"raw",value:"	<article>\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'			<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"short_title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></h3>\n		"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'			<h3><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"paid"}],output:[{type:"raw",value:'<span class="icon icon-key"></span>'}]}},{type:"raw",value:"</a></h3>\n		"}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'			<p class="excerpt">\n		'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'			<p class="excerpt desktop mobile">\n		'}]}},{type:"raw",value:"			"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"excerpt"},{type:"Twig.expression.type.filter",value:"striptags",match:["|striptags","striptags"]}]},{type:"raw",value:"\n		</p>\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"is_same_day"}],output:[{type:"raw",value:"			<time>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"minute"}]},{type:"raw",value:"</time>\n		"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"			<time>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"pretty"},{type:"Twig.expression.type.string",value:", "},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.key.period",key:"minute"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:"</time>\n		"}]}},{type:"raw",value:"	</article>\n"}]}}],Fortune.templates["home-tweet"]=[{type:"logic",token:{type:"Twig.logic.type.set",key:"tweet",expression:[{type:"Twig.expression.type.variable",value:"items",match:["items"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]}]}},{type:"raw",value:'<div class="twitter rail"><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tweet",match:["tweet"]},{type:"Twig.expression.type.key.period",key:"user_url"}]},{type:"raw",value:'" target="_blank" class="twitter-handle"><span class="icon icon-twitter"></span></a></div>\n<div class="fortune-twitter-content rail-offset">\n	<h4>Fortune Magazine</h4>\n	<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tweet",match:["tweet"]},{type:"Twig.expression.type.key.period",key:"user_url"}]},{type:"raw",value:'" target="_blank" class="twitter-handle">@'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tweet",match:["tweet"]},{type:"Twig.expression.type.key.period",key:"handle"}]},{type:"raw",value:'</a>\n	<p class="latest-tweet">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tweet",match:["tweet"]},{type:"Twig.expression.type.key.period",key:"tweet"}]},{type:"raw",value:"</p>\n</div>"}],Fortune.templates.home=[{type:"raw",value:'		<aside class="home-right-rail rail">\n			<div class="market-data-module home-module">\n				<header class="market-data-header">\n					<form class="site-search" action="/">\n						<div class="fortune-search">\n						<input type="text" class="site-search-input" id="site-search-input" placeholder="Search Quotes" name="s">\n						<button class="site-search-submit icon icon-search" type="submit" aria-hidden="true" data-event="search event"></button>\n						</div>\n						<span class="screen-reader-text">Search</span>\n					</form>\n					<div class="market-data-sponsor fortune-ad-unit" id="logo_1_btf"></div>\n				</header>\n				<div class="market-data-content">\n					<iframe src="http://markets.fortune.com/application/markets/homepage" frameBorder="0" scrolling="no" class="fortune-fullwidth"></iframe>\n				</div>\n			</div>\n\n			<div class="homepage_top_right_multi_wrapper homepage-right-rail-ad fortune-ad-unit" id="homepage-right-rail-ad"></div>\n			<div class="homepage_mobile_mid_wrapper fortune-ad-unit" id="homepage-mobile-mid-ad" ></div>\n			<div class="franchise-rankings-module"></div>\n		</aside>\n\n		<section class="must-reads-module home-module"></section>\n\n		<div class="homepage_fullwidth_multi_wrapper fortune-ad-unit" id="homepage-full-width-ad"></div>\n\n		<section class="popular-module home-module"></section>\n\n		<section class="feature-slideshow-module home-module"></section>\n\n		<div class="home-floated-modules">\n\n			<section class="magazine-module home-module rail-offset"></section>\n\n			<div class="connect-module home-module rail">\n				<div class="fortune-twitter"></div>\n				<div class="fortune-newsletter"></div>\n			</div>\n\n		</div>\n'}],Fortune.templates["insider-answer"]=[{type:"raw",value:'<div class="author-info">\n'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]}],output:[{type:"raw",value:'<div class="author-image">\n	<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"featured_image",match:["featured_image"]},{type:"Twig.expression.type.key.period",key:"src"}]},{type:"raw",value:'" height="55" width="55">\n</div>\n'}]}},{type:"raw",value:'\n<div class="author-meta">\n	'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"author",expression:[{type:"Twig.expression.type.variable",value:"authors",match:["authors"]}],output:[{type:"raw",value:'	<div class="byline">\n		by <strong>\n			'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"title"}],output:[{type:"raw",value:", "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"title"}]}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"company"}],output:[{type:"raw",value:", "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"company"}]}]}},{type:"raw",value:"		</strong>\n	</div>\n	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"twitter"}],output:[{type:"raw",value:'	<div class="author-byline-twitter">\n		<a class="author-byline-twitter" target="_blank" href="http://twitter.com/'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"twitter"}]},{type:"raw",value:'">@'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"author",match:["author"]},{type:"Twig.expression.type.key.period",key:"twitter"}]},{type:"raw",value:"</a>\n	</div>\n	"}]}},{type:"raw",value:"	"}]}},{type:"raw",value:"\n	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]}],output:[{type:"raw",value:'	<div class="insider-tools">\n		<div class="article-social-wrapper">\n			<h4 class="article-social-tools-toggle-trigger">Share this Answer</h4>\n			<ul class="article-social-icons">\n\n				<li>\n					<a aria-hidden="true" class="icon-mail" data-event="shareanswer" href="mailto:?subject='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"&amp;body="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"encoded_shortlink"}]},{type:"raw",value:'"></a>\n					<span class="screen-reader-text">E-mail</span>\n				</li>\n				<li>\n					<a aria-hidden="true" class="icon-twitter" data-event="shareanswer" target="_blank" href="https://twitter.com/share?url='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"encoded_shortlink"}]},{type:"raw",value:"&amp;text="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"twitter_text"}]},{type:"raw",value:'"></a>\n					<span class="screen-reader-text">Tweet</span>\n				</li>\n				<li>\n					<a aria-hidden="true" class="icon-facebook" data-event="shareanswer" target="_blank" href="http://www.facebook.com/sharer.php?u='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"encoded_shortlink"}]},{type:"raw",value:"&amp;t="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"facebook_title"}]},{type:"raw",value:'"></a>\n					<span class="screen-reader-text">Facebook</span>\n				</li>\n				<li>\n					<a aria-hidden="true" class="icon-linkedin" data-event="shareanswer" target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"encoded_shortlink"}]},{type:"raw",value:"&amp;title"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"social",match:["social"]},{type:"Twig.expression.type.key.period",key:"encoded_title"}]},{type:"raw",value:'&amp;source=Fortune"></a>\n					<span class="screen-reader-text">Linkedin</span>\n				</li>\n\n			</ul>\n			<span title="Click to view article share options" aria-hidden="true" class="icon-share show-all-social-icon"></span>\n			<div class="screen-reader-text">Share icons</div>\n		</div>\n	</div>\n	'}]}},{type:"raw",value:"\n	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"pretty_date"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"pretty_time"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'	<time class="article-byline-time article-byline-item" itemprop="datePublished" datetime="2014-08-26 02:10:52" pubdate="">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"pretty_date"}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"pretty_time"}]},{type:"raw",value:"</time>\n	"}]}},{type:"raw",value:'</div>\n</div>\n\n<div class="insider-author-answer">\n'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"excerpt",match:["excerpt"]}],output:[{type:"raw",value:'<div class="excerpt">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"excerpt",match:["excerpt"]}]},{type:"raw",value:"</div>\n"}]}},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"content",match:["content"]}]},{type:"raw",value:'\n</div>\n<div class="insider-answer-footer">\n'},{type:"raw",value:"\n</div>\n\n\n"},{type:"raw",value:"\n"}],Fortune.templates["left-rail-ad"]=[{type:"raw",value:'<div class="left-rail-ad fortune-ad-unit" id="left-rail-ad-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"pos",match:["pos"]}]},{type:"raw",value:'"></div>'}],Fortune.templates["leftrail-header-article"]=[{type:"raw",value:'<form class="site-search" action="http://search-app.fortune.com">\n	<div class="fortune-search">\n	<input class="search-field-submit" type="submit" value="Search">\n	<input type="text" class="site-search-input" id="site-search-input" placeholder="Quotes, Companies, Keywords" name="q">\n	</div>\n	<span class="screen-reader-text">Search</span>\n</form>\n<div class="left-rail-tabs"></div>\n<button class="site-search-fortune icon icon-search" type="submit" aria-hidden="true" data-event="search event"></button>\n<div class="left-rail-header-meta"></div>\n'}],Fortune.templates["leftrail-header-meta"]=[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"popular"},{type:"Twig.expression.type.variable",value:"type",match:["type"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'	<p class="popular">Most Read</p>\n'}]}},{type:"raw",value:"\n"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.string",value:"company"},{type:"Twig.expression.type.variable",value:"type",match:["type"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:'	<p class="queried-object-title">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"upper",match:["|upper","upper"]}]},{type:"raw",value:"</p>\n"}]}},{type:"raw",value:"\n"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"franchise"},{type:"Twig.expression.type.variable",value:"type",match:["type"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'	<div class="ranking-filter collapsed">\n		<p class="ranking-filter-title">\n			<select id="franchise-year-dropdown" name="franchise-year-dropdown" class="franchise-year-select" onchange="document.location.href=this.value">\n				'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"option",expression:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"years"}],output:[{type:"raw",value:'					<option value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"selected"}]},{type:"raw",value:">"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"short_name"}]},{type:"raw",value:"</option>\n				"}]}},{type:"raw",value:'			</select>\n		</p>\n\n		<div class="ranking-filter-form-header">\n			<p><a href="#" class="filter-toggle">Filter</a></p>\n		</div>\n		<div class="ranking-filter-content">\n			<form action="#" class="ranking-filter-form">\n				<div class="ranking-filter-form-text">\n					<div class="fortune-search">\n					<input name="fsearch" type="text" class="site-search-input" id="ranking-filter-input" placeholder="Search within list">\n					<button class="site-search-submit icon icon-search" type="submit" aria-hidden="true" data-event="search event"></button>\n					</div>\n				</div>\n				'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"filters",match:["filters"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"					"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:"title",value_var:"f",expression:[{type:"Twig.expression.type.variable",value:"filters",match:["filters"]}],output:[{type:"raw",value:'						<div class="filter-item">\n							<p class="filter-text">\n								<!-- <span class="select-title">Sort</span> -->\n								<select name="filters['},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:']" class="filter-select">\n									<option value="">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:": Any</option>\n									"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"option",expression:[{type:"Twig.expression.type.variable",value:"f",match:["f"]},{type:"Twig.expression.type.filter",value:"sort",match:["|sort","sort"]}],output:[{type:"raw",value:'										<option value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:1,match:["1",null]}]}]},{type:"raw",value:"</option>\n									"}]}},{type:"raw",value:'								</select>\n							</p>\n							<a href="#" class="icon icon-close"></a>\n							<a href="#" class="icon icon-down-arrow"></a>\n						</div>\n					'}]}},{type:"raw",value:"				"}]}},{type:"raw",value:"				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"sort",match:["sort"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'					<div class="filter-item filter-type-sort">\n						<p class="filter-text sort">\n							<!-- <span class="select-title">Sort</span> -->\n							<select name="fsort" id="filter-sort">\n								'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"option",expression:[{type:"Twig.expression.type.variable",value:"sort",match:["sort"]}],output:[{type:"raw",value:'									<option value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]}]},{type:"raw",value:'|ASC">Sort: '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]}]},{type:"raw",value:', ascending</option>\n									<option value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]}]},{type:"raw",value:'|DESC">Sort: '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]}]},{type:"raw",value:", descending</option>\n								"}]}},{type:"raw",value:'							</select>\n						</p>\n						<a href="#" class="icon icon-down-arrow"></a>\n					</div>\n				'}]}},{type:"raw",value:"			</form>\n		</div>\n	</div>\n"}]}},{type:"raw",value:"\n"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"author"},{type:"Twig.expression.type.variable",value:"type",match:["type"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<p class="queried-object-title">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</p>\n<div class="author-meta">\n	<p>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"thumbnail"}]},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"bio"}]},{type:"raw",value:'</p>\n	<div class="author-meta-contact">\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"email"}],output:[{type:"raw",value:'		<div class="email-holder"><a href="mailto:'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"email"}]},{type:"raw",value:'" class="icon-mail"></a></div>\n		'}]}},{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"twitter"}],output:[{type:"raw",value:'		<div class="author-twitter-holder"><a href="https://twitter.com/'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"twitter"}]},{type:"raw",value:'" target="_blank" class="icon-twitter author-twitter-link" aria-hidden="true"></a></div>\n		'}]}},{type:"raw",value:"	</div>\n</div>\n"}]}}],Fortune.templates.leftrail=[{type:"raw",value:'<header class="left-rail-header"></header>\n<div class="article-index"></div>'}],Fortune.templates["nativo-logo"]=[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"advertiser_logo",match:["advertiser_logo"]}],output:[{type:"raw",value:'	<span id="sponsor-logo"><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"advertiser_url",match:["advertiser_url"]}]},{type:"raw",value:'" target="_blank"><img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"advertiser_logo",match:["advertiser_logo"]}]},{type:"raw",value:'"/></a></span>\n'}]}},{type:"raw",value:"\n"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"advertiser_name",match:["advertiser_name"]}],output:[{type:"raw",value:'<span id="content-from">Content From: <a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"landingUrl",match:["landingUrl"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"advertiser_name",match:["advertiser_name"]}]},{type:"raw",value:"</a></span>\n"}]}}],Fortune.templates["nativo-tout-ad"]=[{type:"raw",value:'<div class="fortune-ad-unit" id="nativo-tout-ad">\n</div>'}],Fortune.templates["nativo-tout"]=[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"preview_image",match:["preview_image"]}],output:[{type:"raw",value:'<div class="tout-image">\n	<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"preview_image",match:["preview_image"]}]},{type:"raw",value:'" />\n</div>\n'}]}},{type:"raw",value:'<div class="tout-text-content">\n	<h2><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article_full_url",match:["article_full_url"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"preview_headline",match:["preview_headline"]}]},{type:"raw",value:'</a></h2>\n	<div class="preview-text">\n		<p>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"preview_text",match:["preview_text"]}]},{type:"raw",value:'</p>\n		<div class="article-timestamp"><span class="article-date">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"prettyDate",match:["prettyDate"]}]},{type:"raw",value:'</span> <span class="article-time">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article_time",match:["article_time"]}]},{type:"raw",value:"</span></div>\n	</div>\n</div>"}],Fortune.templates["ranking-single"]=[{type:"raw",value:'<div class="article-inner">\n	<header class="article-header">\n\n		<div class="rank-wrapper rail">\n			<span class="rank">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rank",match:["rank"]}]},{type:"raw",value:'</span>\n		</div>\n\n		<div class="article-title rail-offset">\n			<h1 class="article-headline" itemprop="headline">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:'</h1>\n		</div>\n		\n		<div class="ranking-article-share rail">\n			<div class="social-icons article-byline-social article-social"></div>\n			<span class="screen-reader-text">Share icons</span>\n		</div>		\n\n	</header>\n\n	'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"src"},{type:"Twig.expression.type.string",value:"featured-img-article_full"},{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"class"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'		<figure class="article-primary-image">\n			<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"src"}]},{type:"raw",value:'" itemprop="image" alt="">\n			'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"credit"}],output:[{type:"raw",value:'				<figcaption class="article-image-figcaption">\n					'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"credit"}],output:[{type:"raw",value:'						<span class="article-image-credit">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"credit"}]},{type:"raw",value:"</span>\n					"}]}},{type:"raw",value:"				</figcaption>\n			"}]}},{type:"raw",value:"		</figure>\n	"}]}},{type:"raw",value:'\n	<div class="article-body" itemprop="articleBody">\n\n		<div class="article-top rail-offset">\n\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"content",match:["content"]}],output:[{type:"raw",value:'			<div class="ranking-highlights">\n		'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'			<div class="ranking-highlights no-content">\n		'}]}},{type:"raw",value:'\n				<table class="highlights-table">\n					<tbody>\n						'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:"name",value_var:"value",expression:[{type:"Twig.expression.type.variable",value:"highlights",match:["highlights"]}],output:[{type:"raw",value:"							<tr>\n								<th>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"name",match:["name"]}]},{type:"raw",value:"</th>\n								<td>\n									"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"name",match:["name"]},{type:"Twig.expression.type.string",value:"Rank"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"value",match:["value"]},{type:"Twig.expression.type.number",value:1e5,match:["100000",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"										-\n									"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"										"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"value",match:["value"]}]},{type:"raw",value:"\n									"}]}},{type:"raw",value:"								</td>\n							</tr>\n						"}]}},{type:"raw",value:"					</tbody>\n				</table>\n\n				"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ticker",match:["ticker"]}]},{type:"raw",value:"\n\n				"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"src"},{type:"Twig.expression.type.string",value:"featured-img-article_half"},{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"class"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'					<figure class="article-primary-image">\n						<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",
key:"src"}]},{type:"raw",value:'" itemprop="image" alt="">\n						'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"credit"}],output:[{type:"raw",value:'							<figcaption class="article-image-figcaption">\n								'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"credit"}],output:[{type:"raw",value:'									<span class="article-image-credit">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"credit"}]},{type:"raw",value:"</span>\n								"}]}},{type:"raw",value:"							</figcaption>\n						"}]}},{type:"raw",value:"					</figure>\n				"}]}},{type:"raw",value:"\n			</div>\n\n			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"src"},{type:"Twig.expression.type.string",value:"featured-img-rank_portrait"},{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"class"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'				<figure class="article-primary-image">\n					<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"src"}]},{type:"raw",value:'" itemprop="image" alt="">\n					'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"credit"}],output:[{type:"raw",value:'						<figcaption class="article-image-figcaption">\n							'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"credit"}],output:[{type:"raw",value:'								<span class="article-image-credit">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"credit"}]},{type:"raw",value:"</span>\n							"}]}},{type:"raw",value:"						</figcaption>\n					"}]}},{type:"raw",value:"				</figure>\n			"}]}},{type:"raw",value:"\n			"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"content",match:["content"]}]},{type:"raw",value:"\n\n		</div>\n\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"},{type:"Twig.expression.type.string",value:"featured-img-article_full"},{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"class"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'\n			<div class="article-bottom-and-rail">\n\n		'}]}},{type:"raw",value:'\n				<div class="article-bottom rail-offset">\n\n					<div class="article-body-text">\n						'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:"tablename",value_var:"table",expression:[{type:"Twig.expression.type.variable",value:"tables",match:["tables"]}],output:[{type:"raw",value:'							<table class="ranking-article-data-table">\n								<thead>\n									<tr>\n										<th><h3>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tablename",match:["tablename"]}]},{type:"raw",value:"</h3></th>\n										"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"colhead",expression:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"columns"}],output:[{type:"raw",value:"											<th>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"colhead",match:["colhead"]}]},{type:"raw",value:"</th>\n										"}]}},{type:"raw",value:"									</tr>\n								</thead>\n								<tbody>\n									"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:"label",value_var:"data_field",expression:[{type:"Twig.expression.type.variable",value:"table",match:["table"]},{type:"Twig.expression.type.key.period",key:"data"}],output:[{type:"raw",value:"										<tr>\n											<th>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"label",match:["label"]}]},{type:"raw",value:"</th>\n											"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"value",expression:[{type:"Twig.expression.type.variable",value:"data_field",match:["data_field"]}],output:[{type:"raw",value:"												<td>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"value",match:["value"]}]},{type:"raw",value:"</td>\n											"}]}},{type:"raw",value:"										</tr>\n									"}]}},{type:"raw",value:"								</tbody>\n							</table>\n						"}]}},{type:"raw",value:"					</div>\n\n					"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"linkedin",match:["linkedin"]}],output:[{type:"raw",value:'						<div class="franchise-linkedin-ad fortune-ad-unit" id="franchise-linkedin-ad-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'"></div>\n						<div class="linkedin_genCont">\n							<div class="linkedin_box">\n								<script type="IN/companyinsider" data-id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"linkedin",match:["linkedin"]}]},{type:"raw",value:'" data-modules="innetwork,newhires,jobchanges" data-provider="fortune"\n								></script>\n							</div>\n						</div>\n					'}]}},{type:"raw",value:'\n				</div>\n\n				<div class="right-rail rail">\n					<div class="right-rail-inner"></div>\n				</div>\n\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"},{type:"Twig.expression.type.string",value:"featured-img-article_full"},{type:"Twig.expression.type.variable",value:"thumbnail",match:["thumbnail"]},{type:"Twig.expression.type.key.period",key:"class"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:"\n			</div>\n\n		"}]}},{type:"raw",value:'\n	</div>\n\n	<div class="article-mobile-ad mobile article_body_mobile_multi_wrapper"></div>\n\n	<footer class="article-footer">\n\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"buttons",match:["buttons"]}],output:[{type:"raw",value:'			<div class="ranking-article-footer-buttons">\n				'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:"label",value_var:"url",expression:[{type:"Twig.expression.type.variable",value:"buttons",match:["buttons"]}],output:[{type:"raw",value:'					<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"url",match:["url"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"label",match:["label"]}]},{type:"raw",value:"</a>\n				"}]}},{type:"raw",value:"			</div>\n		"}]}},{type:"raw",value:"\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"footnotes",match:["footnotes"]}],output:[{type:"raw",value:'			<div class="ranking-footnotes">\n				'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"footnote",expression:[{type:"Twig.expression.type.variable",value:"footnotes",match:["footnotes"]}],output:[{type:"raw",value:"					<p>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"footnote",match:["footnote"]}]},{type:"raw",value:"</p>\n				"}]}},{type:"raw",value:"			</div>\n		"}]}},{type:"raw",value:"\n	</footer>\n</div>"}],Fortune.templates["right-rail-article-bottom"]=[{type:"raw",value:'<div class="right-rail-nativo-article-bottom-ad"></div>\n\n'}],Fortune.templates["right-rail"]=[{type:"raw",value:'<div class="right-rail-ad"></div>\n\n<div class="right-rail-nativo-ad"></div>\n\n<div class="right-rail-popular"></div>\n\n<div class="right-rail-taboola"></div>\n\n<div class="right-rail-glassdoor"></div>\n\n<div class="right-rail-trulia"></div>\n\n<div class="right-rail-bankrate"></div>\n\n<div class="right-rail-outbrain"></div>\n\n<div class="right-rail-buttons-container"></div>\n\n<div class="right-rail-related"></div>\n\n<div class="right-rail-dianomi"></div>\n'}],Fortune.templates["rightrail-module-ad-buttons"]=[{type:"raw",value:"<h2>Sponsor Center</h2>\n"},{type:"logic",token:{type:"Twig.logic.type.set",key:"numberOfButtons",expression:[{type:"Twig.expression.type.number",value:4,match:["4",null]}]}},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"i",expression:[{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.variable",value:"numberOfButtons",match:["numberOfButtons"]},{type:"Twig.expression.type.operator.binary",value:"..",precidence:20,associativity:"leftToRight",operator:".."}],output:[{type:"raw",value:'	<div id="ad-button-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"i",match:["i"]}]},{type:"raw",value:"-"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'"></div>\n'}]}}],Fortune.templates["rightrail-module-ad"]=[{type:"raw",value:'<div class="right-rail-ad right_rail_300x600_wrapper fortune-ad-unit" id="right-rail-ad-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'"></div>'}],Fortune.templates["rightrail-module-bankrate"]=[{type:"raw",value:'<iframe src="http://www.bankrate.com/jsfeeds/fortune-frame.html" width="100%" height="476" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>\n'}],Fortune.templates["rightrail-module-dianomi"]=[{type:"raw",value:'<div class="module-related module-dianomi">\n	'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"campaigns",match:["campaigns"]}],output:[{type:"raw",value:'	<div class="dianomi-title">Sponsored Financial Content</div>\n	<ul>\n		'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"campaign",expression:[{type:"Twig.expression.type.variable",value:"campaigns",match:["campaigns"]}],output:[{type:"raw",value:'		<li>\n			<a target="_blank" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"campaign",match:["campaign"]},{type:"Twig.expression.type.key.period",key:"target_url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"campaign",match:["campaign"]},{type:"Twig.expression.type.key.period",key:"Teaser"}]},{type:"raw",value:'</a>\n			<div class="dianomi-provider">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"campaign",match:["campaign"]},{type:"Twig.expression.type.key.period",key:"Provider"}]},{type:"raw",value:"</div>\n		</li>\n		"}]}},{type:"raw",value:'	</ul>\n	<div class="dianomi-footer"><a target="_blank" href="http://www.dianomi.com/cms/whats-this/?utm_source=pub.timeinc&utm_medium=smartad_sponsor_link" ><img src="http://assets.time.com/images/dianomi-logo.png" /></a></div>\n	'}]}},{type:"raw",value:"</div>\n"}],Fortune.templates["rightrail-module-glassdoor"]=[{type:"raw",value:'<div class="jobsWidget">\n <a href="http://jobs.fortune.com/home.php?format=217x450\n&e='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"url_encode",match:["|url_encode","url_encode"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" target="_pn">See '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"company",match:["company"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</a> on Fortune.com Job Search.\n</div>\n<script src=\"http://jobs.fortune.com/js/gd/gd-util.js\"></script>\n<script src='http://jobs.fortune.com/js/widget.js' type='text/javascript'></script>\n"}],Fortune.templates["rightrail-module-nativo-ad"]=[{type:"raw",value:'<div class="right-rail-nativo-ad right_rail_300x600_wrapper fortune-ad-unit" id="right-rail-nativo-ad-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'"></div>'}],Fortune.templates["rightrail-module-nativo-article-bottom-ad"]=[{type:"raw",value:'<div class="right-rail-nativo-mobile-article-bottom-ad right_rail_300x250_wrapper fortune-ad-unit" id="right-rail-nativo-article-bottom-ad-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'"></div>'}],Fortune.templates["rightrail-module-outbrain"]=[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"outbrain_right_rail",match:["outbrain_right_rail"]}],output:[{type:"raw",value:'	<div class="OUTBRAIN ob-right-rail" data-src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"outbrain_url",match:["outbrain_url"]}]},{type:"raw",value:'" data-widget-id="AR_2" data-ob-template="Fortune"></div>\n'}]}}],Fortune.templates["rightrail-module-popular"]=[{type:"raw",value:'<p class="right-rail-module-title">Popular Subscriber Articles</p>\n<img src="http://placehold.it/220x285" alt="">\n<ul>\n	<li><a href="#"><h4>Obama\'s Muted, Forgettable State of the Union</h4></a><span class="icon icon-key"></span></li>\n	<li><a href="#"><h4>Booking returns on Priceline</h4></a><span class="icon icon-key"></span></li>\n	<li><a href="#"><h4>Why Coca-Cola invested in Keurig</h4></a><span class="icon icon-key"></span></li>\n</ul>\n<a href="#">Subscribe</a>'}],Fortune.templates["rightrail-module-related"]=[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"articles",match:["articles"]}],output:[{type:"raw",value:'	<p class="right-rail-module-title">More</p>\n	<ul>\n		'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"article",expression:[{type:"Twig.expression.type.variable",value:"articles",match:["articles"]}],output:[{type:"raw",value:'			<li><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.string",value:"?iid=rightrail-more"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</a></li>\n		"}]}},{type:"raw",value:"	</ul>\n"}]}}],Fortune.templates["rightrail-module-taboola"]=[{type:"raw",value:'<p class="right-rail-module-title">by taboola</p>\n<div class="module-video-primary">\n	<div class="module-video-primary-thumb">\n		<span class="icon icon-video-play"></span>\n		<img src="http://placehold.it/220x160" alt="">\n	</div>\n	<div class="module-video-primary-text">\n		<h4><a href="#">Shadow Banking: China\'s wobbly house of cards</a><span class="icon icon-video"></span></h4>\n	</div>\n</div>\n<div class="module-video-secondary">\n	<ul>\n		<li><a href="#"><h4>Exclusive: Vine raising $300 million video royalty fund</h4></a><span class="icon icon-video"></span></li>\n		<li><a href="#"><h4>The highest paid (and lowest) MBAs</h4></a><span class="icon icon-video"></span></li>\n	</ul>\n</div>'}],Fortune.templates["rightrail-module-trulia"]=[{type:"raw",value:'<link rel="stylesheet" href="http://css.trulia-cdn.com/css/G13_24/css/pg_truliatool-generate.css">\n<style type="text/css">\n  .trulia_tool {\n    width: 220px;\n    height: 500px;\n    font-family: \'helvetica\', sans-serif;\n    background-color: #F9F9F9;\n    border-top: 2px solid #E9E9E9;\n    line-height: normal;\n  }\n\n  .trulia_tool_footer {\n    background-color: #F9F9F9;\n  }\n  .city_links {\n    padding-left: 10px;\n    padding-right: 10px;\n    background-color: #F9F9F9;\n  }\n\n  h4 {\n    padding-left: 10px;\n    padding-top: 10px;\n    margin:0;\n  }\n  </style>\n<div class="trulia_tool container180x250 home-finder grey">\n  <h4 style="color:black; font-family:\'helvetica\', sans-serif;">Find a Home</h4>\n  <iframe\n    src="http://synd.trulia.com/tools/home-finder/embedded?params%5Blocation%5D=&params%5BlocationId%5D=&params%5Bcolor%5D=grey&params%5Bemail%5D=&params%5Buser_url%5D=&params%5Btitle%5D=Find+a+home&params%5Bwidth%5D=220&params%5Bheight%5D=375&params%5Btpl%5D=fortune&params%5Bguid%5D=534dadfdb7ed9"\n    style="height: 375px; overflow: hidden;">\n    <p>Your browser does not support iframes</p>\n  </iframe>\n  <div class="city_links" style="font-size: 65%">\n    <span class="phm">\n    Find a home in:<br/>\n    <a href="http://realestate.fortune.com/NY/New_York/" target="_blank">New York</a> |\n    <a href="http://realestate.fortune.com/GA/Atlanta/" target="_blank">Atlanta</a> |\n    <a href="http://realestate.fortune.com/IL/Chicago/" target="_blank">Chicago</a> <br/>\n    <a href="http://realestate.fortune.com/CA/Los_Angeles/" target="_blank">Los Angeles</a> |\n    <a href="http://realestate.fortune.com/DC/Washington/" target="_blank">Washington D.C.</a>\n    <a href="http://realestate.fortune.com/TX/Houston/" target="_blank">Houston</a> |\n    <a href="http://realestate.fortune.com/PA/Philadelphia/" target="_blank">Philadelphia</a>\n      </span>\n  </div>\n  <div class="trulia_tool_footer">\n    <div class="footer-link typeTruncate">\n    </div>\n      <a class="trulia-logo" target="_blank" title="Trulia" href="http://www.trulia.com/"></a>\n    <div style="float:right;font-size:9px;color:black;font-family:\'helvetica\', sans-serif;margin-top:18px;margin-right:2px">\n      find more homes on\n    </div>\n\n  </div>\n</div>'}],Fortune.templates["search-autocomplete"]=[{type:"raw",value:'<div class="fortune-search">\n<button class="site-search-submit icon icon-search" type="submit" aria-hidden="true" data-event="search event"></button>\n<input type="text" class="site-search-input" id="site-search-input" placeholder="Quotes, Companies, Keywords" name="q">\n<span class="search-close"></span>\n</div>\n<span class="screen-reader-text">Search</span>\n'}],Fortune.templates["search-filter-by"]=[{type:"raw",value:'<p class="filter-title">Filter By</p>\n<ul>\n	<li class="active search-filter-all"><a href="#">All Results ('},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"items",match:["items"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"all"}]},{type:"raw",value:')</a></li>\n	<li class="search-filter-articles"><a href="#">Articles ('},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"items",match:["items"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"articles"}]},{type:"raw",value:')</a></li>\n	<li class="search-filter-videos"><a href="#">Videos ('},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"items",match:["items"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"videos"}]},{type:"raw",value:")</a></li>\n</ul>\n				\n"}],Fortune.templates["search-market-data-item"]=[{type:"raw",value:'\n<th><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"link",match:["link"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"symbol",match:["symbol"]}]},{type:"raw",value:'</a></th>\n<td class="search-company"><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"link",match:["link"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"name",match:["name"]}]},{type:"raw",value:"</a></td>\n<td>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"price",match:["price"]}]},{type:"raw",value:"</td>\n"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"change",match:["change"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">=",precidence:8,associativity:"leftToRight",operator:">="}],output:[{type:"raw",value:'	<td class="change increase">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"change",match:["change"]}]},{type:"raw",value:" ("},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"percent",match:["percent"]}]},{type:"raw",value:"%)</td>\n"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'	<td class="change decrease">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"change",match:["change"]}]},{type:"raw",value:" ("},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"percent",match:["percent"]}]},{type:"raw",value:"%)</td>\n"}]}}],Fortune.templates["search-market-data-mobile-item"]=[{type:"raw",value:'\n<div class="search-company-content">\n	<p><span class="symbol"><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"link",match:["link"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"symbol",match:["symbol"]}]},{type:"raw",value:'</a></span> <a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"link",match:["link"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"name",match:["name"]}]},{type:"raw",value:"</a></p>\n	<p>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"price",match:["price"]}]},{type:"raw",value:'<span class="change increase">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"change",match:["change"]}]},{type:"raw",value:" ("},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"percent",match:["percent"]}]},{type:"raw",value:')</span></p>\n</div>\n<span class="icon icon-right-arrow"></span>\n'}],Fortune.templates["search-result"]=[{type:"raw",value:'<article class="search-article'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"content-from"}]}],output:[{type:"raw",value:" nativo-search-tile"}]}},{type:"raw",value:'" data-is-video="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"is_video",match:["is_video"]}]},{type:"raw",value:'" >\n	'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"section",match:["section"]},{type:"Twig.expression.type.variable",value:"primary_tag",match:["primary_tag"]},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'	<div class="article-tags">\n		<a class="article-section-tag" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"section_url",match:["section_url"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"section",match:["section"]}]},{type:"raw",value:'</a>\n		<a class="article-primary-tag" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"primary_tag_url",match:["primary_tag_url"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"primary_tag",match:["primary_tag"]}]},{type:"raw",value:"</a>\n	</div>\n	"}]}},{type:"raw",value:"	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"content-from"}]}],output:[{type:"raw",value:"		<h4>Content From: <strong>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.string",value:"content-from"}]}]},{type:"raw",value:"</strong></h4>\n	"}]}},{type:"raw",value:"	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"link"},{type:"Twig.expression.type.test",filter:"null"}],output:[{type:"raw",value:'		<h3 class="search-article-title"><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</a></h3>\n	"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'		<h3 class="search-article-title"><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"link"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]}]},{type:"raw",value:"</a></h3>\n		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"author"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.variable",value:"authorURL",match:["authorURL"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'			<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"authorURL",match:["authorURL"]}]},{type:"raw",value:'" class="author">by '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"author"}]},{type:"raw",value:"</a>\n		"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"author"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'			<p class="author">by '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"author"}]},{type:"raw",value:"</p>\n		"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"			"},{type:"raw",value:"\n		"}]}},{type:"raw",value:'		<time class="article-byline-time article-byline-item" itemprop="datePublished" datetime="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"published"}]},{type:"raw",value:'" pubdate>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"pubDate"},{type:"Twig.expression.type.filter",value:"date",match:["|date","date"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"F j, Y"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:", "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"pubDate"},{type:"Twig.expression.type.filter",value:"date",match:["|date","date"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"g:i A"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</time>\n		<p class="excerpt">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"webDescription"}]},{type:"raw",value:"</p>\n	"}]}},{type:"raw",value:"</article>\n"}],Fortune.templates["search-results"]=[{type:"raw",value:'<section class="search-content-articles">\n	<h2>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"results_num",match:["results_num"]}]},{type:"raw",value:'</h2>\n	<form action="#" class="mobile filter-form">\n		<div class="dropdown-item">\n			<p class="dropdown-text">Sort By</p>\n		</div>\n		<div class="dropdown-item">\n			<p class="dropdown-text">Filter By</p>\n		</div>\n	</form>\n	<div class="search-articles-container">\n		{ % for article in items % }\n			<article class="search-article">\n				<div class="article-tags">\n					<a class="article-section-tag" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"section_link"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"section"}]},{type:"raw",value:'</a>\n					<a class="article-primary-tag" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"primary_tag_link"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"primary_tag"}]},{type:"raw",value:'</a>\n				</div>\n				<h3 class="search-article-title"><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"link"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",
value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:'</a></h3>\n				<p class="excerpt">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"article",match:["article"]},{type:"Twig.expression.type.key.period",key:"excerpt"}]},{type:"raw",value:"</p>\n			</article>\n		{ % endfor % }\n	</div>\n</section>"}],Fortune.templates["search-source"]=[{type:"raw",value:'<p class="filter-title">Source</p>\n<ul>\n	<li class="active search-source-fortune"><a href="#">Fortune.com</a></li>\n	<li class="search-source-archives"><a href="#">Archives</a></li>\n</ul>\n				\n'}],Fortune.templates["search-term"]=[{type:"raw",value:'<h1 class="search-term">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"term",match:["term"]}]},{type:"raw",value:"</h1>"}],Fortune.templates.search=[{type:"raw",value:'<div class="search-wrapper">\n\n	<form class="site-search top-main-search" action="http://search-app.fortune.com">\n		<div class="fortune-search">\n		<input type="text" class="site-search-input" id="site-search-input" placeholder="Quotes, Companies, Keywords" name="q">\n		<button class="site-search-submit icon icon-search" type="submit" aria-hidden="true" data-event="search event"></button>\n		</div>\n		<span class="screen-reader-text">Search</span>\n	</form>\n\n	<aside class="left-rail-container search-left-rail rail">\n\n		<form class="site-search" action="http://search-app.fortune.com">\n			<div class="fortune-search">\n			<input type="text" class="site-search-input" id="site-search-input" placeholder="Quotes, Companies, Keywords" name="q">\n			<button class="site-search-submit icon icon-search" type="submit" aria-hidden="true" data-event="search event"></button>\n			</div>\n			<span class="screen-reader-text">Search</span>\n		</form>\n\n		<div class="search-filters">\n			<div class="filter-source">\n			</div>\n			<div class="filter-sort-by">\n				<p class="filter-title">Sort By</p>\n				<ul>\n					<li><a href="#">Date</a></li>\n					<li class="active"><a href="#">Relevance</a></li>\n				</ul>\n			</div>\n			<div class="filter-by">\n			</div>\n		</div>\n\n	</aside>\n\n	<section class="search-content rail-offset">\n\n		<section class="search-content-header">\n			<div class="search-term"></div>\n			<div class="search-market-data-wrapper">\n\n				<table class="search-term-market-data">\n\n				</table>\n\n				<div class="search-term-market-data-mobile mobile">\n\n				</div>\n\n			</div>\n		</section>\n\n		<section class="search-content-articles">\n			<div class="search-content-numfound"></div>\n			<form action="#" class="mobile filter-form">\n				<div class="dropdown-item">\n					<p class="mobile-sort-by">Sort By</p>\n				</div>\n				<div class="dropdown-item">\n					<p class="mobile-filter-by">Filter By</p>\n				</div>\n			</form>\n\n			<div class="search-articles-container"></div>\n		</section>\n\n	</section>\n</div>\n'}],Fortune.templates["sitenav-section"]=[{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"section_item",expression:[{type:"Twig.expression.type.variable",value:"menu_section",match:["menu_section"]}],output:[{type:"raw",value:"	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"section_item",match:["section_item"]},{type:"Twig.expression.type.key.period",key:"title"},{type:"Twig.expression.type.variable",value:"section_item",match:["section_item"]},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"		"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"section_item",match:["section_item"]},{type:"Twig.expression.type.key.period",key:"classes"}],output:[{type:"raw",value:"			"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"icon"},{type:"Twig.expression.type.variable",value:"section_item",match:["section_item"]},{type:"Twig.expression.type.key.period",key:"classes"},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:'				<li>\n					<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"section_item",match:["section_item"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" class="'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"class",expression:[{type:"Twig.expression.type.variable",value:"section_item",match:["section_item"]},{type:"Twig.expression.type.key.period",key:"classes"}],output:[{type:"output",stack:[{type:"Twig.expression.type.variable",value:"class",match:["class"]}]},{type:"raw",value:" "}]}},{type:"raw",value:'" target="_blank" aria-hidden="true"></a>\n					<span class="screen-reader-text">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"section_item",match:["section_item"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</span>\n				</li>\n			"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'				<li><a class="site-nav-link '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"class",expression:[{type:"Twig.expression.type.variable",value:"section_item",match:["section_item"]},{type:"Twig.expression.type.key.period",key:"classes"}],output:[{type:"output",stack:[{type:"Twig.expression.type.variable",value:"class",match:["class"]}]},{type:"raw",value:" "}]}},{type:"raw",value:'" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"section_item",match:["section_item"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"section_item",match:["section_item"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</a></li>\n			"}]}},{type:"raw",value:"	\n		"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'			<li><a class="site-nav-link" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"section_item",match:["section_item"]},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"section_item",match:["section_item"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</a></li>\n		"}]}},{type:"raw",value:"	\n	"}]}}]}}],Fortune.templates["ticker-item"]=[{type:"raw",value:'<div class="ticker-item-inner">\n	<time class="ticker-date" datetime="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"updated"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.key.period",key:"pretty"}]},{type:"raw",value:'</time>\n	<h3 class="ticker-headline">\n		'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"short_title",match:["short_title"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}]}],output:[{type:"raw",value:'			<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"url",match:["url"]}]},{type:"raw",value:'" data-event="newsbar">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"short_title",match:["short_title"]}]},{type:"raw",value:"</a>\n		"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'			<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"url",match:["url"]}]},{type:"raw",value:'" data-event="newsbar">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"</a>\n		"}]}},{type:"raw",value:"	</h3>\n</div>"}],Fortune.templates["ticker-market-data"]=[{type:"raw",value:'<li class="market-data ticker-item slideshow-item">\n	<iframe src="http://markets.fortune.com/application/markets/header" frameBorder="0" scrolling="no"></iframe>\n</li>'}];;
(function(){
  var s = document.createElement('script');
  s.async = true;
  s.type = 'text/javascript';
  s.src = document.location.protocol + '//d8rk54i4mohrb.cloudfront.net/js/reach.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
})();;
/***
 * Warning: This file is remotely enqueued in Jetpack's Masterbar module.
 * Changing it will also affect Jetpack sites.
 */
jQuery( document ).ready( function( $, wpcom ) {
	var masterbar,
		menupops = $( 'li#wp-admin-bar-blog.menupop, li#wp-admin-bar-newdash.menupop, li#wp-admin-bar-my-account.menupop' ),
		newmenu = $( '#wp-admin-bar-new-post-types' );

	// Unbind hoverIntent, we want clickable menus.
	menupops
		.unbind( 'mouseenter mouseleave' )
		.removeProp( 'hoverIntent_t' )
		.removeProp( 'hoverIntent_s' )
		.on( 'mouseover', function(e) {
			var li = $(e.target).closest( 'li.menupop' );
			menupops.not(li).removeClass( 'ab-hover' );
			li.toggleClass( 'ab-hover' );
		} )
		.on( 'click touchstart', function(e) {
			var $target = $( e.target );

			if ( masterbar.focusSubMenus( $target ) ) {
				return;
			}

			e.preventDefault();
			masterbar.toggleMenu( $target );
		} );

	masterbar = {
		focusSubMenus: function( $target ) {
			// Handle selection of menu items
			if ( ! $target.closest( 'ul' ).hasClass( 'ab-top-menu' ) ) {
				$target
					.closest( 'li' );

				return true;
			}

			return false;
		},

		toggleMenu: function( $target ) {
			var $li = $target.closest( 'li.menupop' ),
				$html = $( 'html' );

			$( 'body' ).off( 'click.ab-menu' );
			$( '#wpadminbar li.menupop' ).not($li).removeClass( 'ab-active wpnt-stayopen wpnt-show' );

			if ( $li.hasClass( 'ab-active' ) ) {
				$li.removeClass( 'ab-active' );
				$html.removeClass( 'ab-menu-open' );
			} else {
				$li.addClass( 'ab-active' );
				$html.addClass( 'ab-menu-open' );

				$( 'body' ).on( 'click.ab-menu', function( e ) {
					if ( ! $( e.target ).parents( '#wpadminbar' ).length ) {
						e.preventDefault();
						masterbar.toggleMenu( $li );
						$( 'body' ).off( 'click.ab-menu' );
					}
				} );
			}
		}
	};
} );;
